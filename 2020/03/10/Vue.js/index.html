<!DOCTYPE html>
<html lang="zh-CN">
<head><meta name="generator" content="Hexo 3.9.0">
    <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
<meta http-equiv="X-UA-Compatible" content="ie=edge">



<title>Vue.js | Blog of DoffChen</title>



    <link rel="icon" href="/favicon.ico">




    <!-- stylesheets list from _config.yml -->
    
    <link rel="stylesheet" href="/css/style.css">
    



    <!-- scripts list from _config.yml -->
    
    <script src="/js/script.js"></script>
    
    <script src="/js/tocbot.min.js"></script>
    



    
    
        <!-- MathJax配置，可通过单美元符号书写行内公式等 -->
<script type="text/x-mathjax-config">
    MathJax.Hub.Config({
    "HTML-CSS": {
        preferredFont: "TeX",
        availableFonts: ["STIX","TeX"],
        linebreaks: { automatic:true },
        EqnChunk: (MathJax.Hub.Browser.isMobile ? 10 : 50)
    },
    tex2jax: {
        inlineMath: [ ["$", "$"], ["\\(","\\)"] ],
        processEscapes: true,
        ignoreClass: "tex2jax_ignore|dno",
        skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
    },
    TeX: {
        equationNumbers: { autoNumber: "AMS" },
        noUndefined: { attributes: { mathcolor: "red", mathbackground: "#FFEEEE", mathsize: "90%" } },
        Macros: { href: "{}" }
    },
    messageStyle: "none"
    });
</script>
<!-- 给MathJax元素添加has-jax class -->
<script type="text/x-mathjax-config">
    MathJax.Hub.Queue(function() {
        var all = MathJax.Hub.getAllJax(), i;
        for(i=0; i < all.length; i += 1) {
            all[i].SourceElement().parentNode.className += ' has-jax';
        }
    });
</script>
<!-- 通过连接CDN加载MathJax的js代码 -->
<script type="text/javascript" async src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-MML-AM_CHTML">
</script>


    


</head>
<body>
    <div class="wrapper">
        <header>
    <nav class="navbar">
        <div class="container">
            <div class="navbar-header header-logo"><a href="/">DoffChen&#39;s Blog</a></div>
            <div class="menu navbar-right">
                
                    <a class="menu-item" href="/archives">归档</a>
                
                    <a class="menu-item" href="/category">分类</a>
                
                    <a class="menu-item" href="/tag">标签</a>
                
                    <a class="menu-item" href="/about">关于</a>
                
                    <a class="menu-item" href="http://tools.doffchen.cn/%E7%95%99%E8%A8%80%E6%9D%BF/">留言</a>
                
                    <a class="menu-item" href="http://tools.doffchen.cn/">tools</a>
                
                <input id="switch_default" type="checkbox" class="switch_default">
                <label for="switch_default" class="toggleBtn"></label>
            </div>

        </div>
    </nav>

    
    <nav class="navbar-mobile" id="nav-mobile">
        <div class="container">
            <div class="navbar-header">
                <div>
                    <a href="/">DoffChen&#39;s Blog</a><a id="mobile-toggle-theme">·&nbsp;Light</a>
                </div>
                <div class="menu-toggle" onclick="mobileBtn()">&#9776; Menu</div>
            </div>
            <div class="menu" id="mobile-menu">
                
                    <a class="menu-item" href="/archives">归档</a>
                
                    <a class="menu-item" href="/category">分类</a>
                
                    <a class="menu-item" href="/tag">标签</a>
                
                    <a class="menu-item" href="/about">关于</a>
                
                    <a class="menu-item" href="http://tools.doffchen.cn/%E7%95%99%E8%A8%80%E6%9D%BF/">留言</a>
                
                    <a class="menu-item" href="http://tools.doffchen.cn/">tools</a>
                
            </div>
        </div>
    </nav>

</header>
<script>
    var mobileBtn = function f() {
        var toggleMenu = document.getElementsByClassName("menu-toggle")[0];
        var mobileMenu = document.getElementById("mobile-menu");
        if(toggleMenu.classList.contains("active")){
           toggleMenu.classList.remove("active")
            mobileMenu.classList.remove("active")
        }else{
            toggleMenu.classList.add("active")
            mobileMenu.classList.add("active")
        }
    }
</script>
        <div class="main">
            <div class="container">
    
    
        <div class="post-toc">
    <div class="tocbot-list">
    </div>
    <div class="tocbot-list-menu">
        <a class="tocbot-toc-expand" onclick="expand_toc()">Expand all</a>
        <a onclick="go_top()">Back to top</a>
        <a onclick="go_bottom()">Go to bottom</a>
    </div>
</div>

<script>
    document.ready(
        function () {
            tocbot.init({
                tocSelector: '.tocbot-list',
                contentSelector: '.post-content',
                headingSelector: 'h1, h2, h3, h4, h5',
                collapseDepth: 1,
                orderedList: false,
                scrollSmooth: true,
            })
        }
    )

    function expand_toc() {
        var b = document.querySelector(".tocbot-toc-expand");
        tocbot.init({
            tocSelector: '.tocbot-list',
            contentSelector: '.post-content',
            headingSelector: 'h1, h2, h3, h4, h5',
            collapseDepth: 6,
            orderedList: false,
            scrollSmooth: true,
        });
        b.setAttribute("onclick", "collapse_toc()");
        b.innerHTML = "Collapse all"
    }

    function collapse_toc() {
        var b = document.querySelector(".tocbot-toc-expand");
        tocbot.init({
            tocSelector: '.tocbot-list',
            contentSelector: '.post-content',
            headingSelector: 'h1, h2, h3, h4, h5',
            collapseDepth: 1,
            orderedList: false,
            scrollSmooth: true,
        });
        b.setAttribute("onclick", "expand_toc()");
        b.innerHTML = "Expand all"
    }

    function go_top() {
        window.scrollTo(0, 0);
    }

    function go_bottom() {
        window.scrollTo(0, document.body.scrollHeight);
    }

</script>
    

    
    <article class="post-wrap">
        <header class="post-header">
            <h1 class="post-title">Vue.js</h1>
            
                <div class="post-meta">
                    
                        Author: <a itemprop="author" rel="author" href="/">DoffChen</a>
                    

                    
                        <span class="post-time">
                        Date: <a href="#">March 10, 2020&nbsp;&nbsp;11:00:00</a>
                        </span>
                    
                    
                        <span class="post-category">
                    Category:
                            
                                <a href="/categories/Vue/">Vue</a>
                            
                        </span>
                    
                </div>
            
        </header>

        <div class="post-content">
            <h1 id="Vue-js"><a href="#Vue-js" class="headerlink" title="Vue.js"></a>Vue.js</h1><p><a name="aPPgQ"></a></p>
<h1 id="Vue-简介"><a href="#Vue-简介" class="headerlink" title="Vue 简介"></a>Vue 简介</h1><p><a name="AW7gn"></a></p>
<h2 id="Vue-简单认识"><a href="#Vue-简单认识" class="headerlink" title="Vue 简单认识"></a>Vue 简单认识</h2><ul>
<li><p><a href="https://cn.vuejs.org/v2/guide/" target="_blank" rel="noopener">Vue 官网</a></p>
</li>
<li><p>Vue（读音 /vjuː/，类似于 view）是一个渐进式的框架，什么是渐进式？ <br></p>
<ul>
<li>渐进式意味着你可以将 Vue 作为应用的一部分嵌入其中，带来更丰富的交互体验</li>
<li>或者如果你希望将更多的业务逻辑使用Vue实现，那么Vue的核心库以及其生态系统（比如：Core+Vue-router+Vuex）也可以满足你各种各样的需求</li>
</ul>
</li>
</ul>
<ul>
<li>Vue 有很多特点和Web开发中常见的高级功能<ul>
<li>解耦视图和数据</li>
<li>可复用的组件</li>
<li>前端路由技术</li>
<li>状态管理</li>
<li>虚拟DOM</li>
</ul>
</li>
</ul>
<p><a name="7nrof"></a></p>
<h2 id="Vue-安装"><a href="#Vue-安装" class="headerlink" title="Vue 安装"></a>Vue 安装</h2><p>安装Vue的方式有很多：</p>
<p><a name="Nycsm"></a></p>
<h3 id="方式一：直接CDN引入"><a href="#方式一：直接CDN引入" class="headerlink" title="方式一：直接CDN引入"></a>方式一：直接CDN引入</h3><p>你可以选择引入开发环境版本还是生产环境版本</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- 开发环境版本，包含了有帮助的命令行警告 --&gt;</span><br><span class="line">&lt;script src=<span class="string">"https://cdn.jsdelivr.net/npm/vue/dist/vue.js"</span>&gt;<span class="xml"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br><span class="line">&lt;!-- 生产环境版本，优化了尺寸和速度 --&gt;</span><br><span class="line">&lt;script src=<span class="string">"https://cdn.jsdelivr.net/npm/vue"</span>&gt;<span class="xml"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br></pre></td></tr></table></figure>

<p><a name="XNEh4"></a></p>
<h3 id="方式二：下载和引入"><a href="#方式二：下载和引入" class="headerlink" title="方式二：下载和引入"></a>方式二：下载和引入</h3><ul>
<li>开发环境：<a href="https://vuejs.org/js/vue.js" target="_blank" rel="noopener">https://vuejs.org/js/vue.js</a></li>
<li>生产环境：<a href="https://vuejs.org/js/vue.min.js" target="_blank" rel="noopener">https://vuejs.org/js/vue.min.js</a></li>
</ul>
<p><a name="g88NW"></a></p>
<h3 id="方式三：NPM-安装"><a href="#方式三：NPM-安装" class="headerlink" title="方式三：NPM 安装"></a>方式三：NPM 安装</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install vue</span><br></pre></td></tr></table></figure>

<p><a name="YFJI3"></a></p>
<h2 id="Vue-初体验"><a href="#Vue-初体验" class="headerlink" title="Vue 初体验"></a>Vue 初体验</h2><p><a name="n3tJ0"></a></p>
<h3 id="Hello-World"><a href="#Hello-World" class="headerlink" title="Hello World"></a>Hello World</h3><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"div"</span>&gt;</span>&#123;&#123;message&#125;&#125;<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"./js/vue.js"</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="actionscript">  <span class="keyword">const</span> app = <span class="keyword">new</span> Vue(&#123;</span></span><br><span class="line"><span class="actionscript">    el: <span class="string">'.div'</span>,</span></span><br><span class="line">    data: &#123;</span><br><span class="line"><span class="actionscript">      message: <span class="string">'Hello Vue!'</span></span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;);</span><br><span class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p><a name="I9NHK"></a></p>
<h3 id="展示列表"><a href="#展示列表" class="headerlink" title="展示列表"></a>展示列表</h3><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"div"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">ul</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">li</span> <span class="attr">v-for</span>=<span class="string">"item in NBAStars"</span>&gt;</span>&#123;&#123;item&#125;&#125;<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"./js/vue.js"</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="actionscript">  <span class="keyword">const</span> app = <span class="keyword">new</span> Vue(&#123;</span></span><br><span class="line"><span class="actionscript">    el: <span class="string">'.div'</span>,</span></span><br><span class="line">    data: &#123;</span><br><span class="line"><span class="actionscript">      NBAStars: [<span class="string">'林书豪'</span>, <span class="string">'杜兰特'</span>, <span class="string">'詹姆斯'</span>, <span class="string">'欧文'</span>, <span class="string">'库里'</span>]</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;);</span><br><span class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p><a name="bygD4"></a></p>
<h3 id="计数器"><a href="#计数器" class="headerlink" title="计数器"></a>计数器</h3><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"div"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">h2</span>&gt;</span>当前计数：&#123;&#123;counter&#125;&#125;<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">'increment'</span>&gt;</span>+<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">'decrement'</span>&gt;</span>-<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"./js/vue.js"</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="actionscript">  <span class="keyword">const</span> app = <span class="keyword">new</span> Vue(&#123;</span></span><br><span class="line"><span class="actionscript">    el: <span class="string">'.div'</span>,</span></span><br><span class="line">    data: &#123;</span><br><span class="line">      counter: 0</span><br><span class="line">    &#125;,</span><br><span class="line">    methods: &#123;</span><br><span class="line"><span class="actionscript">      increment: <span class="function"><span class="keyword">function</span><span class="params">()</span> </span>&#123;</span></span><br><span class="line"><span class="actionscript">        <span class="keyword">this</span>.counter++</span></span><br><span class="line">      &#125;,</span><br><span class="line"><span class="actionscript">      decrement: <span class="function"><span class="keyword">function</span><span class="params">()</span> </span>&#123;</span></span><br><span class="line"><span class="actionscript">        <span class="keyword">this</span>.counter--</span></span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;)</span><br><span class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p><a name="NKmZN"></a></p>
<h2 id="Vue-中的-MVVM"><a href="#Vue-中的-MVVM" class="headerlink" title="Vue 中的 MVVM"></a>Vue 中的 MVVM</h2><p><a name="a0wsh"></a></p>
<h3 id="什么是MVVM"><a href="#什么是MVVM" class="headerlink" title="什么是MVVM"></a>什么是MVVM</h3><p><a href="https://segmentfault.com/a/1190000015895017" target="_blank" rel="noopener">MVVM框架理解及其原理实现</a></p>
<p><img src="https://cdn.nlark.com/yuque/0/2020/png/335089/1580980437200-ea7e30ba-6a1c-4611-b1af-27060c60b3d5.png#align=left&display=inline&height=223&name=%E5%9B%BE%E7%89%87.png&originHeight=330&originWidth=651&size=85094&status=done&style=none&width=440" alt="图片.png"></p>
<ul>
<li>View 层：视图层，在前端开发中，通常就是 DOM 层，主要的作用是给用户展示各种信息</li>
<li>Model 层：数据层，数据可能是我们固定的死数据，更多的是来自我们服务器，从网络上请求下来的数据</li>
<li>VueModel 层：视图模型层，视图模型层是 View 和 Model 沟通的桥梁，一方面实现了 Data Binding（数据绑定），将 Model 的改变实时的反应到 View 中，另一方面它实现了 DOM Listener（DOM监听），当 DOM 发生一些事件（点击、滚动、touch 等）时，可以监听到，并在需要的情况下改变对应的 Data</li>
</ul>
<p><a name="dpQhb"></a></p>
<h3 id="MVC-和-MVVM-的区别"><a href="#MVC-和-MVVM-的区别" class="headerlink" title="MVC 和 MVVM 的区别"></a>MVC 和 MVVM 的区别</h3><p><a href="https://www.jianshu.com/p/b0aab1ffad93" target="_blank" rel="noopener">MVC 和 MVVM 的区别</a></p>
<ul>
<li>MVC</li>
</ul>
<p><img src="https://cdn.nlark.com/yuque/0/2020/png/335089/1580990106405-442aaead-72e8-4c42-a6dd-7ae4ad89ff1f.png#align=left&display=inline&height=291&name=%E5%9B%BE%E7%89%87.png&originHeight=452&originWidth=1160&size=344840&status=done&style=none&width=746" alt="图片.png"></p>
<ul>
<li>MVVM</li>
</ul>
<p><img src="https://cdn.nlark.com/yuque/0/2020/png/335089/1580990150189-e25b721a-58cc-4e85-bc6e-544191ece676.png#align=left&display=inline&height=288&name=%E5%9B%BE%E7%89%87.png&originHeight=465&originWidth=1203&size=497084&status=done&style=none&width=746" alt="图片.png"></p>
<p><a name="ZOpEL"></a></p>
<h3 id="Vue-的生命周期"><a href="#Vue-的生命周期" class="headerlink" title="Vue 的生命周期"></a>Vue 的生命周期</h3><p><img src="https://cdn.nlark.com/yuque/0/2020/png/335089/1580990422037-44b90d50-51e2-404d-8f5b-803591048df8.png#align=left&display=inline&height=2414&name=20200113231944171.png&originHeight=2414&originWidth=999&size=9664464&status=done&style=none&width=999" alt="20200113231944171.png"><br><img src="https://cdn.nlark.com/yuque/0/2020/png/335089/1580990363163-b1124f91-99cf-4c15-9b5e-908ba25d50cd.png#align=left&display=inline&height=540&name=%E5%9B%BE%E7%89%87.png&originHeight=692&originWidth=892&size=114328&status=done&style=none&width=696" alt="图片.png"><br></p>
<p><a name="BSCLl"></a></p>
<h1 id="Vue-基础语法"><a href="#Vue-基础语法" class="headerlink" title="Vue 基础语法"></a>Vue 基础语法</h1><p><a name="jVb4E"></a></p>
<h2 id="插值语法"><a href="#插值语法" class="headerlink" title="插值语法"></a>插值语法</h2><p>插值：将值插入到模板的内容中</p>
<p><a name="vMuK3"></a></p>
<h3 id="Mustache"><a href="#Mustache" class="headerlink" title="Mustache"></a>Mustache</h3><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"div"</span>&gt;</span></span><br><span class="line">  <span class="comment">&lt;!-- 插到标签中 --&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">h2</span>&gt;</span>Hello &#123;&#123;name&#125;&#125;<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br><span class="line">  <span class="comment">&lt;!-- 使用了两个Mustach --&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">h2</span>&gt;</span>&#123;&#123;firstName&#125;&#125; &#123;&#123;lastName&#125;&#125;<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br><span class="line">  <span class="comment">&lt;!-- 也可以是表达式 --&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">h2</span>&gt;</span>&#123;&#123;counter*2&#125;&#125;<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"./js/vue.js"</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="actionscript">  <span class="keyword">const</span> app = <span class="keyword">new</span> Vue(&#123;</span></span><br><span class="line"><span class="actionscript">    el: <span class="string">'.div'</span>,</span></span><br><span class="line">    data: &#123;</span><br><span class="line"><span class="actionscript">      name: <span class="string">'VueJS'</span>,</span></span><br><span class="line"><span class="actionscript">      firstName: <span class="string">'Yuanyang'</span>,</span></span><br><span class="line"><span class="actionscript">      lastName: <span class="string">'Liao'</span>,</span></span><br><span class="line">      counter: 100</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;);</span><br><span class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p><a name="KrWT8"></a></p>
<h3 id="v-once"><a href="#v-once" class="headerlink" title="v-once"></a>v-once</h3><p>在某些情况下，我们可能不希望界面中 Mustach 中的值随意的跟随改变，就可以使用一个 Vue 的指令：<code>v-once</code></p>
<ul>
<li>该指令后面不需要跟任何表达式</li>
<li>该指令表示元素和组件只渲染一次，不会随着数据的改变而改变</li>
</ul>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"app"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">h2</span>&gt;</span>&#123;&#123;message&#125;&#125;<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">h2</span> <span class="attr">v-once</span>&gt;</span>&#123;&#123;message&#125;&#125;<span class="tag">&lt;/<span class="name">h2</span>&gt;</span> <span class="comment">&lt;!-- 只会渲染一次 --&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"./js/vue.js"</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="actionscript">  <span class="keyword">const</span> app = <span class="keyword">new</span> Vue(&#123;</span></span><br><span class="line"><span class="actionscript">    el: <span class="string">'.app'</span>,</span></span><br><span class="line">    data: &#123;</span><br><span class="line"><span class="actionscript">      message: <span class="string">'Liao'</span></span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;)</span><br><span class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p><img src="https://cdn.nlark.com/yuque/0/2020/png/335089/1580999963496-f8c6a1dd-d2f0-4ca1-b675-e4aff9d02d58.png#align=left&display=inline&height=251&name=%E5%9B%BE%E7%89%87.png&originHeight=387&originWidth=799&size=27829&status=done&style=none&width=519" alt="图片.png"></p>
<p><a name="x5iNQ"></a></p>
<h3 id="v-html"><a href="#v-html" class="headerlink" title="v-html"></a>v-html</h3><p>某些情况下，我们从服务器请求到的数据本身就是一个 HTML 代码，如果我们直接通过 <code>{{}}</code> 来输出，会将 HTML 代码也一起输出，但如果希望按照 HTML 格式进行解析，并且显示对应的内容，可以使用 <code>v-html</code> 指令</p>
<p><code>v-html</code> 指令后面往往会跟上一个 string 类型，会将 string 的 html 解析出来并且进行渲染</p>
<p><img src="https://cdn.nlark.com/yuque/0/2020/png/335089/1580999286442-ba502b8d-b5c3-4d82-a976-c91c733bb4d4.png#align=left&display=inline&height=210&name=%E5%9B%BE%E7%89%87.png&originHeight=420&originWidth=1446&size=54295&status=done&style=none&width=723" alt="图片.png"><br><a name="NrV7j"></a></p>
<h3 id="v-text"><a href="#v-text" class="headerlink" title="v-text"></a>v-text</h3><ul>
<li>v-text 作用和 Mustache 比较相似，都是用于将数据显示在界面中</li>
<li>v-text 通常情况下，接受一个 string 类型</li>
</ul>
<p><img src="https://cdn.nlark.com/yuque/0/2020/png/335089/1581000435736-b434e6c0-e6ae-4a6d-91ea-a45b360d1826.png#align=left&display=inline&height=235&name=%E5%9B%BE%E7%89%87.png&originHeight=413&originWidth=890&size=47384&status=done&style=none&width=507" alt="图片.png"></p>
<p><a name="NmeQH"></a></p>
<h3 id="v-pre"><a href="#v-pre" class="headerlink" title="v-pre"></a>v-pre</h3><p><code>v-pre</code> 用于跳过这个元素和它子元素的编译过程，显示原本的 Mustache 语法，将代码原封不动的解析出来</p>
<p><img src="https://cdn.nlark.com/yuque/0/2020/png/335089/1581000782310-a79f7bd6-1229-4455-9fba-803051502e77.png#align=left&display=inline&height=206&name=%E5%9B%BE%E7%89%87.png&originHeight=411&originWidth=795&size=39308&status=done&style=none&width=397.5" alt="图片.png"></p>
<p><a name="5HtBy"></a></p>
<h3 id="v-cloak"><a href="#v-cloak" class="headerlink" title="v-cloak"></a>v-cloak</h3><p>将未解析出来的代码块进行隐藏，但基本不会用到</p>
<p><img src="https://cdn.nlark.com/yuque/0/2020/png/335089/1581047269927-db77733e-9b5a-41d9-a8a2-e5d88fe1e62d.png#align=left&display=inline&height=364&name=%E5%9B%BE%E7%89%87.png&originHeight=694&originWidth=1184&size=72237&status=done&style=none&width=621" alt="图片.png"></p>
<p><a name="2Hpmk"></a></p>
<h2 id="绑定属性-v-bind"><a href="#绑定属性-v-bind" class="headerlink" title="绑定属性 v-bind"></a>绑定属性 v-bind</h2><p><a name="yDdKU"></a></p>
<h3 id="v-bind-基本使用"><a href="#v-bind-基本使用" class="headerlink" title="v-bind 基本使用"></a>v-bind 基本使用</h3><p>Mustache 指令主要作用是将值插入到我们模板的内容当中，但是，除了内容需要动态来决定外，某些属性我们也希望动态来绑定，比如：</p>
<ul>
<li>动态绑定 a 元素的 href 属性</li>
<li>动态绑定 img 元素的 src 属性</li>
</ul>
<p>这时，可以使用 <code>v-bind</code> 指令来动态绑定属性，<code>v-bind</code> 用于绑定一个或多个属性值，或者向另一个组件传递 props值</p>
<p><img src="https://cdn.nlark.com/yuque/0/2020/png/335089/1581049847345-76fb5f1e-b9e8-4c23-a67d-87826d128593.png#align=left&display=inline&height=281&name=%E5%9B%BE%E7%89%87.png&originHeight=561&originWidth=1326&size=79239&status=done&style=none&width=663" alt="图片.png"></p>
<p><a name="dlS7t"></a></p>
<h3 id="v-bind-语法糖"><a href="#v-bind-语法糖" class="headerlink" title="v-bind 语法糖"></a>v-bind 语法糖</h3><p>v-bind 有一个对应的语法糖（简写方式），在开发中，通常会使用语法糖的形式，因为这样更加简洁<br>简写方式如下：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"app"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">img</span> <span class="attr">:src</span>=<span class="string">"imgSrc"</span> <span class="attr">alt</span>=<span class="string">""</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">a</span> <span class="attr">:href</span>=<span class="string">"aHref"</span>&gt;</span>Vue.js官网<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>即省略 v-bind，直接写 <code>:</code></p>
<p><a name="GwDPu"></a></p>
<h3 id="v-bind-动态绑定-class"><a href="#v-bind-动态绑定-class" class="headerlink" title="v-bind 动态绑定 class"></a>v-bind 动态绑定 class</h3><p>很多时候，我们希望动态的来切换 class，比如：</p>
<ul>
<li>当数据为某个状态时，字体显示红色</li>
<li>当数据另一个状态时，字体显示黑色</li>
</ul>
<p>绑定 class 有两种方式：</p>
<ul>
<li>对象语法</li>
<li>数组语法</li>
</ul>
<ol>
<li>对象语法</li>
</ol>
<p>对象语法的含义是：class 后面跟的是一个对象<br>对象语法有下面这些用法：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">用法一：直接通过&#123;&#125;绑定一个类</span><br><span class="line"><span class="tag">&lt;<span class="name">h2</span> <span class="attr">:class</span>=<span class="string">"&#123;'active': isActive&#125;"</span>&gt;</span>Hello World<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br><span class="line"></span><br><span class="line">用法二：也可以通过判断，传入多个值</span><br><span class="line"><span class="tag">&lt;<span class="name">h2</span> <span class="attr">:class</span>=<span class="string">"&#123;'active': isActive, 'line': isLine&#125;"</span>&gt;</span>Hello World<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br><span class="line"></span><br><span class="line">用法三：和普通的类同时存在，并不冲突</span><br><span class="line">注：如果isActive和isLine都为true，那么会有title/active/line三个类</span><br><span class="line"><span class="tag">&lt;<span class="name">h2</span> <span class="attr">class</span>=<span class="string">"title"</span> <span class="attr">:class</span>=<span class="string">"&#123;'active': isActive, 'line': isLine&#125;"</span>&gt;</span>Hello World<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br><span class="line"></span><br><span class="line">用法四：如果过于复杂，可以放在一个methods或者computed中</span><br><span class="line">注：classes是一个计算属性</span><br><span class="line"><span class="tag">&lt;<span class="name">h2</span> <span class="attr">class</span>=<span class="string">"title"</span> <span class="attr">:class</span>=<span class="string">"classes"</span>&gt;</span>Hello World<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>点击按钮，修改文字颜色：</p>
<p><img src="https://cdn.nlark.com/yuque/0/2020/png/335089/1581055016234-10c4920a-eeb6-41fb-901a-11cd70378d6a.png#align=left&display=inline&height=415&name=%E5%9B%BE%E7%89%87.png&originHeight=830&originWidth=1620&size=130653&status=done&style=none&width=810" alt="图片.png"></p>
<p>有时候，如果 <code>v-bind:class=&quot;{active:isActive,line:isLine}&quot;</code> 中 class 的项太多，可以定义一个方法，将其放到 methods 中：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"app"</span>&gt;</span></span><br><span class="line">  <span class="comment">&lt;!-- &lt;h2 class="title" v-bind:class="&#123;active:isActive,line:isLine&#125;"&gt;&#123;&#123;message&#125;&#125;&lt;/h2&gt; --&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">h2</span> <span class="attr">class</span>=<span class="string">"title"</span> <span class="attr">v-bind:class</span>=<span class="string">"getCLasses()"</span>&gt;</span>&#123;&#123;message&#125;&#125;<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">button</span> <span class="attr">v-on:click</span>=<span class="string">"btnClick"</span>&gt;</span>改变颜色<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"../js/vue.js"</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="actionscript">  <span class="keyword">const</span> app = <span class="keyword">new</span> Vue(&#123;</span></span><br><span class="line"><span class="actionscript">    el: <span class="string">'.app'</span>,</span></span><br><span class="line">    data: &#123;</span><br><span class="line"><span class="actionscript">      message: <span class="string">'YuanyangLiao'</span>,</span></span><br><span class="line"><span class="actionscript">      isActive: <span class="literal">true</span>,</span></span><br><span class="line"><span class="actionscript">      isLine: <span class="literal">true</span></span></span><br><span class="line">    &#125;,</span><br><span class="line">    methods: &#123;</span><br><span class="line"><span class="actionscript">      btnClick: <span class="function"><span class="keyword">function</span><span class="params">()</span> </span>&#123;</span></span><br><span class="line"><span class="actionscript">        <span class="keyword">this</span>.isActive = !<span class="keyword">this</span>.isActive</span></span><br><span class="line">      &#125;,</span><br><span class="line"><span class="actionscript">      getCLasses: <span class="function"><span class="keyword">function</span><span class="params">()</span> </span>&#123;</span></span><br><span class="line"><span class="actionscript">        <span class="keyword">return</span> &#123;</span></span><br><span class="line"><span class="actionscript">          active: <span class="keyword">this</span>.isActive,</span></span><br><span class="line"><span class="actionscript">          line: <span class="keyword">this</span>.isLine</span></span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;)</span><br><span class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>

<ol start="2">
<li>数组语法</li>
</ol>
<p>数组语法的含义是：class 后面跟的是一个数组<br>数组语法有下面这些用法：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">用法一：直接通过&#123;&#125;绑定一个类</span><br><span class="line"><span class="tag">&lt;<span class="name">h2</span> <span class="attr">:class</span>=<span class="string">"['active']"</span>&gt;</span>Hello World<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br><span class="line"></span><br><span class="line">用法二：也可以传入多个值</span><br><span class="line"><span class="tag">&lt;<span class="name">h2</span> <span class="attr">:class</span>=<span class="string">“[‘active’,</span> '<span class="attr">line</span>']"&gt;</span>Hello World<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br><span class="line"></span><br><span class="line">用法三：和普通的类同时存在，并不冲突</span><br><span class="line">注：会有title/active/line三个类</span><br><span class="line"><span class="tag">&lt;<span class="name">h2</span> <span class="attr">class</span>=<span class="string">"title"</span> <span class="attr">:class</span>=<span class="string">“[‘active’,</span> '<span class="attr">line</span>']"&gt;</span>Hello World<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br><span class="line"></span><br><span class="line">用法四：如果过于复杂，可以放在一个methods或者computed中</span><br><span class="line">注：classes是一个计算属性</span><br><span class="line"><span class="tag">&lt;<span class="name">h2</span> <span class="attr">class</span>=<span class="string">"title"</span> <span class="attr">:class</span>=<span class="string">"classes"</span>&gt;</span>Hello World<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br></pre></td></tr></table></figure>

<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"app"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">h2</span> <span class="attr">class</span>=<span class="string">"title"</span> <span class="attr">v-bind:class</span>=<span class="string">"[active,line]"</span>&gt;</span>&#123;&#123;message&#125;&#125;<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">h2</span> <span class="attr">class</span>=<span class="string">"title"</span> <span class="attr">v-bind:class</span>=<span class="string">"getCLasses()"</span>&gt;</span>&#123;&#123;message&#125;&#125;<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">button</span> <span class="attr">v-on:click</span>=<span class="string">"btnClick"</span>&gt;</span>改变颜色<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"../js/vue.js"</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="actionscript">  <span class="keyword">const</span> app = <span class="keyword">new</span> Vue(&#123;</span></span><br><span class="line"><span class="actionscript">    el: <span class="string">'.app'</span>,</span></span><br><span class="line">    data: &#123;</span><br><span class="line"><span class="actionscript">      message: <span class="string">'YuanyangLiao'</span>,</span></span><br><span class="line"><span class="actionscript">      active: <span class="string">'active'</span>,</span></span><br><span class="line"><span class="actionscript">      line: <span class="literal">true</span></span></span><br><span class="line">    &#125;,</span><br><span class="line">    methods: &#123;</span><br><span class="line"><span class="actionscript">      btnClick: <span class="function"><span class="keyword">function</span><span class="params">()</span> </span>&#123;</span></span><br><span class="line"><span class="actionscript">        <span class="keyword">this</span>.isActive = !<span class="keyword">this</span>.isActive</span></span><br><span class="line">      &#125;,</span><br><span class="line"><span class="actionscript">      getCLasses: <span class="function"><span class="keyword">function</span><span class="params">()</span> </span>&#123;</span></span><br><span class="line"><span class="actionscript">        <span class="keyword">return</span> [<span class="keyword">this</span>.active, <span class="keyword">this</span>.line]</span></span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;)</span><br><span class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p><a name="iD1H8"></a></p>
<h3 id="案例：点击当前项变色"><a href="#案例：点击当前项变色" class="headerlink" title="案例：点击当前项变色"></a>案例：点击当前项变色</h3><p><img src="https://cdn.nlark.com/yuque/0/2020/png/335089/1581070943837-9b22d8a8-112f-4bbd-a4c5-d2e6f5248c51.png#align=left&display=inline&height=401&name=%E5%9B%BE%E7%89%87.png&originHeight=802&originWidth=1465&size=208557&status=done&style=none&width=732.5" alt="图片.png"></p>
<p><a name="IKGo8"></a></p>
<h3 id="v-bind-动态绑定-style"><a href="#v-bind-动态绑定-style" class="headerlink" title="v-bind 动态绑定 style"></a>v-bind 动态绑定 style</h3><p>我们可以利用 <code>v-bind:style</code> 来绑定一些 CSS 内联样式</p>
<p>在写CSS属性名的时候，比如 <code>font-size</code>，可以使用驼峰式 (camelCase) <code>fontSize</code>，或短横线分隔 (kebab-case，记得用单引号括起来) <code>&#39;font-size&#39;</code></p>
<p>绑定class有两种方式：</p>
<ul>
<li>对象语法</li>
<li>数组语法</li>
</ul>
<ol>
<li>对象语法</li>
</ol>
<p>style 后面跟的是一个对象类型</p>
<ul>
<li>对象的 key 是 CSS 属性名称</li>
<li>对象的 value 是具体赋的值，值可以来自于 data 中的属性</li>
</ul>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"app"</span>&gt;</span></span><br><span class="line">  <span class="comment">&lt;!-- 50px 必须加上单引号 --&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">h2</span> <span class="attr">:style</span>=<span class="string">"&#123;fontSize:'50px'&#125;"</span>&gt;</span>&#123;&#123;message&#125;&#125;<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br><span class="line">  <span class="comment">&lt;!-- finalSize、finalColor当成一个变量使用 --&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">h2</span> <span class="attr">:style</span>=<span class="string">"&#123;fontSize:finalSize + 'px',color:finalColor&#125;"</span>&gt;</span>&#123;&#123;message&#125;&#125;<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"../js/vue.js"</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="actionscript">  <span class="keyword">const</span> app = <span class="keyword">new</span> Vue(&#123;</span></span><br><span class="line"><span class="actionscript">    el: <span class="string">'.app'</span>,</span></span><br><span class="line">    data: &#123;</span><br><span class="line"><span class="actionscript">      message: <span class="string">'YuanyangLiao'</span>,</span></span><br><span class="line">      finalSize: 100,</span><br><span class="line"><span class="actionscript">      finalColor: <span class="string">'skyblue'</span>,</span></span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;)</span><br><span class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>

<ol start="2">
<li>数组语法</li>
</ol>
<p>style 后面跟的是一个数组类型</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"app"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">h2</span> <span class="attr">:style</span>=<span class="string">"[baseStyles,baseStyles2]"</span>&gt;</span>&#123;&#123;message&#125;&#125;<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"../js/vue.js"</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="actionscript">  <span class="keyword">const</span> app = <span class="keyword">new</span> Vue(&#123;</span></span><br><span class="line"><span class="actionscript">    el: <span class="string">'.app'</span>,</span></span><br><span class="line">    data: &#123;</span><br><span class="line"><span class="actionscript">      message: <span class="string">'YuanyangLiao'</span>,</span></span><br><span class="line">      baseStyles: &#123;</span><br><span class="line"><span class="actionscript">        color: <span class="string">'red'</span></span></span><br><span class="line">      &#125;,</span><br><span class="line">      baseStyles2: &#123;</span><br><span class="line"><span class="actionscript">        fontSize: <span class="string">'50px'</span></span></span><br><span class="line">      &#125;,</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;)</span><br><span class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p><a name="p6yga"></a></p>
<h2 id="计算属性-computed"><a href="#计算属性-computed" class="headerlink" title="计算属性 computed"></a>计算属性 computed</h2><p>在模板中可以直接通过插值语法显示一些 data 中的数据，但是在某些情况下，可能需要对数据进行一些转化后再显示，或者需要将多个数据结合起来进行显示，这时可以使用计算属性 computed</p>
<p><a name="jGtLa"></a></p>
<h3 id="计算属性-computed-的基本使用"><a href="#计算属性-computed-的基本使用" class="headerlink" title="计算属性 computed 的基本使用"></a>计算属性 computed 的基本使用</h3><p>比如：现在有 firstName 和 lastName 两个变量，需要显示完整的名称，可能直接使用空格将其隔开：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">h2</span>&gt;</span>&#123;&#123;firstName&#125;&#125; &#123;&#123;lastName&#125;&#125;<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>或者使用加号拼接：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">h2</span>&gt;</span>&#123;&#123;firstName + '' +lastName&#125;&#125;<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>但是如果多个地方都需要显示完整的名称，我们就需要写多个 <code>{{firstName}} {{lastName}}</code> 或 <code>{{firstName + '' +lastName}}</code> ，使代码看上去很不优雅</p>
<p>这时，可能想到，将<code>{{firstName + '' +lastName}}</code> 封装为一个函数，通过函数的方式调用，但其实最佳方案是使用计算属性：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"app"</span>&gt;</span></span><br><span class="line">  <span class="comment">&lt;!-- 方式1 --&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">h2</span>&gt;</span>&#123;&#123;firstName&#125;&#125; &#123;&#123;lastName&#125;&#125;<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br><span class="line">  <span class="comment">&lt;!-- 方式2 --&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">h2</span>&gt;</span>&#123;&#123;firstName + ' ' + lastName&#125;&#125;<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br><span class="line">  <span class="comment">&lt;!-- 方式3 --&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">h2</span>&gt;</span>&#123;&#123;getFullName()&#125;&#125;<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br><span class="line">  <span class="comment">&lt;!-- 方式4 --&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">h2</span>&gt;</span>&#123;&#123;fullName&#125;&#125;<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"../js/vue.js"</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="actionscript">  <span class="keyword">const</span> app = <span class="keyword">new</span> Vue(&#123;</span></span><br><span class="line"><span class="actionscript">    el: <span class="string">'.app'</span>,</span></span><br><span class="line">    data: &#123;</span><br><span class="line"><span class="actionscript">      firstName: <span class="string">'Yuanyang'</span>,</span></span><br><span class="line"><span class="actionscript">      lastName: <span class="string">'Liao'</span>,</span></span><br><span class="line">    &#125;,</span><br><span class="line">    computed: &#123;</span><br><span class="line">      fullName() &#123;</span><br><span class="line"><span class="actionscript">        <span class="keyword">return</span> <span class="keyword">this</span>.firstName + <span class="string">' '</span> + <span class="keyword">this</span>.lastName</span></span><br><span class="line">      &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    methods: &#123;</span><br><span class="line"><span class="actionscript">      getFullName: <span class="function"><span class="keyword">function</span><span class="params">()</span> </span>&#123;</span></span><br><span class="line"><span class="actionscript">        <span class="keyword">return</span> <span class="keyword">this</span>.firstName + <span class="string">' '</span> + <span class="keyword">this</span>.lastName</span></span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;)</span><br><span class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>计算属性中也可以进行一些更加复杂的操作，比如下面计算图书价格的例子：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"app"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">h2</span>&gt;</span>图书总价为：&#123;&#123;totalPrice&#125;&#125;<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"../js/vue.js"</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="actionscript">  <span class="keyword">const</span> app = <span class="keyword">new</span> Vue(&#123;</span></span><br><span class="line"><span class="actionscript">    el: <span class="string">'.app'</span>,</span></span><br><span class="line">    data: &#123;</span><br><span class="line">      books: [&#123;</span><br><span class="line">        id: 1001,</span><br><span class="line"><span class="actionscript">        name: <span class="string">'计算机操作原理'</span>,</span></span><br><span class="line">        price: 108</span><br><span class="line">      &#125;, &#123;</span><br><span class="line">        id: 1002,</span><br><span class="line"><span class="actionscript">        name: <span class="string">'JavaScript高级程序设计'</span>,</span></span><br><span class="line">        price: 99</span><br><span class="line">      &#125;, &#123;</span><br><span class="line">        id: 1003,</span><br><span class="line"><span class="actionscript">        name: <span class="string">'计算机网络'</span>,</span></span><br><span class="line">        price: 28</span><br><span class="line">      &#125;, &#123;</span><br><span class="line">        id: 1004,</span><br><span class="line"><span class="actionscript">        name: <span class="string">'数据结构'</span>,</span></span><br><span class="line">        price: 46</span><br><span class="line">      &#125;, &#123;</span><br><span class="line">        id: 1005,</span><br><span class="line"><span class="actionscript">        name: <span class="string">'C语言'</span>,</span></span><br><span class="line">        price: 48</span><br><span class="line">      &#125;, ]</span><br><span class="line">    &#125;,</span><br><span class="line">    computed: &#123;</span><br><span class="line"><span class="actionscript">      totalPrice: <span class="function"><span class="keyword">function</span><span class="params">()</span> </span>&#123;</span></span><br><span class="line"><span class="javascript">        <span class="keyword">let</span> result = <span class="number">0</span></span></span><br><span class="line"><span class="javascript">        <span class="keyword">for</span> (<span class="keyword">let</span> i <span class="keyword">in</span> <span class="keyword">this</span>.books) &#123;</span></span><br><span class="line"><span class="actionscript">          result += <span class="keyword">this</span>.books[i].price</span></span><br><span class="line">        &#125;</span><br><span class="line"><span class="actionscript">        <span class="keyword">return</span> result</span></span><br><span class="line">      &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;)</span><br><span class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p><a name="UhUfF"></a></p>
<h3 id="计算属性的-setter-和-getter"><a href="#计算属性的-setter-和-getter" class="headerlink" title="计算属性的 setter 和 getter"></a>计算属性的 setter 和 getter</h3><p>每个计算属性都包含一个 getter 和一个 setter，getter 用来读取值，setter 用来设置值（但 setter 不常用）</p>
<p><img src="https://cdn.nlark.com/yuque/0/2020/png/335089/1581244010629-d83eba3c-4778-4a28-875e-0b33c8bf6f8b.png#align=left&display=inline&height=367&name=%E5%9B%BE%E7%89%87.png&originHeight=734&originWidth=1401&size=96927&status=done&style=none&width=700.5" alt="图片.png"></p>
<p><a name="IjXVa"></a></p>
<h3 id="couputed-与-methods-的区别"><a href="#couputed-与-methods-的区别" class="headerlink" title="couputed 与 methods 的区别"></a>couputed 与 methods 的区别</h3><p>我们可能会考虑这样的一个问题：<br>   </p>
<ul>
<li>methods 和 computed 看起来都可以实现我们的功能，那么为什么还要多一个计算属性这个东西呢？</li>
<li>原因：计算属性会进行缓存，如果多次使用时，计算属性只会调用一次</li>
</ul>
<p><strong>computed 区别于 methods 的核心</strong></p>
<p>在官方文档中，强调了computed 区别于 methods 最重要的两点</p>
<ol>
<li>computed 是属性调用，而 methods 是函数调用</li>
<li>computed 带有缓存功能，而 methods 没有<br></li>
</ol>
<ul>
<li>computed 定义的方法，我们是以属性访问的形式调用的，<code>{{computedTest}}</code>，但是 methods 定义的方法，我们必须要加上<code>()</code>来调用，如<code>{{methodTest()}}</code></li>
<li>我们可以将同一函数定义为一个方法而不是一个计算属性，两种方式的最终结果确实是完全相同的然而，不同的是计算属性是基于它们的响应式依赖进行缓存的，只在相关响应式依赖发生改变时它们才会重新求值，这就意味着只要 text 还没有发生改变，多次访问 getText 计算属性会立即返回之前的计算结果，而不必再次执行函数，而方法只要页面中的属性发生改变就会重新执行</li>
<li>对于任何复杂逻辑，都应当使用计算属性</li>
<li>computed 依赖于 data 中的数据，只有在它的相关依赖数据发生改变时才会重新求值</li>
</ul>
<p><a name="gLM7t"></a></p>
<h2 id="事件监听-v-on"><a href="#事件监听-v-on" class="headerlink" title="事件监听 v-on"></a>事件监听 v-on</h2><p><a name="xkz7o"></a></p>
<h3 id="v-on-基本使用"><a href="#v-on-基本使用" class="headerlink" title="v-on 基本使用"></a>v-on 基本使用</h3><p>在前端开发中，我们需要经常和用户进行交互，这个时候，就必须监听用户发生的事件，比如点击、拖拽、键盘事件等，在 Vue 中监听事件使用 v-on 指令</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"app"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">h2</span>&gt;</span>&#123;&#123;counter&#125;&#125;<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br><span class="line">  <span class="comment">&lt;!-- 常规写法 --&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">button</span> <span class="attr">v-on:click</span>=<span class="string">"increment"</span>&gt;</span>+<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">  <span class="comment">&lt;!-- 语法糖形式 --&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">"decrement"</span>&gt;</span>-<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"../js/vue.js"</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="actionscript">  <span class="keyword">const</span> app = <span class="keyword">new</span> Vue(&#123;</span></span><br><span class="line"><span class="actionscript">    el: <span class="string">'.app'</span>,</span></span><br><span class="line">    data: &#123;</span><br><span class="line">      counter: 0</span><br><span class="line">    &#125;,</span><br><span class="line">    methods: &#123;</span><br><span class="line">      increment() &#123;</span><br><span class="line"><span class="actionscript">        <span class="keyword">this</span>.counter++</span></span><br><span class="line">      &#125;,</span><br><span class="line">      decrement() &#123;</span><br><span class="line"><span class="actionscript">        <span class="keyword">this</span>.counter--</span></span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;)</span><br><span class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>当通过 methods 中定义方法，以 <code>@click</code> 调用时，需要注意参数问题：</p>
<ul>
<li>如果该方法不需要额外参数，那么方法后的 () 可以不添加，但如果方法本身中有一个参数，那么会默认将原生事件 event 参数传递进去</li>
<li>如果需要同时传入某个参数，同时需要 event 时，可以通过 <code>$event</code> 传入事件</li>
</ul>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"app"</span>&gt;</span></span><br><span class="line">  <span class="comment">&lt;!-- 1.事件调用的方法没有参数：可以省略() --&gt;</span></span><br><span class="line">  <span class="comment">&lt;!-- &lt;button @click="btnClick()"&gt;按钮1&lt;/button&gt;</span></span><br><span class="line"><span class="comment">&lt;button @click="btnClick"&gt;按钮2&lt;/button&gt; --&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">&lt;!-- 2.事件调用的方法有参数 --&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">"btnClick()"</span>&gt;</span>按钮1<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">  <span class="comment">&lt;!-- undefined --&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">"btnClick(123)"</span>&gt;</span>按钮2<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">  <span class="comment">&lt;!-- 123 --&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">"btnClick"</span>&gt;</span>按钮3<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">  <span class="comment">&lt;!-- MouseEvent对象：vue会默认将浏览器产生的event对象作为参数传到方法中 --&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">&lt;!-- 3.在事件定义时，即需要event对象，又需要其他参数 --&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">"btnClick(123,$event)"</span>&gt;</span>按钮<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"../js/vue.js"</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="actionscript">  <span class="keyword">const</span> app = <span class="keyword">new</span> Vue(&#123;</span></span><br><span class="line"><span class="actionscript">    el: <span class="string">'.app'</span>,</span></span><br><span class="line">    data: &#123;</span><br><span class="line">      counter: 0</span><br><span class="line">    &#125;,</span><br><span class="line">    methods: &#123;</span><br><span class="line">      btnClick(event, num) &#123;</span><br><span class="line"><span class="javascript">        <span class="built_in">console</span>.log(event, num);</span></span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;)</span><br><span class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p><a name="FbQV2"></a></p>
<h3 id="v-on-修饰符"><a href="#v-on-修饰符" class="headerlink" title="v-on 修饰符"></a>v-on 修饰符</h3><p>在某些情况下，我们拿到 event 的目的可能是进行一些事件处理，vue 提供了修饰符来帮助我们方便的处理一些事件：</p>
<ul>
<li><code>.stop</code> ：调用 <code>event.stopPropagation()</code></li>
<li><code>.prevent</code> ：调用 <code>event.preventDefault()</code></li>
<li><code>.{keyCode | keyAlias}</code> ：只当事件是从特定键触发时才触发回调</li>
<li><code>.native</code> ：监听组件根元素的原生事件</li>
<li><code>.once</code> ：只触发一次回调</li>
</ul>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"app"</span>&gt;</span></span><br><span class="line">  <span class="comment">&lt;!-- 1 .stop:停止冒泡 --&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> @<span class="attr">click</span>=<span class="string">"divClick"</span>&gt;</span>divdiv</span><br><span class="line">    <span class="tag">&lt;<span class="name">button</span> @<span class="attr">click.stop</span>=<span class="string">"btnClick"</span>&gt;</span>按钮<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">&lt;!-- 2. .prevent:阻止默认行为 --&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">form</span> <span class="attr">action</span>=<span class="string">"baidu"</span> <span class="attr">method</span>=<span class="string">"post"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"submit"</span> <span class="attr">value</span>=<span class="string">"提交"</span> @<span class="attr">click.prevent</span>=<span class="string">"submitClick"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">&lt;!-- 3. .enter:监听enter按键 --&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"text"</span> @<span class="attr">keyup.enter</span>=<span class="string">"enterClick"</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">&lt;!-- 4. .once:点击回调只会触发一次 --&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">button</span> @<span class="attr">click.once</span>=<span class="string">"btnClick2"</span>&gt;</span>按钮2<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"../js/vue.js"</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="actionscript">  <span class="keyword">const</span> app = <span class="keyword">new</span> Vue(&#123;</span></span><br><span class="line"><span class="actionscript">    el: <span class="string">'.app'</span>,</span></span><br><span class="line">    data: &#123;</span><br><span class="line">      counter: 0</span><br><span class="line">    &#125;,</span><br><span class="line">    methods: &#123;</span><br><span class="line">      btnClick() &#123;</span><br><span class="line"><span class="javascript">        <span class="built_in">console</span>.log(<span class="string">"btnClick..."</span>)</span></span><br><span class="line">      &#125;,</span><br><span class="line">      divClick() &#123;</span><br><span class="line"><span class="javascript">        <span class="built_in">console</span>.log(<span class="string">"divClick..."</span>)</span></span><br><span class="line">      &#125;,</span><br><span class="line">      submitClick() &#123;</span><br><span class="line"><span class="javascript">        <span class="built_in">console</span>.log(<span class="string">"submitClick..."</span>)</span></span><br><span class="line">      &#125;,</span><br><span class="line">      enterClick() &#123;</span><br><span class="line"><span class="javascript">        <span class="built_in">console</span>.log(<span class="string">"enterClick..."</span>)</span></span><br><span class="line">      &#125;,</span><br><span class="line">      btnClick2() &#123;</span><br><span class="line"><span class="javascript">        <span class="built_in">console</span>.log(<span class="string">"btnClick2..."</span>)</span></span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;)</span><br><span class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p><a name="xr1JE"></a></p>
<h2 id="条件和循环"><a href="#条件和循环" class="headerlink" title="条件和循环"></a>条件和循环</h2><p><a name="eW5Fx"></a></p>
<h3 id="条件判断"><a href="#条件判断" class="headerlink" title="条件判断"></a>条件判断</h3><p>v-if、v-else-if、v-else 这三个指令与 JavaScript 的条件语句 if、else、else if 类似<br>vue 的条件指令可以根据表达式的值在 DOM 中渲染或销毁元素或组件</p>
<p><img src="https://cdn.nlark.com/yuque/0/2020/png/335089/1581498501573-0ff92aec-6366-468e-8e37-655c6f4b4b83.png#align=left&display=inline&height=169&name=%E5%9B%BE%E7%89%87.png&originHeight=247&originWidth=605&size=95559&status=done&style=none&width=414" alt="图片.png"></p>
<p>*<em>v-if *</em></p>
<p>v-if 后面的条件为 false 时，对应的元素以及其子元素不会渲染，也就是不会有对应的标签出现在 DOM 中</p>
<p><strong>v-show</strong></p>
<p>v-show 的用法和 v-if 非常相似，也用于决定一个元素是否渲染</p>
<p><strong>v-show 和 v-if 的区别</strong></p>
<ul>
<li>v-if 是真正的条件渲染，会确保在切换过程中，条件块内的事件和子组件被销毁和重建（组件被重建将会调用created）</li>
<li>v-show 不论如何，都会被渲染在 DOM 中，当条件为真值时，将会修改条件的 css 样式</li>
<li>v-if 有更高的切换开销，v-show 有更高的初始渲染开销</li>
<li>v-if 是动态的向 DOM 树内添加或者删除 DOM 元素，v-show 是通过设置 DOM 元素的 display 样式属性控制显隐</li>
<li>v-if 切换有一个局部编译/卸载的过程，切换过程中合适地销毁和重建内部的事件监听和子组件，v-show 只是简单的基于 css 切换</li>
<li>v-if 是惰性的，如果初始条件为假，则什么也不做，只有在条件第一次变为真时才开始局部编译，v-show 是在任何条件下（首次条件是否为真）都被编译，然后被缓存，而且 DOM 元素保留</li>
<li>v-if 有更高的切换消耗，v-show 有更高的初始渲染消耗</li>
<li>v-if 适合运营条件不大可能改变，v-show适合频繁切换</li>
</ul>
<p><strong>v-if 和 v-show 都可以决定一个元素是否渲染，那么开发中我们如何选择呢？</strong></p>
<p>v-if 当条件为 false 时，压根不会有对应的元素在 DOM 中<br>v-show 当条件为 false 时，仅仅是将元素的 display 属性设置为 none 而已</p>
<p>结论：</p>
<ul>
<li>当需要在显示与隐藏之间切换很频繁时，使用 v-show </li>
<li>当只有一次切换时，通过使用 v-if</li>
</ul>
<p><a name="6qjWr"></a></p>
<h3 id="案例：切换用户账号"><a href="#案例：切换用户账号" class="headerlink" title="案例：切换用户账号"></a>案例：切换用户账号</h3><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"app"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">span</span> <span class="attr">v-if</span>=<span class="string">"isUser"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">label</span> <span class="attr">for</span>=<span class="string">"username"</span>&gt;</span>用户账号<span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">id</span>=<span class="string">"username"</span> <span class="attr">placeholder</span>=<span class="string">"用户账号"</span> <span class="attr">key</span>=<span class="string">"username"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">span</span> <span class="attr">v-else</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">label</span> <span class="attr">for</span>=<span class="string">"email"</span>&gt;</span>用户邮箱<span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">id</span>=<span class="string">"email"</span> <span class="attr">placeholder</span>=<span class="string">"用户邮箱"</span> <span class="attr">key</span>=<span class="string">"email"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">"isUser = !isUser"</span>&gt;</span>切换类型<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"../js/vue.js"</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="actionscript">  <span class="keyword">const</span> app = <span class="keyword">new</span> Vue(&#123;</span></span><br><span class="line"><span class="actionscript">    el: <span class="string">'.app'</span>,</span></span><br><span class="line">    data: &#123;</span><br><span class="line"><span class="actionscript">      isUser: <span class="literal">true</span></span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;)</span><br><span class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p><a name="mf7dC"></a></p>
<h3 id="循环-v-for"><a href="#循环-v-for" class="headerlink" title="循环 v-for"></a>循环 v-for</h3><p>当我们有一组数据需要进行渲染时，我们就可以使用 v-for 来完成</p>
<p>v-for 的语法类似于 JavaScript 中的 for 循环：<code>item in items</code></p>
<p><a name="Av9v3"></a></p>
<h4 id="遍历数组"><a href="#遍历数组" class="headerlink" title="遍历数组"></a>遍历数组</h4><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"app"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">ul</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 1.遍历数组的值 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">li</span> <span class="attr">v-for</span>=<span class="string">"item in NBAStars"</span>&gt;</span>&#123;&#123;item&#125;&#125;<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 2.遍历数组的索引和值 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">li</span> <span class="attr">v-for</span>=<span class="string">"(item,index) in NBAStars"</span>&gt;</span>&#123;&#123;index+1&#125;&#125;.&#123;&#123;item&#125;&#125;<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"../js/vue.js"</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="actionscript">  <span class="keyword">const</span> app = <span class="keyword">new</span> Vue(&#123;</span></span><br><span class="line"><span class="actionscript">    el: <span class="string">'.app'</span>,</span></span><br><span class="line">    data: &#123;</span><br><span class="line"><span class="actionscript">      NBAStars: [<span class="string">'林书豪'</span>, <span class="string">'杜兰特'</span>, <span class="string">'詹姆斯'</span>, <span class="string">'欧文'</span>, <span class="string">'库里'</span>]</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;)</span><br><span class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p><a name="kZmVF"></a></p>
<h4 id="遍历对象"><a href="#遍历对象" class="headerlink" title="遍历对象"></a>遍历对象</h4><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"app"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">ul</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 1.遍历对象的值 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">li</span> <span class="attr">v-for</span>=<span class="string">"item in info"</span>&gt;</span>&#123;&#123;item&#125;&#125;<span class="tag">&lt;/<span class="name">li</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 2.遍历对象的键和值 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">li</span> <span class="attr">v-for</span>=<span class="string">"(item,key) in info"</span>&gt;</span>&#123;&#123;key&#125;&#125; : &#123;&#123;item&#125;&#125;<span class="tag">&lt;/<span class="name">li</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 3.遍历对象的索引、键和值 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">li</span> <span class="attr">v-for</span>=<span class="string">"(item,key,index) in info"</span>&gt;</span>&#123;&#123;index+1&#125;&#125;. &#123;&#123;key&#125;&#125; : &#123;&#123;item&#125;&#125;<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"../js/vue.js"</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="actionscript">  <span class="keyword">const</span> app = <span class="keyword">new</span> Vue(&#123;</span></span><br><span class="line"><span class="actionscript">    el: <span class="string">'.app'</span>,</span></span><br><span class="line">    data: &#123;</span><br><span class="line">      info: &#123;</span><br><span class="line"><span class="actionscript">        name: <span class="string">'LiaoYuanyang'</span>,</span></span><br><span class="line">        age: 18,</span><br><span class="line"><span class="actionscript">        gender: <span class="string">'男'</span>,</span></span><br><span class="line">        height: 1.75</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;)</span><br><span class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p><img src="https://cdn.nlark.com/yuque/0/2020/png/335089/1581509045500-64bf3703-0a1f-46df-bc4a-ee2ff5dda9b3.png#align=left&display=inline&height=296&name=%E5%9B%BE%E7%89%87.png&originHeight=406&originWidth=407&size=8678&status=done&style=none&width=297" alt="图片.png"><br><a name="yjLja"></a></p>
<h4 id="组件的-key-属性"><a href="#组件的-key-属性" class="headerlink" title="组件的 key 属性"></a>组件的 key 属性</h4><p>官方推荐我们在使用 v-for 时，给对应的元素或组件添加上一个 <code>:key</code> 属性</p>
<p>为什么需要这个 key 属性呢，其实和 Vue 的虚拟 DOM 的 Diff 算法有关系，这里借用 React’s diff algorithm 中的一张图来简单说明一下：</p>
<p><img src="https://cdn.nlark.com/yuque/0/2020/png/335089/1581510137325-19587fb4-19a4-48fb-b7b8-8fcae2d01258.png#align=left&display=inline&height=201&name=%E5%9B%BE%E7%89%87.png&originHeight=221&originWidth=368&size=50744&status=done&style=none&width=335" alt="图片.png"></p>
<p>当某一层有很多相同的节点时，也就是列表节点时，我们希望插入一个新的节点</p>
<p><img src="https://cdn.nlark.com/yuque/0/2020/png/335089/1581510235894-343d5441-f6cc-4e68-9e7a-8d6019039273.png#align=left&display=inline&height=95&name=%E5%9B%BE%E7%89%87.png&originHeight=169&originWidth=430&size=20032&status=done&style=none&width=241" alt="图片.png"></p>
<p>我们希望可以在 B 和 C 之间加一个 F，Diff 算法默认执行起来是这样的：<br>即把 C 更新成 F，D 更新成 C，E 更新成 D，最后再插入 E：</p>
<p><img src="https://cdn.nlark.com/yuque/0/2020/png/335089/1581510288832-57f0b41f-b3c6-4f93-b9b1-b767ec2c0f6e.png#align=left&display=inline&height=104&name=%E5%9B%BE%E7%89%87.png&originHeight=141&originWidth=410&size=27753&status=done&style=none&width=301" alt="图片.png"><br><br><br>是不是很没有效率？</p>
<p>所以我们需要使用 key 来给每个节点做一个唯一标识，Diff 算法就可以正确的识别此节点，找到正确的位置区插入新的节点，所以，key 的作用主要是为了高效的更新虚拟 DOM</p>
<p><img src="https://cdn.nlark.com/yuque/0/2020/png/335089/1581510389661-956e9c3e-7d70-4189-8a04-0d50cf98301f.png#align=left&display=inline&height=116&name=%E5%9B%BE%E7%89%87.png&originHeight=185&originWidth=661&size=66876&status=done&style=none&width=413" alt="图片.png"><br><img src="https://cdn.nlark.com/yuque/0/2020/png/335089/1581510373723-d98648d8-7b48-4b5c-838b-d100a3e21460.png#align=left&display=inline&height=93&name=%E5%9B%BE%E7%89%87.png&originHeight=185&originWidth=661&size=66876&status=done&style=none&width=330.5" alt="图片.png"></p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">li</span> <span class="attr">v-for</span>=<span class="string">"item in info"</span> <span class="attr">:key</span>=<span class="string">"item"</span>&gt;</span>&#123;&#123;item&#125;&#125;<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p><a name="vK9Vz"></a></p>
<h3 id="案例：图书购物车"><a href="#案例：图书购物车" class="headerlink" title="案例：图书购物车"></a>案例：图书购物车</h3><p><img src="https://cdn.nlark.com/yuque/0/2020/png/335089/1581574445740-7012c8ef-6ec1-4cfd-80fc-89b357b87533.png#align=left&display=inline&height=303&name=%E5%9B%BE%E7%89%87.png&originHeight=511&originWidth=1045&size=37503&status=done&style=none&width=619" alt="图片.png"><br>index.html:</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE html&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">"en"</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"UTF-8"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">"viewport"</span> <span class="attr">content</span>=<span class="string">"width=device-width, initial-scale=1.0"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Document<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">"stylesheet"</span> <span class="attr">href</span>=<span class="string">"./bootstrap-3.3.7-dist/css/bootstrap.min.css"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"jquery.min.js"</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"./bootstrap-3.3.7-dist/js/bootstrap.min.js"</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="css">        <span class="selector-class">.app</span> <span class="selector-class">.table</span>,</span></span><br><span class="line"><span class="css">        <span class="selector-class">.app</span> <span class="selector-class">.totalPrice</span> &#123;</span></span><br><span class="line">            width: 800px;</span><br><span class="line">            margin: 20px auto;</span><br><span class="line">            padding: 20px;</span><br><span class="line">        &#125;</span><br><span class="line">    <span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"app"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">v-if</span>=<span class="string">"books.length"</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">table</span> <span class="attr">class</span>=<span class="string">"table table-hover"</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">thead</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">th</span>&gt;</span><span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">th</span>&gt;</span>书籍名称<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">th</span>&gt;</span>出版日期<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">th</span>&gt;</span>书本价格<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">th</span>&gt;</span>购买数量<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">th</span>&gt;</span>操作<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">thead</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">tbody</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">tr</span> <span class="attr">v-for</span>=<span class="string">"(item,index) in books"</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">td</span>&gt;</span>&#123;&#123;item.id&#125;&#125;<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">td</span>&gt;</span>&#123;&#123;item.name&#125;&#125;<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">td</span>&gt;</span>&#123;&#123;item.date&#125;&#125;<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">                        <span class="comment">&lt;!-- &lt;td&gt;&#123;&#123;getFinallPrice(item.price)&#125;&#125;&lt;/td&gt; --&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">td</span>&gt;</span>&#123;&#123;item.price | showPrice&#125;&#125;<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">td</span>&gt;</span></span><br><span class="line">                            <span class="tag">&lt;<span class="name">button</span> <span class="attr">type</span>=<span class="string">"button"</span> <span class="attr">class</span>=<span class="string">"btn btn-default"</span> @<span class="attr">click</span>=<span class="string">"decrement(index)"</span> <span class="attr">:disabled</span>=<span class="string">"item.count &lt;=1"</span>&gt;</span>-<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">                            <span class="tag">&lt;<span class="name">label</span>&gt;</span>&#123;&#123;item.count&#125;&#125;<span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line">                            <span class="tag">&lt;<span class="name">button</span> <span class="attr">type</span>=<span class="string">"button"</span> <span class="attr">class</span>=<span class="string">"btn btn-default"</span> @<span class="attr">click</span>=<span class="string">"increment(index)"</span>&gt;</span>+<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">td</span>&gt;</span><span class="tag">&lt;<span class="name">button</span> <span class="attr">type</span>=<span class="string">"button"</span> <span class="attr">class</span>=<span class="string">"btn btn-warning"</span> @<span class="attr">click</span>=<span class="string">"removeClick(index)"</span>&gt;</span>移除<span class="tag">&lt;/<span class="name">button</span>&gt;</span><span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">tbody</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">table</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">h2</span> <span class="attr">class</span>=<span class="string">"totalPrice"</span>&gt;</span>总价格：&#123;&#123;totalPrice | showPrice&#125;&#125;<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">h2</span> <span class="attr">class</span>=<span class="string">"totalPrice"</span> <span class="attr">v-else</span>&gt;</span>购物车为空！<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"../js/vue.js"</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"main.js"</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>main.js:</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> app = <span class="keyword">new</span> Vue(&#123;</span><br><span class="line">    el: <span class="string">'.app'</span>,</span><br><span class="line">    data: &#123;</span><br><span class="line">        books: [&#123;</span><br><span class="line">            id: <span class="number">1001</span>,</span><br><span class="line">            name: <span class="string">'计算机操作原理'</span>,</span><br><span class="line">            date: <span class="string">'2020-02-12'</span>,</span><br><span class="line">            price: <span class="number">108</span>,</span><br><span class="line">            count: <span class="number">1</span></span><br><span class="line">        &#125;, &#123;</span><br><span class="line">            id: <span class="number">1002</span>,</span><br><span class="line">            name: <span class="string">'JavaScript高级程序设计'</span>,</span><br><span class="line">            date: <span class="string">'2020-02-12'</span>,</span><br><span class="line">            price: <span class="number">99</span>,</span><br><span class="line">            count: <span class="number">1</span></span><br><span class="line">        &#125;, &#123;</span><br><span class="line">            id: <span class="number">1003</span>,</span><br><span class="line">            name: <span class="string">'计算机网络'</span>,</span><br><span class="line">            date: <span class="string">'2020-02-12'</span>,</span><br><span class="line">            price: <span class="number">28</span>,</span><br><span class="line">            count: <span class="number">1</span></span><br><span class="line">        &#125;, &#123;</span><br><span class="line">            id: <span class="number">1004</span>,</span><br><span class="line">            name: <span class="string">'数据结构'</span>,</span><br><span class="line">            date: <span class="string">'2020-02-12'</span>,</span><br><span class="line">            price: <span class="number">46</span>,</span><br><span class="line">            count: <span class="number">1</span></span><br><span class="line">        &#125;, &#123;</span><br><span class="line">            id: <span class="number">1005</span>,</span><br><span class="line">            name: <span class="string">'C语言'</span>,</span><br><span class="line">            date: <span class="string">'2020-02-12'</span>,</span><br><span class="line">            price: <span class="number">48</span>,</span><br><span class="line">            count: <span class="number">1</span></span><br><span class="line">        &#125;]</span><br><span class="line">    &#125;,</span><br><span class="line">    methods: &#123;</span><br><span class="line">        <span class="comment">// 普通方法处理价格</span></span><br><span class="line">        getFinallPrice(price) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="string">'￥'</span> + price.toFixed(<span class="number">2</span>)</span><br><span class="line">        &#125;,</span><br><span class="line"></span><br><span class="line">        increment(index) &#123;</span><br><span class="line">            <span class="keyword">this</span>.books[index].count++</span><br><span class="line">        &#125;,</span><br><span class="line">        decrement(index) &#123;</span><br><span class="line">            <span class="keyword">this</span>.books[index].count--</span><br><span class="line">        &#125;,</span><br><span class="line">        removeClick(index) &#123;</span><br><span class="line">            <span class="keyword">this</span>.books.splice(index, <span class="number">1</span>)</span><br><span class="line">        &#125;,</span><br><span class="line">    &#125;,</span><br><span class="line">    computed: &#123;</span><br><span class="line">        totalPrice() &#123;</span><br><span class="line">            <span class="keyword">let</span> totalPrice = <span class="number">0</span></span><br><span class="line">                <span class="comment">// 方式一：for (let i in ...)</span></span><br><span class="line">                <span class="comment">/*  for (let i in this.books) &#123;</span></span><br><span class="line"><span class="comment">                     totalPrice += this.books[i].price * this.books[i].count</span></span><br><span class="line"><span class="comment">                 &#125; */</span></span><br><span class="line">                <span class="comment">// 方式二：for (let item of ...)</span></span><br><span class="line">                <span class="comment">/* for (let item of this.books) &#123;</span></span><br><span class="line"><span class="comment">                    totalPrice += item.price * item.count</span></span><br><span class="line"><span class="comment">                &#125; */</span></span><br><span class="line">                <span class="comment">// 方式三：高阶函数reduce：汇总数组内的元素</span></span><br><span class="line">            <span class="keyword">this</span>.books.reduce(<span class="function"><span class="keyword">function</span>(<span class="params">preValue, book</span>) </span>&#123;</span><br><span class="line">                totalPrice += book.price * book.count</span><br><span class="line">            &#125;, <span class="number">0</span>)</span><br><span class="line"></span><br><span class="line">            <span class="keyword">return</span> totalPrice</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    filters: &#123;</span><br><span class="line">        <span class="comment">// 过滤器方法处理价格</span></span><br><span class="line">        showPrice(price) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="string">'￥'</span> + price.toFixed(<span class="number">2</span>)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<p><a name="ZVmtY"></a></p>
<h2 id="表单绑定-v-model"><a href="#表单绑定-v-model" class="headerlink" title="表单绑定 v-model"></a>表单绑定 v-model</h2><p><a name="fybCp"></a></p>
<h3 id="v-model-基本使用"><a href="#v-model-基本使用" class="headerlink" title="v-model 基本使用"></a>v-model 基本使用</h3><p>表单控件在实际开发中是非常常见的，特别是对于用户信息的提交，需要大量的表单，vue 中使用 v-model 指令来实现表单元素和数据的双向绑定</p>
<p><img src="https://cdn.nlark.com/yuque/0/2020/png/335089/1581583007867-a94a8db3-af27-4022-8a71-c062a35a1383.png#align=left&display=inline&height=267&name=%E5%9B%BE%E7%89%87.png&originHeight=338&originWidth=613&size=30453&status=done&style=none&width=484" alt="图片.png"></p>
<p>案例解析：当我们在输入框输入内容时，因为 input 中的 v-model 绑定了 message，所以会实时将输入的内容传递给 message，message 发生改变，当 message 发生改变时，因为使用了 Mustache 语法，所以将 message 的值插入到 DOM 中，所以 DOM 会发生响应的改变，所以通过 v-model 实现了双向绑定</p>
<p><a name="KJlHd"></a></p>
<h3 id="v-model-原理"><a href="#v-model-原理" class="headerlink" title="v-model 原理"></a>v-model 原理</h3><p>v-model 其实是一个语法糖，它的背后本质上是包含两个操作：</p>
<ol>
<li>v-bind 绑定一个 value 属性</li>
<li>v-on 指令给当前元素绑定 input 事件</li>
</ol>
<p>也就是说：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">v-model</span>=<span class="string">"message"</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>等同于：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">:value</span>=<span class="string">"message"</span> @<span class="attr">input</span>=<span class="string">"message = $event.target.value"</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p><a name="Ab9iI"></a></p>
<h3 id="v-model-结合-radio-使用"><a href="#v-model-结合-radio-使用" class="headerlink" title="v-model 结合 radio 使用"></a>v-model 结合 radio 使用</h3><p><img src="https://cdn.nlark.com/yuque/0/2020/png/335089/1581584184596-28721871-97c8-4b9f-a141-2e564e0a878c.png#align=left&display=inline&height=79&name=%E5%9B%BE%E7%89%87.png&originHeight=108&originWidth=286&size=4540&status=done&style=none&width=209" alt="图片.png"></p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"app"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">label</span> <span class="attr">for</span>=<span class="string">"male"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"radio"</span> <span class="attr">v-model</span>=<span class="string">"gender"</span> <span class="attr">id</span>=<span class="string">"male"</span> <span class="attr">value</span>=<span class="string">"男"</span>&gt;</span>男</span><br><span class="line">  <span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">label</span> <span class="attr">for</span>=<span class="string">"female"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"radio"</span> <span class="attr">v-model</span>=<span class="string">"gender"</span> <span class="attr">id</span>=<span class="string">"female"</span> <span class="attr">value</span>=<span class="string">"女"</span>&gt;</span>女</span><br><span class="line">  <span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">h3</span>&gt;</span>您选择的性别是：&#123;&#123;gender&#125;&#125;<span class="tag">&lt;/<span class="name">h3</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"../js/vue.js"</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="actionscript">  <span class="keyword">const</span> app = <span class="keyword">new</span> Vue(&#123;</span></span><br><span class="line"><span class="actionscript">    el: <span class="string">'.app'</span>,</span></span><br><span class="line">    data: &#123;</span><br><span class="line"><span class="actionscript">      gender: <span class="string">'男'</span></span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;);</span><br><span class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p><a name="wCnaA"></a></p>
<h3 id="v-model-结合-checkbox-使用"><a href="#v-model-结合-checkbox-使用" class="headerlink" title="v-model 结合 checkbox 使用"></a>v-model 结合 checkbox 使用</h3><ul>
<li><strong>checkbox 单选框</strong></li>
</ul>
<p><img src="https://cdn.nlark.com/yuque/0/2020/png/335089/1581585614457-dc7fe57a-907b-4d68-99c8-8ce09f520097.png#align=left&display=inline&height=99&name=%E5%9B%BE%E7%89%87.png&originHeight=146&originWidth=217&size=5116&status=done&style=none&width=147" alt="图片.png"></p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"app"</span>&gt;</span></span><br><span class="line">  <span class="comment">&lt;!-- checkbox单选框 --&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">label</span> <span class="attr">for</span>=<span class="string">"licence"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"checkbox"</span> <span class="attr">v-model</span>=<span class="string">"isAgree"</span> <span class="attr">id</span>=<span class="string">"licence"</span>&gt;</span>同意协议</span><br><span class="line">  <span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">h3</span>&gt;</span>您的选择是：&#123;&#123;isAgree&#125;&#125;<span class="tag">&lt;/<span class="name">h3</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">button</span> <span class="attr">:disabled</span>=<span class="string">"!isAgree"</span>&gt;</span>下一步<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"../js/vue.js"</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="actionscript">  <span class="keyword">const</span> app = <span class="keyword">new</span> Vue(&#123;</span></span><br><span class="line"><span class="actionscript">    el: <span class="string">'.app'</span>,</span></span><br><span class="line">    data: &#123;</span><br><span class="line"><span class="actionscript">      isAgree: <span class="literal">false</span></span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;);</span><br><span class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>

<ul>
<li><strong>checkbox 多选框</strong></li>
</ul>
<p><img src="https://cdn.nlark.com/yuque/0/2020/png/335089/1581585338207-72b0ee9e-405c-4625-8179-1a3e5f35e404.png#align=left&display=inline&height=123&name=%E5%9B%BE%E7%89%87.png&originHeight=181&originWidth=335&size=9460&status=done&style=none&width=227" alt="图片.png"></p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"app"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">h3</span>&gt;</span>请选择您的爱好<span class="tag">&lt;/<span class="name">h3</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">label</span> <span class="attr">for</span>=<span class="string">"sing"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"checkbox"</span> <span class="attr">v-model</span>=<span class="string">"hobbies"</span> <span class="attr">id</span>=<span class="string">"sing"</span> <span class="attr">value</span>=<span class="string">"唱"</span>&gt;</span>唱</span><br><span class="line">  <span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">label</span> <span class="attr">for</span>=<span class="string">"jump"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"checkbox"</span> <span class="attr">v-model</span>=<span class="string">"hobbies"</span> <span class="attr">id</span>=<span class="string">"jump"</span> <span class="attr">value</span>=<span class="string">"跳"</span>&gt;</span>跳</span><br><span class="line">  <span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">label</span> <span class="attr">for</span>=<span class="string">"rap"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"checkbox"</span> <span class="attr">v-model</span>=<span class="string">"hobbies"</span> <span class="attr">id</span>=<span class="string">"rap"</span> <span class="attr">value</span>=<span class="string">"rap"</span>&gt;</span>rap</span><br><span class="line">  <span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">label</span> <span class="attr">for</span>=<span class="string">"basketball"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"checkbox"</span> <span class="attr">v-model</span>=<span class="string">"hobbies"</span> <span class="attr">id</span>=<span class="string">"basketball"</span> <span class="attr">value</span>=<span class="string">"篮球"</span>&gt;</span>篮球</span><br><span class="line">  <span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">h3</span>&gt;</span>您的爱好是：&#123;&#123;hobbies&#125;&#125;<span class="tag">&lt;/<span class="name">h3</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"../js/vue.js"</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="actionscript">  <span class="keyword">const</span> app = <span class="keyword">new</span> Vue(&#123;</span></span><br><span class="line"><span class="actionscript">    el: <span class="string">'.app'</span>,</span></span><br><span class="line">    data: &#123;</span><br><span class="line">      hobbies: []</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;);</span><br><span class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p><a name="U7KNh"></a></p>
<h3 id="v-model-结合-select-使用"><a href="#v-model-结合-select-使用" class="headerlink" title="v-model 结合 select 使用"></a>v-model 结合 select 使用</h3><p><img src="https://cdn.nlark.com/yuque/0/2020/png/335089/1581586483452-3f260448-d6b5-4745-8592-01263d40f261.png#align=left&display=inline&height=203&name=%E5%9B%BE%E7%89%87.png&originHeight=320&originWidth=394&size=14931&status=done&style=none&width=250" alt="图片.png"></p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"app"</span>&gt;</span></span><br><span class="line">  <span class="comment">&lt;!-- 选择一个值 --&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">h3</span>&gt;</span>请选择您喜欢的水果：<span class="tag">&lt;/<span class="name">h3</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">select</span> <span class="attr">name</span>=<span class="string">""</span> <span class="attr">v-model</span>=<span class="string">"fruit"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">option</span> <span class="attr">value</span>=<span class="string">"苹果"</span>&gt;</span>苹果<span class="tag">&lt;/<span class="name">option</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">option</span> <span class="attr">value</span>=<span class="string">"香蕉"</span>&gt;</span>香蕉<span class="tag">&lt;/<span class="name">option</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">option</span> <span class="attr">value</span>=<span class="string">"橘子"</span>&gt;</span>橘子<span class="tag">&lt;/<span class="name">option</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">option</span> <span class="attr">value</span>=<span class="string">"西瓜"</span>&gt;</span>西瓜<span class="tag">&lt;/<span class="name">option</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">option</span> <span class="attr">value</span>=<span class="string">"榴莲"</span>&gt;</span>榴莲<span class="tag">&lt;/<span class="name">option</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">h3</span>&gt;</span>您选择的水果是：&#123;&#123;fruit&#125;&#125;<span class="tag">&lt;/<span class="name">h3</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">&lt;!-- 选择多个值 --&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">select</span> <span class="attr">name</span>=<span class="string">""</span> <span class="attr">v-model</span>=<span class="string">"fruits"</span> <span class="attr">multiple</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">option</span> <span class="attr">value</span>=<span class="string">"苹果"</span>&gt;</span>苹果<span class="tag">&lt;/<span class="name">option</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">option</span> <span class="attr">value</span>=<span class="string">"香蕉"</span>&gt;</span>香蕉<span class="tag">&lt;/<span class="name">option</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">option</span> <span class="attr">value</span>=<span class="string">"橘子"</span>&gt;</span>橘子<span class="tag">&lt;/<span class="name">option</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">option</span> <span class="attr">value</span>=<span class="string">"西瓜"</span>&gt;</span>西瓜<span class="tag">&lt;/<span class="name">option</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">option</span> <span class="attr">value</span>=<span class="string">"榴莲"</span>&gt;</span>榴莲<span class="tag">&lt;/<span class="name">option</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">h3</span>&gt;</span>您选择的水果是：&#123;&#123;fruits&#125;&#125;<span class="tag">&lt;/<span class="name">h3</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"../js/vue.js"</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="actionscript">  <span class="keyword">const</span> app = <span class="keyword">new</span> Vue(&#123;</span></span><br><span class="line"><span class="actionscript">    el: <span class="string">'.app'</span>,</span></span><br><span class="line">    data: &#123;</span><br><span class="line"><span class="actionscript">      fruit: <span class="string">'苹果'</span>,</span></span><br><span class="line">      fruits: []</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;);</span><br><span class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p><a name="m7KX2"></a></p>
<h3 id="v-model-修饰符"><a href="#v-model-修饰符" class="headerlink" title="v-model 修饰符"></a>v-model 修饰符</h3><ul>
<li><p>lazy 修饰符</p>
<ul>
<li>默认情况下，v-model 是在 input 事件中同步输入框的数据，也就是说，一旦有数据发生改变，对应的 data 中的数据就会自动发生改变</li>
<li>lazy 修饰符可以让数据在失去焦点或者回车时才会更新</li>
</ul>
</li>
<li><p>number 修饰符</p>
<ul>
<li>默认情况下，在输入框中无论输入的是字母还是数字，都会被当做字符串类型进行处理，但是如果我们希望处理的是数字类型，那么最好直接将内容当做数字处理</li>
<li>number 修饰符可以让在输入框中输入的内容自动转成数字类型</li>
</ul>
</li>
<li><p>trim 修饰符</p>
<ul>
<li>如果输入的内容首尾有很多空格，通常我们希望将其去除</li>
<li>trim 修饰符可以过滤内容左右两边的空格</li>
</ul>
</li>
</ul>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"app"</span>&gt;</span></span><br><span class="line">  <span class="comment">&lt;!-- 1.lazy修饰符：失去焦点或按下回车才更新 --&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">v-model.lazy</span>=<span class="string">"name"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">h2</span>&gt;</span>&#123;&#123;name&#125;&#125;<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br><span class="line">  <span class="comment">&lt;!-- 2.number修饰符：将输入框中的内容自动转为number --&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"number"</span> <span class="attr">v-model.number</span>=<span class="string">"age"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">h2</span>&gt;</span>&#123;&#123;age&#125;&#125;---&#123;&#123;typeof age&#125;&#125;<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br><span class="line">  <span class="comment">&lt;!-- 3.trim修饰符：过滤内容左右两边的空格 --&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">v-model.trim</span>=<span class="string">"name"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">h2</span>&gt;</span>你输入的名字是:&#123;&#123;name&#125;&#125;<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"../js/vue.js"</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="actionscript">  <span class="keyword">const</span> app = <span class="keyword">new</span> Vue(&#123;</span></span><br><span class="line"><span class="actionscript">    el: <span class="string">'.app'</span>,</span></span><br><span class="line">    data: &#123;</span><br><span class="line"><span class="actionscript">      name: <span class="string">'YuanyangLiao'</span>,</span></span><br><span class="line">      age: 18,</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;);</span><br><span class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p><img src="https://cdn.nlark.com/yuque/0/2020/png/335089/1581594893599-ccae53a3-df09-4268-b67e-12676e8e36d5.png#align=left&display=inline&height=196&name=%E5%9B%BE%E7%89%87.png&originHeight=342&originWidth=547&size=16170&status=done&style=none&width=314" alt="图片.png"></p>
<p><a name="Spdhr"></a></p>
<h1 id="组件化开发"><a href="#组件化开发" class="headerlink" title="组件化开发"></a>组件化开发</h1><p><a name="7spIL"></a></p>
<h2 id="认识组件化"><a href="#认识组件化" class="headerlink" title="认识组件化"></a>认识组件化</h2><ul>
<li>人面对复杂问题的处理方式：任何一个人处理信息的逻辑能力都是有限的，但人有一种天生的能力，就是将问题进行拆解，如果将一个复杂的问题，拆分成很多个可以处理的小问题，再将其放在整体当中，会发现大的问题也会迎刃而解</li>
<li>组件化也是类似的思想：如果我们将一个页面中所有的处理逻辑全部放在一起，处理起来就会变得非常复杂，而且不利于后续的管理以及扩展，但如果将一个页面拆分成一个个小的功能块，每个功能块完成属于自己这部分独立的功能，那么之后整个页面的管理和维护就变得非常容易了</li>
</ul>
<p><a name="HngQu"></a></p>
<h2 id="Vue-组件化思想"><a href="#Vue-组件化思想" class="headerlink" title="Vue 组件化思想"></a>Vue 组件化思想</h2><p>组件化是 Vue.js 中的重要思想<br>，它提供了一种抽象，让我们可以开发出一个个独立可复用的小组件来构造我们的应用</p>
<p>任何的应用都会被抽象成一颗组件树：</p>
<p><img src="https://cdn.nlark.com/yuque/0/2020/png/335089/1581596463796-57b0fc8e-ffa5-4a23-8642-a93e707ca664.png#align=left&display=inline&height=133&name=%E5%9B%BE%E7%89%87.png&originHeight=217&originWidth=672&size=42104&status=done&style=none&width=412" alt="图片.png"></p>
<p>有了组件化的思想，我们在之后的开发中就要充分的利用它，尽可能的将页面拆分成一个个小的、可复用的组件，这样让我们的代码更加方便组织和管理，并且扩展性也更强</p>
<p><a name="PUAv9"></a></p>
<h2 id="注册组件"><a href="#注册组件" class="headerlink" title="注册组件"></a>注册组件</h2><p>组件的使用分成三个步骤：</p>
<ol>
<li>创建组件构造器</li>
<li>注册组件</li>
<li>使用组件</li>
</ol>
<p><img src="https://cdn.nlark.com/yuque/0/2020/png/335089/1581597914137-2c2cfb28-b998-491f-822c-72a53672f9cb.png#align=left&display=inline&height=375&name=%E5%9B%BE%E7%89%87.png&originHeight=655&originWidth=1303&size=108120&status=done&style=none&width=745" alt="图片.png"></p>
<p>注意：以上代码方式创建的组件是全局组件，即可以在多个 vue 的实例下使用，要改为局部组件，需要将注册方法写到具体的某个实例中</p>
<p><a name="OC34y"></a></p>
<h2 id="全局组件和局部组件"><a href="#全局组件和局部组件" class="headerlink" title="全局组件和局部组件"></a>全局组件和局部组件</h2><p>当我们通过调用 <code>Vue.component()</code> 注册组件时，组件的注册是全局的<br>，这意味着该组件可以在任意 Vue 实例下使用；如果我们注册的组件是挂载在某个实例中, 那么就是一个局部组件</p>
<p><img src="https://cdn.nlark.com/yuque/0/2020/png/335089/1581600197483-56477248-03ba-43d7-ae53-dd6cca81d55e.png#align=left&display=inline&height=403&name=%E5%9B%BE%E7%89%87.png&originHeight=837&originWidth=1551&size=139848&status=done&style=none&width=746" alt="图片.png"></p>
<p><a name="9v7ab"></a></p>
<h2 id="父组件和子组件"><a href="#父组件和子组件" class="headerlink" title="父组件和子组件"></a>父组件和子组件</h2><p>组件和组件之间存在层级关系，而其中一种非常重要的关系就是父子组件的关系</p>
<p><img src="https://cdn.nlark.com/yuque/0/2020/png/335089/1581601754249-4ef9d5a7-bdfc-4e2e-abe5-eee75265940f.png#align=left&display=inline&height=600&name=%E5%9B%BE%E7%89%87.png&originHeight=834&originWidth=755&size=72648&status=done&style=none&width=543" alt="图片.png"></p>
<p><a name="Gas0x"></a></p>
<h2 id="注册组件语法糖"><a href="#注册组件语法糖" class="headerlink" title="注册组件语法糖"></a>注册组件语法糖</h2><p>在上面注册组件的方式，可能会有些繁琐，Vue为了简化这个过程，提供了注册的语法糖，主要是省去了调用<code>Vue.extend()</code> 的步骤，直接使用一个对象来代替</p>
<p>语法糖注册全局组件和局部组件：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line">&lt;div <span class="class"><span class="keyword">class</span></span>=<span class="string">"app"</span>&gt;</span><br><span class="line">  &lt;my-cpn1&gt;<span class="xml"><span class="tag">&lt;/<span class="name">my-cpn1</span>&gt;</span></span></span><br><span class="line">  &lt;my-cpn2&gt;<span class="xml"><span class="tag">&lt;/<span class="name">my-cpn2</span>&gt;</span></span></span><br><span class="line">  &lt;<span class="regexp">/div&gt;</span></span><br><span class="line"><span class="regexp">  &lt;script src="../</span>js/vue.js<span class="string">"&gt;&lt;/script&gt;</span></span><br><span class="line"><span class="string">  &lt;script&gt;</span></span><br><span class="line"><span class="string">    // 1. 注册全局组件的语法糖</span></span><br><span class="line"><span class="string">    Vue.component('my-cpn1', &#123;</span></span><br><span class="line"><span class="string">    template: `</span></span><br><span class="line"><span class="string">      &lt;div&gt;</span></span><br><span class="line"><span class="string">      &lt;h2&gt;组件标题1&lt;/h2&gt;</span></span><br><span class="line"><span class="string">      &lt;p&gt;组件1中的一个段落内容&lt;/p&gt;</span></span><br><span class="line"><span class="string">      &lt;/div&gt;</span></span><br><span class="line"><span class="string">      `</span></span><br><span class="line"><span class="string">  &#125;)</span></span><br><span class="line"><span class="string">  const app = new Vue(&#123;</span></span><br><span class="line"><span class="string">    el: '.app',</span></span><br><span class="line"><span class="string">    // 2. 注册局部组件的语法糖</span></span><br><span class="line"><span class="string">    components: &#123;</span></span><br><span class="line"><span class="string">      'my-cpn2': &#123;</span></span><br><span class="line"><span class="string">        template: `</span></span><br><span class="line"><span class="string">          &lt;div&gt;</span></span><br><span class="line"><span class="string">          &lt;h2&gt;组件标题2&lt;/h2&gt;</span></span><br><span class="line"><span class="string">          &lt;p&gt;组件2中的一个段落内容&lt;/p&gt;</span></span><br><span class="line"><span class="string">          &lt;/div&gt;</span></span><br><span class="line"><span class="string">          `</span></span><br><span class="line"><span class="string">      &#125;</span></span><br><span class="line"><span class="string">    &#125;</span></span><br><span class="line"><span class="string">  &#125;)</span></span><br><span class="line"><span class="string">&lt;/script&gt;</span></span><br></pre></td></tr></table></figure>

<p><a name="fKFus"></a></p>
<h2 id="注册组件模板分离"><a href="#注册组件模板分离" class="headerlink" title="注册组件模板分离"></a>注册组件模板分离</h2><p>即使用 script 标签或 template 标签将模板内容从注册时的 template 中抽离出来</p>
<p><a name="TgQwj"></a></p>
<h3 id="使用script标签"><a href="#使用script标签" class="headerlink" title="使用script标签"></a>使用script标签</h3><p><img src="https://cdn.nlark.com/yuque/0/2020/png/335089/1581603573378-04bbcac5-9583-419c-8164-f5c5455cccba.png#align=left&display=inline&height=415&name=%E5%9B%BE%E7%89%87.png&originHeight=631&originWidth=547&size=51494&status=done&style=none&width=360" alt="图片.png"></p>
<p><a name="MGKAi"></a></p>
<h3 id="使用template标签"><a href="#使用template标签" class="headerlink" title="使用template标签"></a>使用template标签</h3><p>这种方式更为简单常用</p>
<p><img src="https://cdn.nlark.com/yuque/0/2020/png/335089/1581603812779-af0467ed-4f0b-4270-b48b-5c6efbab76e5.png#align=left&display=inline&height=452&name=%E5%9B%BE%E7%89%87.png&originHeight=631&originWidth=497&size=48040&status=done&style=none&width=356" alt="图片.png"></p>
<p><a name="FUVpf"></a></p>
<h2 id="组件数据存放"><a href="#组件数据存放" class="headerlink" title="组件数据存放"></a>组件数据存放</h2><p>组件是一个单独功能模块的封装，这个模块有属于自己的HTML模板，也应该有属性自己的数据 data，那么组件中的数据是保存在哪里呢？顶层的Vue实例中吗？</p>
<p>先来测试一下，组件中能不能直接访问 Vue 实例中的 data：</p>
<p><img src="https://cdn.nlark.com/yuque/0/2020/png/335089/1581652953233-8cd7ad3a-92a5-4b33-91ee-9f4f1876d830.png#align=left&display=inline&height=386&name=%E5%9B%BE%E7%89%87.png&originHeight=684&originWidth=782&size=76986&status=done&style=none&width=441" alt="图片.png"></p>
<p>通过以上代码发现，组件不能直接访问 Vue 实例中的 data，而且即使可以访问，如果将所有的数据都放在 Vue 实例中，Vue 实例就会变的非常臃肿</p>
<p>结论：Vue 组件应该有自己保存数据的地方</p>
<p>那么，组件自己的数据存放在哪里呢?</p>
<p>其实，组件对象也有一个 data 属性，只是这个 data 属性必须是一个函数，而且这个函数返回一个对象，对象内部保存着数据</p>
<p><img src="https://cdn.nlark.com/yuque/0/2020/png/335089/1581653405094-d3b60214-4d54-4756-a258-bcdf7a663d07.png#align=left&display=inline&height=416&name=%E5%9B%BE%E7%89%87.png&originHeight=734&originWidth=827&size=70961&status=done&style=none&width=469" alt="图片.png"></p>
<p>为什么 data 在组件中必须是一个函数呢?</p>
<ul>
<li>首先，如果不是一个函数，Vue直接就会报错</li>
<li>其次，Vue 让每个组件对象都返回一个新的对象，因为如果是同一个对象的，组件在多次使用后会相互影响</li>
</ul>
<p><img src="https://cdn.nlark.com/yuque/0/2020/png/335089/1581654274206-2ee4ad1b-7784-4ba2-85b4-d615254de59a.png#align=left&display=inline&height=453&name=%E5%9B%BE%E7%89%87.png&originHeight=906&originWidth=1498&size=108175&status=done&style=none&width=749" alt="图片.png"></p>
<p><a name="Uc9Pn"></a></p>
<h2 id="父子组件通信"><a href="#父子组件通信" class="headerlink" title="父子组件通信"></a>父子组件通信</h2><ul>
<li>父传子：props</li>
<li>子传父：自定义事件</li>
</ul>
<p><img src="https://cdn.nlark.com/yuque/0/2020/png/335089/1581665402142-1bf8a31c-af94-4229-b35e-5e08380f0693.png#align=left&display=inline&height=179&name=%E5%9B%BE%E7%89%87.png&originHeight=254&originWidth=637&size=75559&status=done&style=none&width=449" alt="图片.png"></p>
<p><a name="I5dPp"></a></p>
<h3 id="父传子-props"><a href="#父传子-props" class="headerlink" title="父传子 props"></a>父传子 props</h3><p>在组件中，使用选项 props 来声明需要从父级接收到的数据</p>
<p>props 的值有两种方式：</p>
<ol>
<li>字符串数组，数组中的字符串就是传递时的名称</li>
</ol>
<p><img src="https://cdn.nlark.com/yuque/0/2020/png/335089/1581661254542-a74a3096-df42-4584-b0db-5acf06b83619.png#align=left&display=inline&height=402&name=%E5%9B%BE%E7%89%87.png&originHeight=516&originWidth=867&size=187543&status=done&style=none&width=675" alt="图片.png"></p>
<ol start="2">
<li>对象，对象可以设置传递时的类型，也可以设置默认值和类型等</li>
</ol>
<p><img src="https://cdn.nlark.com/yuque/0/2020/png/335089/1581659881608-172704a8-5261-4f5b-883a-9748041c03e8.png#align=left&display=inline&height=467&name=%E5%9B%BE%E7%89%87.png&originHeight=827&originWidth=1202&size=66772&status=done&style=none&width=679" alt="图片.png"></p>
<p>验证支持的数据类型：</p>
<p><img src="https://cdn.nlark.com/yuque/0/2020/png/335089/1581660077748-65e96b95-c5a2-4a1c-acb4-ca6dabdea74b.png#align=left&display=inline&height=450&name=%E5%9B%BE%E7%89%87.png&originHeight=624&originWidth=521&size=171802&status=done&style=none&width=376" alt="图片.png"></p>
<p><a name="Qldfg"></a></p>
<h3 id="子传父-自定义事件"><a href="#子传父-自定义事件" class="headerlink" title="子传父 自定义事件"></a>子传父 自定义事件</h3><p>自定义事件流程：</p>
<ol>
<li>在子组件中，通过 <code>$emit()</code> 来触发事件</li>
<li>在父组件中，通过 <code>v-on</code> 来监听子组件事件</li>
</ol>
<p><img src="https://cdn.nlark.com/yuque/0/2020/png/335089/1581665170967-f4907455-d2d5-4e00-a1e7-85ef0bded639.png#align=left&display=inline&height=512&name=%E5%9B%BE%E7%89%87.png&originHeight=880&originWidth=1283&size=107156&status=done&style=none&width=746" alt="图片.png"></p>
<p><a name="ybbSB"></a></p>
<h3 id="双向绑定"><a href="#双向绑定" class="headerlink" title="双向绑定"></a>双向绑定</h3><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 父组件模板 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"app"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">cpn</span> <span class="attr">:number1</span>=<span class="string">"num1"</span> <span class="attr">:number2</span>=<span class="string">"num2"</span> @<span class="attr">num1change</span>=<span class="string">"num1change"</span> @<span class="attr">num2change</span>=<span class="string">"num2change"</span>&gt;</span><span class="tag">&lt;/<span class="name">cpn</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- 子组件模板 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">template</span> <span class="attr">id</span>=<span class="string">"cpn"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">h2</span>&gt;</span>props:&#123;&#123;number1&#125;&#125;<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">h2</span>&gt;</span>data:&#123;&#123;dnumber1&#125;&#125;<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- &lt;input type="text" v-model="dnumber1"&gt; --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">:value</span>=<span class="string">"dnumber1"</span> @<span class="attr">input</span>=<span class="string">"num1Input"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">h2</span>&gt;</span>props:&#123;&#123;number2&#125;&#125;<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">h2</span>&gt;</span>data:&#123;&#123;dnumber2&#125;&#125;<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- &lt;input type="text" v-model="dnumber2"&gt; --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">:value</span>=<span class="string">"dnumber2"</span> @<span class="attr">input</span>=<span class="string">"num2Input"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"../js/vue.js"</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="actionscript">  <span class="comment">// 父组件</span></span></span><br><span class="line"><span class="actionscript">  <span class="keyword">const</span> app = <span class="keyword">new</span> Vue(&#123;</span></span><br><span class="line"><span class="actionscript">    el: <span class="string">'.app'</span>,</span></span><br><span class="line">    data: &#123;</span><br><span class="line">      num1: 1,</span><br><span class="line">      num2: 0</span><br><span class="line">    &#125;,</span><br><span class="line">    methods: &#123;</span><br><span class="line">      num1change(value) &#123;</span><br><span class="line"><span class="javascript">        <span class="keyword">this</span>.num1 = <span class="built_in">parseFloat</span>(value)</span></span><br><span class="line">      &#125;,</span><br><span class="line">      num2change(value) &#123;</span><br><span class="line"><span class="javascript">        <span class="keyword">this</span>.num2 = <span class="built_in">parseFloat</span>(value)</span></span><br><span class="line">      &#125;</span><br><span class="line">    &#125;,</span><br><span class="line"><span class="actionscript">    <span class="comment">// 子组件</span></span></span><br><span class="line">    components: &#123;</span><br><span class="line">      cpn: &#123;</span><br><span class="line"><span class="actionscript">        template: <span class="string">'#cpn'</span>,</span></span><br><span class="line"><span class="actionscript">        <span class="comment">// props中的数据只能父组件修改，通过使用标签动态绑定</span></span></span><br><span class="line"><span class="actionscript">        props: &#123; <span class="comment">// 父传子</span></span></span><br><span class="line"><span class="javascript">          number1: <span class="built_in">Number</span>,</span></span><br><span class="line"><span class="javascript">          number2: <span class="built_in">Number</span></span></span><br><span class="line">        &#125;,</span><br><span class="line">        data() &#123;</span><br><span class="line"><span class="actionscript">          <span class="keyword">return</span> &#123;</span></span><br><span class="line"><span class="actionscript">            dnumber1: <span class="keyword">this</span>.number1,</span></span><br><span class="line"><span class="actionscript">            dnumber2: <span class="keyword">this</span>.number2,</span></span><br><span class="line">          &#125;</span><br><span class="line">        &#125;,</span><br><span class="line">        methods: &#123;</span><br><span class="line">          num1Input(event) &#123;</span><br><span class="line"><span class="actionscript">            <span class="comment">// 将input中的vlaue赋值给dnumber1</span></span></span><br><span class="line"><span class="actionscript">            <span class="keyword">this</span>.dnumber1 = event.target.value</span></span><br><span class="line"><span class="actionscript">            <span class="comment">// 发射一个事件，让父组件可以修改值（子传父）</span></span></span><br><span class="line"><span class="actionscript">            <span class="keyword">this</span>.$emit(<span class="string">'num1change'</span>, <span class="keyword">this</span>.dnumber1)</span></span><br><span class="line"><span class="actionscript">            <span class="comment">// 修改dnumber2的值</span></span></span><br><span class="line"><span class="actionscript">            <span class="keyword">this</span>.dnumber2 = <span class="keyword">this</span>.dnumber1 * <span class="number">100</span></span></span><br><span class="line"><span class="actionscript">            <span class="keyword">this</span>.$emit(<span class="string">'num2change'</span>, <span class="keyword">this</span>.dnumber2)</span></span><br><span class="line">          &#125;,</span><br><span class="line">          num2Input(event) &#123;</span><br><span class="line"><span class="actionscript">            <span class="keyword">this</span>.dnumber2 = event.target.value</span></span><br><span class="line"><span class="actionscript">            <span class="keyword">this</span>.$emit(<span class="string">'num2change'</span>, <span class="keyword">this</span>.dnumber2)</span></span><br><span class="line"><span class="actionscript">            <span class="keyword">this</span>.dnumber1 = <span class="keyword">this</span>.dnumber2 / <span class="number">100</span></span></span><br><span class="line"><span class="actionscript">            <span class="keyword">this</span>.$emit(<span class="string">'num1change'</span>, <span class="keyword">this</span>.dnumber1)</span></span><br><span class="line">          &#125;</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;)</span><br><span class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>图解关系：</p>
<p><img src="https://cdn.nlark.com/yuque/0/2020/png/335089/1581691742374-4d414cd7-c310-42ce-bb05-c83b6b6ec232.png#align=left&display=inline&height=292&name=%E5%9B%BE%E7%89%87.png&originHeight=744&originWidth=1900&size=158529&status=done&style=none&width=746" alt="图片.png"><br><a name="80O4U"></a></p>
<h2 id="父子组件访问"><a href="#父子组件访问" class="headerlink" title="父子组件访问"></a>父子组件访问</h2><p><a name="1h5vp"></a></p>
<h3 id="父组件访问子组件"><a href="#父组件访问子组件" class="headerlink" title="父组件访问子组件"></a>父组件访问子组件</h3><p>父组件访问子组件有两种方式：</p>
<ul>
<li>$children（不常用）</li>
<li>$refs（常用）</li>
</ul>
<p><a name="UiGDx"></a></p>
<h4 id="children"><a href="#children" class="headerlink" title="$children"></a>$children</h4><p><code>this.$children</code> 是一个数组类型，它包含所有子组件对象，可以通过遍历，取出所有子组件的信息</p>
<p><img src="https://cdn.nlark.com/yuque/0/2020/png/335089/1581749320074-56287243-3602-4861-9447-f83d9fa302f6.png#align=left&display=inline&height=502&name=%E5%9B%BE%E7%89%87.png&originHeight=883&originWidth=1287&size=206382&status=done&style=none&width=731" alt="图片.png"></p>
<p>$children 的缺陷：<br>通过 $children 访问子组件时，是一个数组类型，访问其中的子组件必须通过索引值，但是当子组件过多，我们需要拿到其中一个时，往往不能确定它的索引值，甚至还可能会发生变化</p>
<p>有时候，我们想明确获取其中一个特定的组件，这个时候就可以使用 $refs</p>
<p><a name="cdiX7"></a></p>
<h4 id="refs"><a href="#refs" class="headerlink" title="$refs"></a>$refs</h4><p>$refs 和 ref 指令通常是一起使用的：</p>
<ol>
<li><p>首先，我们通过 ref 给某一个子组件绑定一个特定的 ID</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">cpn</span> <span class="attr">ref</span>=<span class="string">"child1"</span>&gt;</span><span class="tag">&lt;/<span class="name">cpn</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">cpn</span> <span class="attr">ref</span>=<span class="string">"child2"</span>&gt;</span><span class="tag">&lt;/<span class="name">cpn</span>&gt;</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>其次，通过 <code>this.$refs.ID</code> 就可以访问到该组件了</p>
</li>
</ol>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">console</span>.log(<span class="keyword">this</span>.$refs.child1.name);</span><br><span class="line"><span class="built_in">console</span>.log(<span class="keyword">this</span>.$refs.child2.name);</span><br></pre></td></tr></table></figure>

<p><a name="QQqky"></a></p>
<h3 id="子组件访问父组件（不常用）"><a href="#子组件访问父组件（不常用）" class="headerlink" title="子组件访问父组件（不常用）"></a>子组件访问父组件（不常用）</h3><p>子组件访问父组件通过：$parent<br>如果是向访问根组件，通过：$root<br><img src="https://cdn.nlark.com/yuque/0/2020/png/335089/1581752277161-c34a1156-8e27-4707-8ef0-8a019cd362f1.png#align=left&display=inline&height=616&name=%E5%9B%BE%E7%89%87.png&originHeight=907&originWidth=1086&size=163191&status=done&style=none&width=737" alt="图片.png"></p>
<p>注意：</p>
<ul>
<li>尽管在 Vue 开发中，我们允许通过 $parent 来访问父组件，但是在真实开发中尽量不要这样做，因为这样耦合度太高了</li>
<li>子组件应该尽量避免直接访问父组件的数据，如果我们将子组件放在另外一个组件之内，很可能该父组件没有对应的属性，往往会引起问题</li>
<li>另外，通过 $parent 直接修改父组件的状态，那么父组件中的状态将变得飘忽不定，很不利于调试和维护</li>
<li>也不常用 $root 来访问根组件（即 vue 实例），因为根组件中一般只存放路由等重要数据，不存放其他信息</li>
</ul>
<p><a name="duMEQ"></a></p>
<h1 id="组件化高级"><a href="#组件化高级" class="headerlink" title="组件化高级"></a>组件化高级</h1><p><a name="NC8ST"></a></p>
<h2 id="插槽-slot（Vue-2-6之前用法）"><a href="#插槽-slot（Vue-2-6之前用法）" class="headerlink" title="插槽 slot（Vue 2.6之前用法）"></a>插槽 slot（Vue 2.6之前用法）</h2><p><a name="g1afR"></a></p>
<h3 id="为什么使用-slot"><a href="#为什么使用-slot" class="headerlink" title="为什么使用 slot"></a>为什么使用 slot</h3><p>slot 翻译为插槽，插槽的目的是让我们原来的设备具备更多的扩展性</p>
<p>组件的插槽，也是为了让我们封装的组件更加具有扩展性，让使用者可以决定组件内部的一些内容到底展示什么</p>
<p><a name="Z0Z3Z"></a></p>
<h3 id="slot-基本使用"><a href="#slot-基本使用" class="headerlink" title="slot 基本使用"></a>slot 基本使用</h3><p>在子组件中，使用特殊的元素 <code>&lt;slot&gt;</code> 就可以为子组件开启一个插槽，该插槽插入什么内容取决于父组件如何使用</p>
<p><img src="https://cdn.nlark.com/yuque/0/2020/png/335089/1581755392090-50402b58-faf0-4182-ab05-7b72aec65c03.png#align=left&display=inline&height=556&name=%E5%9B%BE%E7%89%87.png&originHeight=872&originWidth=868&size=106920&status=done&style=none&width=553" alt="图片.png"></p>
<p><a name="zjrrL"></a></p>
<h3 id="具名插槽-slot"><a href="#具名插槽-slot" class="headerlink" title="具名插槽 slot"></a>具名插槽 slot</h3><p>当子组件的功能复杂时，子组件的插槽可能并非是一个，比如我们封装一个导航栏的子组件，可能就需要三个插槽，分别代表左边、中间、右边</p>
<p>那么，外面在给插槽插入内容时，如何区分插入的是哪一个呢？这个时候，我们就需要给插槽起一个名字，这就是具名插槽<br>具名插槽的使用很简单，只要给 slot 元素一个 name 属性即可：<code>&lt;slot name=&#39;myslot&#39;&gt;&lt;/slot&gt;</code></p>
<p><img src="https://cdn.nlark.com/yuque/0/2020/png/335089/1581756479617-fbf9889d-2ece-4857-8314-ad5295c776a1.png#align=left&display=inline&height=433&name=%E5%9B%BE%E7%89%87.png&originHeight=634&originWidth=900&size=60046&status=done&style=none&width=615" alt="图片.png"></p>
<p><a name="hIdVK"></a></p>
<h3 id="编译作用域"><a href="#编译作用域" class="headerlink" title="编译作用域"></a>编译作用域</h3><ul>
<li>父组件模板的所有东西，都会在父级作用域内编译</li>
<li>子组件模板的所有东西，都会在子级作用域内编译</li>
</ul>
<p><img src="https://cdn.nlark.com/yuque/0/2020/png/335089/1581758268808-fc6bf027-23d7-4879-b4c0-b3c5646b644e.png#align=left&display=inline&height=530&name=%E5%9B%BE%E7%89%87.png&originHeight=856&originWidth=1110&size=132782&status=done&style=none&width=687" alt="图片.png"></p>
<p><a name="0b0ow"></a></p>
<h3 id="作用域插槽"><a href="#作用域插槽" class="headerlink" title="作用域插槽"></a>作用域插槽</h3><p>作用域插槽是 slot 一个比较难理解的点，一句话总结就是：</p>
<p>父组件替换插槽的标签，但是内容由子组件来提供</p>
<p><img src="https://cdn.nlark.com/yuque/0/2020/png/335089/1581760739134-ccf0c61c-d1f4-402f-8627-679e45b1372e.png#align=left&display=inline&height=513&name=%E5%9B%BE%E7%89%87.png&originHeight=919&originWidth=1264&size=95195&status=done&style=none&width=706" alt="图片.png"></p>
<p><a name="L6iKG"></a></p>
<h2 id="插槽slot（Vue-2-6之后用法）"><a href="#插槽slot（Vue-2-6之后用法）" class="headerlink" title="插槽slot（Vue 2.6之后用法）"></a>插槽slot（Vue 2.6之后用法）</h2><blockquote>
<p>在 2.6.0 中，我们为具名插槽和作用域插槽引入了一个新的统一的语法 (即 <code>v-slot</code> 指令)。它取代了 <code>slot</code> 和 <code>slot-scope</code> 这两个目前已被废弃但未被移除且仍在<a href="https://cn.vuejs.org/v2/guide/components-slots.html#%E5%BA%9F%E5%BC%83%E4%BA%86%E7%9A%84%E8%AF%AD%E6%B3%95" target="_blank" rel="noopener">文档中</a>的特性。新语法的由来可查阅这份 <a href="https://github.com/vuejs/rfcs/blob/master/active-rfcs/0001-new-slot-syntax.md" target="_blank" rel="noopener">RFC</a>。</p>
</blockquote>
<p>slot 有三种类型</p>
<ul>
<li>默认插槽 default</li>
<li>具名插槽 name</li>
<li>作用域插槽 v-slot</li>
</ul>
<p>在子组件中：</p>
<ul>
<li>插槽用 <code>&lt;slot&gt;</code> 标签来确定渲染的位置，里面放的是父组件没传内容时的后备内容，一个不带 name 的 <code>&lt;slot&gt;</code> 出口会带有隐含的名字 default</li>
<li>具名插槽用 name 属性来表示插槽的名字</li>
<li>作用域插槽在作用域上绑定属性来将子组件的信息传给父组件使用</li>
</ul>
<p>有时我们需要多个插槽。例如对于一个带有如下模板的 <code>&lt;base-layout&gt;</code> 组件：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"container"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">header</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 我们希望把页头放这里 --&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">header</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">main</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 我们希望把主要内容放这里 --&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">main</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">footer</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 我们希望把页脚放这里 --&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">footer</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>对于这样的情况，<code>&lt;slot&gt;</code> 元素有一个特殊的特性：<code>name</code>，这个特性可以用来定义额外的插槽：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"container"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">header</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">slot</span> <span class="attr">name</span>=<span class="string">"header"</span>&gt;</span><span class="tag">&lt;/<span class="name">slot</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">header</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">main</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">slot</span>&gt;</span><span class="tag">&lt;/<span class="name">slot</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">main</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">footer</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">slot</span> <span class="attr">name</span>=<span class="string">"footer"</span>&gt;</span><span class="tag">&lt;/<span class="name">slot</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">footer</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>一个不带 name 的 <slot> 出口会带有隐含的名字“default”。</slot></p>
<p><a name="GhAYM"></a></p>
<h3 id="v-slot"><a href="#v-slot" class="headerlink" title="v-slot"></a>v-slot</h3><ul>
<li>具名插槽通过指令参数 <code>v-slot:插槽名</code> 的形式传入，可以简化为 <code>#插槽名</code></li>
<li>作用域插槽通过 <code>v-slot:xxx=&quot;slotProps&quot;</code> 的 slotProps 来获取子组件传出的属性</li>
</ul>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">//具名插槽的缩写</span><br><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">child</span>&gt;</span></span><br><span class="line">   <span class="comment">&lt;!--默认插槽--&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">template</span> <span class="attr">v-slot</span>&gt;</span>  // v-slot:default</span><br><span class="line">     <span class="tag">&lt;<span class="name">div</span>&gt;</span>默认插槽<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line">   <span class="comment">&lt;!--具名插槽--&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">template</span> #<span class="attr">header</span>&gt;</span>  // v-slot:header</span><br><span class="line">     <span class="tag">&lt;<span class="name">div</span>&gt;</span>具名插槽<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line">   <span class="comment">&lt;!--作用域插槽--&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">template</span> #<span class="attr">footer</span>=<span class="string">"slotProps"</span>&gt;</span>  //v-slot:footer</span><br><span class="line">     <span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">      &#123;&#123;slotProps.testProps&#125;&#125;</span><br><span class="line">     <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">child</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>在向具名插槽提供内容的时候，我们可以在一个 <code>&lt;template&gt;</code> 元素上使用 <code>v-slot</code> 指令，并以 <code>v-slot</code> 的参数的形式提供其名称：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">base-layout</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">template</span> <span class="attr">v-slot:header</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">h1</span>&gt;</span>Here might be a page title<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="tag">&lt;<span class="name">p</span>&gt;</span>A paragraph for the main content.<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">p</span>&gt;</span>And another one.<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="tag">&lt;<span class="name">template</span> <span class="attr">v-slot:footer</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span>&gt;</span>Here's some contact info<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">base-layout</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>现在 <code>&lt;template&gt;</code> 元素中的所有内容都将会被传入相应的插槽。任何没有被包裹在带有 <code>v-slot</code>的 <code>&lt;template&gt;</code> 中的内容都会被视为默认插槽的内容</p>
<p>然而，如果你希望更明确一些，仍然可以在一个 <code>&lt;template&gt;</code> 中包裹默认插槽的内容：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">base-layout</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">template</span> <span class="attr">v-slot:header</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">h1</span>&gt;</span>Here might be a page title<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="tag">&lt;<span class="name">template</span> <span class="attr">v-slot:default</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span>&gt;</span>A paragraph for the main content.<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span>&gt;</span>And another one.<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="tag">&lt;<span class="name">template</span> <span class="attr">v-slot:footer</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span>&gt;</span>Here's some contact info<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">base-layout</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>任何一种写法都会渲染出：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"container"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">header</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">h1</span>&gt;</span>Here might be a page title<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">header</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">main</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span>&gt;</span>A paragraph for the main content.<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span>&gt;</span>And another one.<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">main</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">footer</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span>&gt;</span>Here's some contact info<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">footer</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>注意 <strong>v-slot 只能添加在  上</strong> (只有一种例外情况)，这一点和已经废弃的 <code>slot</code> 特性)不同。<br><a name="LhLTw"></a></p>
<h3 id="v-slot-作用域插槽"><a href="#v-slot-作用域插槽" class="headerlink" title="v-slot 作用域插槽"></a>v-slot 作用域插槽</h3><p>有时让插槽内容能够访问子组件中才有的数据是很有用的，例如，设想一个带有如下模板的 <code>&lt;current-user&gt;</code> 组件：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">span</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">slot</span>&gt;</span>&#123;&#123; user.lastName &#125;&#125;<span class="tag">&lt;/<span class="name">slot</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>我们可能想换掉备用内容，用名而非姓来显示，如下：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">current-user</span>&gt;</span></span><br><span class="line">  &#123;&#123; user.firstName &#125;&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">current-user</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>然而上述代码不会正常工作，因为只有 <code>&lt;current-user&gt;</code> 组件可以访问到 <code>user</code> 而我们提供的内容是在父级渲染的</p>
<p>为了让 <code>user</code> 在父级的插槽内容中可用，我们可以将 <code>user</code> 作为 <code>&lt;slot&gt;</code> 元素的一个特性绑定上去：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">span</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">slot</span> <span class="attr">v-bind:user</span>=<span class="string">"user"</span>&gt;</span></span><br><span class="line">    &#123;&#123; user.lastName &#125;&#125;</span><br><span class="line">  <span class="tag">&lt;/<span class="name">slot</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>绑定在 <code>&lt;slot&gt;</code> 元素上的特性被称为<strong>插槽 prop</strong>。现在在父级作用域中，我们可以使用带值的 <code>v-slot</code> 来定义我们提供的插槽 prop 的名字：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">current-user</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">template</span> <span class="attr">v-slot:default</span>=<span class="string">"slotProps"</span>&gt;</span></span><br><span class="line">    &#123;&#123; slotProps.user.firstName &#125;&#125;</span><br><span class="line">  <span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">current-user</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>在这个例子中，我们选择将包含所有插槽 prop 的对象命名为 slotProps，但你也可以使用任意你喜欢的名字</p>
<p><a name="rTpuX"></a></p>
<h3 id="独占默认插槽的缩写语法"><a href="#独占默认插槽的缩写语法" class="headerlink" title="独占默认插槽的缩写语法"></a>独占默认插槽的缩写语法</h3><p>在上述情况下，当被提供的内容只有默认插槽时，组件的标签才可以被当作插槽的模板来使用，这样我们就可以把 v-slot 直接用在组件上：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">current-user</span> <span class="attr">v-slot:default</span>=<span class="string">"slotProps"</span>&gt;</span></span><br><span class="line"> &#123;&#123; slotProps.user.firstName &#125;&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">current-user</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>这种写法还可以更简单，就像假定未指明的内容对应默认插槽一样，不带参数的 v-slot 被假定对应默认插槽：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">current-user</span> <span class="attr">v-slot</span>=<span class="string">"slotProps"</span>&gt;</span></span><br><span class="line"> &#123;&#123; slotProps.user.firstName &#125;&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">current-user</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>注意默认插槽的缩写语法不能和具名插槽混用，因为它会导致作用域不明确：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 无效，会导致警告 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">current-user</span> <span class="attr">v-slot</span>=<span class="string">"slotProps"</span>&gt;</span></span><br><span class="line"> &#123;&#123; slotProps.user.firstName &#125;&#125;</span><br><span class="line"> <span class="tag">&lt;<span class="name">template</span> <span class="attr">v-slot:other</span>=<span class="string">"otherSlotProps"</span>&gt;</span></span><br><span class="line">   slotProps is NOT available here</span><br><span class="line"> <span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">current-user</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>只要出现多个插槽，请始终为所有的插槽使用完整的基于 <template> 的语法：</template></p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">current-user</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">template</span> <span class="attr">v-slot:default</span>=<span class="string">"slotProps"</span>&gt;</span></span><br><span class="line">   &#123;&#123; slotProps.user.firstName &#125;&#125;</span><br><span class="line"> <span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">template</span> <span class="attr">v-slot:other</span>=<span class="string">"otherSlotProps"</span>&gt;</span></span><br><span class="line">   ...</span><br><span class="line"> <span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">current-user</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p><a name="l1BPm"></a></p>
<h3 id="解构插槽-Prop"><a href="#解构插槽-Prop" class="headerlink" title="解构插槽 Prop"></a>解构插槽 Prop</h3><p>作用域插槽的内部工作原理是将你的插槽内容包括在一个传入单个参数的函数里：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">function (slotProps) &#123;</span><br><span class="line"> // 插槽内容</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>这意味着 v-slot 的值实际上可以是任何能够作为函数定义中的参数的 JavaScript 表达式</p>
<p>所以在支持的环境下 (单文件组件或现代浏览器)，你也可以使用 ES2015 解构来传入具体的插槽 prop，如下：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">current-user</span> <span class="attr">v-slot</span>=<span class="string">"&#123; user &#125;"</span>&gt;</span></span><br><span class="line"> &#123;&#123; user.firstName &#125;&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">current-user</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>这样可以使模板更简洁，尤其是在该插槽提供了多个 prop 的时候。它同样开启了 prop 重命名等其它可能，例如将 user 重命名为 person：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">current-user</span> <span class="attr">v-slot</span>=<span class="string">"&#123; user: person &#125;"</span>&gt;</span></span><br><span class="line"> &#123;&#123; person.firstName &#125;&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">current-user</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>你甚至可以定义后备内容，用于插槽 prop 是 undefined 的情形：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">current-user</span> <span class="attr">v-slot</span>=<span class="string">"&#123; user = &#123; firstName: 'Guest' &#125; &#125;"</span>&gt;</span></span><br><span class="line"> &#123;&#123; user.firstName &#125;&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">current-user</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>注意：</p>
<ul>
<li>默认插槽名为default，可以省略default直接写v-slot。缩写为#时不能不写参数，写成#default（这点所有指令都一样，v-bind、v-on）</li>
<li>多个插槽混用时，v-slot不能省略default</li>
<li>只要出现多个插槽，请始终为所有的插槽使用完整的基于<template> 的语法</template></li>
</ul>
<p><a name="3hXLE"></a></p>
<h3 id="动态插槽名（-2-6-0-新增）"><a href="#动态插槽名（-2-6-0-新增）" class="headerlink" title="动态插槽名（ 2.6.0 新增）"></a>动态插槽名（ 2.6.0 新增）</h3><p>动态指令参数也可以用在 v-slot 上，来定义动态的插槽名：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">base-layout</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">template</span> <span class="attr">v-slot:</span>[<span class="attr">dynamicSlotName</span>]&gt;</span></span><br><span class="line">   ...</span><br><span class="line"> <span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">base-layout</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p><a name="yuOsm"></a></p>
<h1 id="模块化开发"><a href="#模块化开发" class="headerlink" title="模块化开发"></a>模块化开发</h1><p><a name="NHmd1"></a></p>
<h2 id="为什么需要模块化"><a href="#为什么需要模块化" class="headerlink" title="为什么需要模块化"></a>为什么需要模块化</h2><p><a name="hCQZg"></a></p>
<h3 id="JavaScript-原始功能"><a href="#JavaScript-原始功能" class="headerlink" title="JavaScript 原始功能"></a>JavaScript 原始功能</h3><p>在网页开发的早期，js 制作作为一种脚本语言，做一些简单的表单验证或动画实现等，那个时候代码很少，直接将代码写在 <code>&lt;script&gt;</code> 标签中即可：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;script&gt;</span><br><span class="line">  <span class="built_in">document</span>.getElementById(<span class="string">'button'</span>).onclick = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">  	<span class="built_in">console</span>.log(<span class="string">'按钮发生了点击'</span>);</span><br><span class="line">	&#125;</span><br><span class="line">&lt;<span class="regexp">/script&gt;</span></span><br></pre></td></tr></table></figure>

<p>随着 ajax 异步请求的出现，慢慢形成了前后端的分离，客户端需要完成的事情越来越多，代码量也是与日俱增，为了应对代码量的剧增，我们通常会将代码组织在多个js文件中，进行维护，但是这种维护方式，依然不能避免一些灾难性的问题</p>
<p>比如全局变量同名问题：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// a.js 文件中，小明定义了一个变量 flag ， 值为 true</span></span><br><span class="line">flag = <span class="literal">true</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// b.js 文件中，小红也定义了一个变量 flag ， 值为 false</span></span><br><span class="line">flag = <span class="literal">false</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// main.js 文件中，小明想通过 flag 进行一些判断，完成后续的事情</span></span><br><span class="line"><span class="keyword">if</span> (flag) &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">'小明是个画家'</span>);	<span class="comment">// 结果可能会因为flag同名的问题，而出现逻辑错误</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>另外，这种代码的编写方式对 js 文件的依赖顺序几乎是强制性的，当 js 文件过多，比如有几十个的时候，弄清楚它们的顺序是一件比较麻烦的事情，而且即使你弄清楚顺序了，也不能避免上面出现的这种尴尬问题的发生</p>
<p>这时，我们可以使用匿名函数来解决方面的重名问题</p>
<p><a name="zHPRA"></a></p>
<h3 id="匿名函数的解决方案"><a href="#匿名函数的解决方案" class="headerlink" title="匿名函数的解决方案"></a>匿名函数的解决方案</h3><p>在 a.js 文件中，我们使用匿名函数：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">  flag = <span class="literal">true</span></span><br><span class="line">&#125;)()</span><br></pre></td></tr></table></figure>

<p>使用匿名函数虽然解决了重名问题，但是如果我们希望在 main.js 文件中，用到 flag，应该如何处理呢？<br>显然，另外一个文件中不方便使用，因为 flag 是一个局部变量</p>
<p>这时，我们可以将需要暴露到外面的变量，使用一个模块作为出口</p>
<p><a name="4hj3m"></a></p>
<h3 id="使用模块作为出口"><a href="#使用模块作为出口" class="headerlink" title="使用模块作为出口"></a>使用模块作为出口</h3><p>来看下对应的代码：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 使用模块作为出口</span></span><br><span class="line"><span class="keyword">var</span> ModuleA = (<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">  <span class="comment">// 1. 定义一个对象</span></span><br><span class="line">  <span class="keyword">var</span> obj = &#123;&#125;</span><br><span class="line">  <span class="comment">// 2. 在对象内部添加变量和方法</span></span><br><span class="line">  obj.flag = <span class="literal">true</span></span><br><span class="line">  obj.myFunc = <span class="function"><span class="keyword">function</span>(<span class="params">info</span>)</span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(info);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">// 3. 将对象返回</span></span><br><span class="line">  <span class="keyword">return</span> obj</span><br><span class="line">&#125;)()</span><br></pre></td></tr></table></figure>

<p>以上代码在匿名函数内部，定义一个对象，给对象添加各种需要暴露到外面的属性和方法（不需要暴露的直接定义即可），最后将这个对象返回，并且在外面使用了一个 MoudleA 接受。</p>
<p>接下来，在 main.js 中使用只需要使用属于自己模块的属性和方法即可：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 使用模块</span></span><br><span class="line"><span class="keyword">if</span>(ModuleA.flag)&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">'小明是个画家'</span>);</span><br><span class="line">&#125;</span><br><span class="line">ModuleA.myFunc(<span class="string">'小明是个画家'</span>)</span><br><span class="line"><span class="built_in">console</span>.log(ModuleA);</span><br></pre></td></tr></table></figure>

<p>这就是模块最基础的封装，事实上模块的封装还有很多高级的话题，幸运的是，前端模块化开发已经有了很多既有的规范，以及对应的实现方案</p>
<p>常见的模块化规范：</p>
<ul>
<li>CommonJS</li>
<li>AMD</li>
<li>CMD</li>
<li>ES6 Modules</li>
</ul>
<p><a name="Pyn3d"></a></p>
<h3 id="CommonJS（了解）"><a href="#CommonJS（了解）" class="headerlink" title="CommonJS（了解）"></a>CommonJS（了解）</h3><p>模块化有两个核心：导出和导入</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// CommonJS 导出</span></span><br><span class="line"><span class="comment">// 在a.js中：</span></span><br><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">  flag: <span class="literal">true</span>,</span><br><span class="line">  sum(a, b) &#123;</span><br><span class="line">    <span class="keyword">return</span> a + b</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// CommonJS 导入</span></span><br><span class="line"><span class="comment">// 在main.js中：</span></span><br><span class="line"><span class="keyword">let</span> &#123;flag,sum&#125; = <span class="built_in">require</span>(<span class="string">'a.js'</span>)</span><br></pre></td></tr></table></figure>

<p><a name="OKpcP"></a></p>
<h3 id="ES6-的-export-和-import"><a href="#ES6-的-export-和-import" class="headerlink" title="ES6 的 export 和 import"></a>ES6 的 export 和 import</h3><p>*<em>export 基本使用 *</em><br>export 指令用于导出变量，比如下面的代码：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// info.js</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">let</span> name = <span class="string">'lyy'</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">let</span> age = <span class="string">'18'</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">let</span> height = <span class="string">'1.75'</span></span><br></pre></td></tr></table></figure>

<p>上面的代码还有另外一种写法：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// info.js</span></span><br><span class="line"><span class="keyword">let</span> name = <span class="string">'lyy'</span></span><br><span class="line"><span class="keyword">let</span> age = <span class="string">'18'</span></span><br><span class="line"><span class="keyword">let</span> height = <span class="string">'1.75'</span></span><br><span class="line"><span class="keyword">export</span> &#123;name, age, height&#125;</span><br></pre></td></tr></table></figure>

<p><strong>导出函数或类</strong><br>上面我们主要是输出变量，也可以输出函数或者输出类<br>上面的代码也可以写成这种形式：</p>
<p><img src="https://cdn.nlark.com/yuque/0/2020/png/335089/1581770190727-477bf837-898e-4ba4-9670-0b6d32b3b8f6.png#align=left&display=inline&height=258&name=%E5%9B%BE%E7%89%87.png&originHeight=447&originWidth=1203&size=133559&status=done&style=none&width=694" alt="图片.png"></p>
<p><strong>export default</strong><br>某些情况下，一个模块中包含某个的功能，我们并不希望给这个功能命名，而且让导入者可以自己来命名<br>这个时候就可以使用 export default</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// info.js</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">	conse.log(<span class="string">'default function'</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>来到 main.js 中，这样使用就可以了:</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> myFunc <span class="keyword">from</span> <span class="string">'./info.js'</span></span><br><span class="line">myFunc()</span><br></pre></td></tr></table></figure>

<p>这里的 myFunc 是自己命名的，可以根据需要命名它对应的名字</p>
<p>另外，需要注意：<br>export default 在同一个模块中，不允许同时存在多个</p>
<p><strong>import使用</strong></p>
<p>我们使用 export 指令导出了模块对外提供的接口，就可以通过 import 命令来加载对应的这个模块了</p>
<p>首先，需要在HTML代码中引入两个 js 文件，并且类型需要设置为 module：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&lt;script src=<span class="string">"info.js"</span> type=<span class="string">"module"</span>&gt;<span class="xml"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br><span class="line">&lt;script src=<span class="string">"main.js"</span> type=<span class="string">"module"</span>&gt;<span class="xml"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br></pre></td></tr></table></figure>

<p>import 指令用于导入模块中的内容，比如 main.js 的代码：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123;name,age,height&#125; <span class="keyword">from</span> <span class="string">"./info.js"</span></span><br></pre></td></tr></table></figure>

<p>如果我们希望某个模块中所有的信息都导入，一个个导入显然有些麻烦，则可以导入模块中所有的 export 变量，但是通常情况下我们需要给起一个别名，方便后续的使用</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> * <span class="keyword">as</span> info <span class="keyword">from</span> <span class="string">"./info.js"</span></span><br><span class="line"><span class="built_in">console</span>.log(info.name,info.age,info.height)</span><br></pre></td></tr></table></figure>

<p><a name="mk86X"></a></p>
<h2 id="webpack"><a href="#webpack" class="headerlink" title="webpack"></a>webpack</h2><p><a name="Rqpkx"></a></p>
<h3 id="认识-webpack"><a href="#认识-webpack" class="headerlink" title="认识 webpack"></a>认识 webpack</h3><p>什么是Webpack？官方的解释：</p>
<blockquote>
<p>At its core, webpack is a static module bundler for modern JavaScript applications.<br>从本质上来讲，webpack是一个现代的JavaScript应用的静态模块打包工具。</p>
</blockquote>
<p><img src="https://cdn.nlark.com/yuque/0/2020/png/335089/1581831574563-cb167962-1cb5-4117-8801-6643712fa8f5.png#align=left&display=inline&height=296&name=%E5%9B%BE%E7%89%87.png&originHeight=591&originWidth=1384&size=50030&status=done&style=none&width=692" alt="图片.png"></p>
<p>从两个关键词模块和打包来理解 webpack<br></p>
<p><strong>前端模块化</strong></p>
<p>前面已经解释了为什么前端需要模块化，也提到了目前使用前端模块化的一些方案：AMD、CMD、CommonJS、ES6</p>
<p>在ES6之前，我们要想进行模块化开发，就必须借助于其他的工具，让我们可以进行模块化开发，并且在通过模块化开发完成了项目后，还需要处理模块间的各种依赖，并且将其进行整合打包，而 webpack 其中一个核心就是让我们可能进行模块化开发，并且会帮助我们处理模块间的依赖关系，而且不仅仅是 JavaScript 文件，我们的 CSS、图片、json 文件等，在 webpack 中都可以被当做模块来使用，这就是 webpack 中模块化的概念</p>
<p><strong>打包</strong></p>
<p>webpack 可以帮助我们进行模块化和处理模块间的各种复杂关系，而打包则是将 webpack 中的各种资源模块进行打包合并成一个或多个包(Bundle)，并且在打包的过程中，还可以对资源进行处理，比如压缩图片，将 scss 转成 css，将 ES6 语法转成 ES5 语法，将 TypeScript 转成 JavaScript 等操作</p>
<p>但是打包的操作似乎 grunt/gulp 也可以帮助我们完成，它们有什么不同呢？</p>
<p><strong>webpack 和 grunt/gulp 对比</strong></p>
<p>grunt/gulp 的核心是 Task：我们可以配置一系列的 task，并且定义 task 要处理的事务（例如 ES6、ts 转化，图片压缩，scss 转成 css），之后让 grunt/gulp 来依次执行这些 task，而且让整个流程自动化，所以 grunt/gulp 也被称为前端自动化任务管理工具</p>
<p>来看一个 gulp 的 task，下面的 task 就是将 src 下面的所有 js 文件转成 ES5 的语法，并且最终输出到 dist 文件夹中：</p>
<p><img src="https://cdn.nlark.com/yuque/0/2020/png/335089/1581773144033-a4d349d9-a28f-4eff-9aa0-a4a0e067cb3e.png#align=left&display=inline&height=203&name=%E5%9B%BE%E7%89%87.png&originHeight=328&originWidth=575&size=78997&status=done&style=none&width=355" alt="图片.png"></p>
<p><strong>什么时候用 grunt/gulp<br></strong></p>
<ul>
<li>如果你的工程模块依赖非常简单，甚至是没有用到模块化的概念，只需要进行简单的合并、压缩，就使用 grunt/gulp 即可</li>
<li>但是如果整个项目使用了模块化管理，而且相互依赖非常强，就可以使用更加强大的 webpack</li>
</ul>
<p><strong>grunt/gulp 和 webpack 有什么不同</strong></p>
<ul>
<li>grunt/gulp：更加强调前端流程的自动化，模块化不是它的核心</li>
<li>webpack：更加强调模块化开发管理，而文件压缩合并、预处理等功能，是他附带的功能</li>
</ul>
<p><a name="5CIfV"></a></p>
<h3 id="webpack-的安装"><a href="#webpack-的安装" class="headerlink" title="webpack 的安装"></a>webpack 的安装</h3><p>安装 webpack 首先需要安装 Node.js，Node.js 自带了软件包管理工具 npm<br>查看自己的 node 版本：<code>node -v&lt;br /&gt;</code></p>
<p><strong>全局安装 webpack</strong></p>
<ul>
<li>先指定版本号3.6.0，因为vue cli2依赖该版本</li>
<li>-g：global，全局<br></li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm i webpack@<span class="number">3.6</span><span class="number">.0</span> -g</span><br></pre></td></tr></table></figure>

<p><strong>局部安装webpack</strong></p>
<ul>
<li><code>–save-dev</code> 是开发时依赖，项目打包后不需要继续使用的</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm i webpack@<span class="number">3.6</span><span class="number">.0</span> -save-dev</span><br></pre></td></tr></table></figure>

<p><strong>为什么全局安装后，还需要局部安装</strong></p>
<ul>
<li>在终端直接执行 webpack 命令，使用的全局安装的 webpack</li>
<li>当在 package.json 中定义了 scripts 时，其中包含了 webpack 命令，那么使用的是局部 webpack</li>
</ul>
<p><a name="D2DUZ"></a></p>
<h3 id="webpack-的起步"><a href="#webpack-的起步" class="headerlink" title="webpack 的起步"></a>webpack 的起步</h3><p><strong>准备工作</strong></p>
<p>创建如下文件和文件夹：</p>
<p><img src="https://cdn.nlark.com/yuque/0/2020/png/335089/1581829529620-c5dbcc97-c15c-49c7-8aed-0095fcd8add0.png#align=left&display=inline&height=166&name=%E5%9B%BE%E7%89%87.png&originHeight=231&originWidth=316&size=9310&status=done&style=none&width=227" alt="图片.png"></p>
<p>文件和文件夹解析：</p>
<ul>
<li>dist文件夹：用于存放之后打包的文件</li>
<li>src文件夹：用于存放我们写的源文件</li>
<li>main.js：项目的入口文件</li>
<li>mathUtils.js：定义了一些数学工具函数，可以在其他地方引用</li>
<li>index.html：浏览器打开展示的首页html</li>
<li>package.json：npm 包管理的文件，通过 <code>npm init</code> 生成</li>
</ul>
<p>mathUtils.js 文件中的代码：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">add</span>(<span class="params">num1, num2</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> num1 + num2</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">mul</span>(<span class="params">num1, num2</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> num1 * num2</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 使用 CommonJS 规范导出</span></span><br><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">    add,</span><br><span class="line">    mul</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>main.js 文件中的代码：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 使用 CommonJS 规范导入</span></span><br><span class="line"><span class="keyword">const</span> math = <span class="built_in">require</span>(<span class="string">'./mathUtils'</span>)</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(math.add(<span class="number">10</span>, <span class="number">20</span>));</span><br><span class="line"><span class="built_in">console</span>.log(math.mul(<span class="number">10</span>, <span class="number">20</span>));</span><br></pre></td></tr></table></figure>

<p><strong>js 文件的打包</strong></p>
<p>现在的 js 文件中使用了模块化的方式进行开发，不能直接使用，原因是：</p>
<ul>
<li>如果直接在 index.html 引入这两个 js 文件，浏览器并不识别其中的模块化代码</li>
<li>另外，在真实项目中当有许多这样的 js 文件时，一个个引用非常麻烦，并且后期非常不方便对它们进行管理</li>
</ul>
<p>这时，可以使用 webpack 工具，对多个 js 文件进行打包：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">webpack src/main.js dist/bundle.js</span><br></pre></td></tr></table></figure>

<p><strong>使用打包后的文件</strong><br>打包后会在 dist 文件下，生成一个 bundle.js 文件<br>，是 webpack 处理了项目直接文件依赖后生成的一个 js 文件，只需要将这个 js 文件在 index.html 中引入即可</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;script src=<span class="string">"dist/bundle.js"</span>&gt;<span class="xml"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br></pre></td></tr></table></figure>

<p><img src="https://cdn.nlark.com/yuque/0/2020/png/335089/1581776398492-1777630a-98ea-4728-bda6-9f0e5f602c3e.png#align=left&display=inline&height=134&name=%E5%9B%BE%E7%89%87.png&originHeight=202&originWidth=440&size=5537&status=done&style=none&width=292" alt="图片.png"><br><a name="kWWsP"></a></p>
<h3 id="webpack-的配置"><a href="#webpack-的配置" class="headerlink" title="webpack 的配置"></a>webpack 的配置</h3><p><strong>入口和出口</strong><br>上面使用 webpack 对多个 js 文件进行打包的命令是：<code>webpack src/main.js dist/bundle.js</code>，其中“src/main.js”是出口，“dist/bundle.js”是入口</p>
<p>试想，如果每次使用 webpack 的命令都需要写上入口和出口作为参数，显得非常麻烦，有没有一种方法可以将这两个参数写到配置中，在运行时，直接读取呢？</p>
<p>这时，我们可以创建一个 webpack.config.js 文件：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> path = <span class="built_in">require</span>(<span class="string">'path'</span>)</span><br><span class="line"></span><br><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">    <span class="comment">// 入口：可以是字符串/数组/对象</span></span><br><span class="line">    entry: <span class="string">'./src/main.js'</span>,</span><br><span class="line">    <span class="comment">// 出口：通常是一个对象，里面至少包含两个重要的属性：path和filename</span></span><br><span class="line">    output: &#123;</span><br><span class="line">        path: path.join(__dirname, <span class="string">'dist'</span>), <span class="comment">// path通常是一个绝对路径</span></span><br><span class="line">        filename: <span class="string">'bundle.js'</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>配置完后，可以通过执行简单的命令：<code>webpack</code> 来对多个 js 文件进行打包了</p>
<p>但此时，我们使用的 webpack 是全局的 webpack（只要是在终端直接执行 <code>webpack</code> 命令执行的都是全局的 webpack），而一个项目往往依赖特定的 webpack 版本，全局的版本可能很这个项目的 webpack 版本不一致，导出打包出现问题，所以通常一个项目，都安装有自己局部的 webpack</p>
<p><strong>安装局部 webpack</strong></p>
<p>为了能够使用局部的 webpack，我们需要先安装局部 webpack：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm i webpack@<span class="number">3.6</span><span class="number">.0</span> -save-dev</span><br></pre></td></tr></table></figure>

<p>安装之后，通过命令：<code>node_modules/.bin/webpack</code> 来启动 webpack 进行打包</p>
<p>但是，每次执行用这么长的命令，感觉很不方便，我们可以在 package.json 的 scripts 中定义自己的执行脚本，来简化命令</p>
<p><strong>package.json 中定义启动</strong><br>package.json 中的 scripts 的脚本在执行时，会按照一定的顺序寻找命令对应的位置：</p>
<ul>
<li>首先，会寻找本地的 node_modules/.bin 路径中对应的命令</li>
<li>如果没有找到，会去全局的环境变量中寻找</li>
</ul>
<p><strong><img src="https://cdn.nlark.com/yuque/0/2020/png/335089/1581830765707-7ff70107-81d7-4cd4-b0d8-5c72a4be87ab.png#align=left&display=inline&height=237&name=%E5%9B%BE%E7%89%87.png&originHeight=424&originWidth=749&size=27460&status=done&style=none&width=418" alt="图片.png"></strong></p>
<p>配置完成以后，只需要执行 <code>npm run build</code> 命令即可调用 webpack 进行打包<br></p>
<p><a name="hKmdf"></a></p>
<h3 id="loader-的使用"><a href="#loader-的使用" class="headerlink" title="loader 的使用"></a>loader 的使用</h3><p>在之前的实例中，主要是用 webpack 来处理 js 代码，并且 webpack 会自动处理 js 之间相关的依赖</p>
<p>但在开发中往往不仅仅有基本的 js 代码处理，也需要加载 css、图片，也包括一些高级的将 ES6、TypeScript 转成 ES5 代码，将scss、less 转成 css，将 .jsx、.vue 文件转成 js 文件等</p>
<p>对于webpack本身的能力来说，对于这些转化是不支持的，我们需要给 webpack 扩展对应的 loader</p>
<p>loader 是 webpack 中一个非常核心的概念，webpack 可以使用 <a href="https://www.webpackjs.com/concepts/loaders" target="_blank" rel="noopener">loader</a> 来预处理文件</p>
<p><a name="e9Yt4"></a></p>
<h4 id="css-loader"><a href="#css-loader" class="headerlink" title="css-loader"></a>css-loader</h4><p><a href="https://www.webpackjs.com/loaders/#%E6%A0%B7%E5%BC%8F" target="_blank" rel="noopener"><strong>loader 使用过程</strong></a></p>
<ol>
<li>通过 npm 安装需要使用的 loader</li>
</ol>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install style-loader css-loader --save-dev</span><br></pre></td></tr></table></figure>

<ul>
<li><a href="https://www.webpackjs.com/loaders/style-loader" target="_blank" rel="noopener"><code>style-loader</code></a> 将模块的导出作为样式添加到 DOM 中</li>
<li><a href="https://www.webpackjs.com/loaders/css-loader" target="_blank" rel="noopener"><code>css-loader</code></a> 解析 CSS 文件后，使用 import 加载，并且返回 CSS 代码</li>
</ul>
<ol start="2">
<li>在 webpack.config.js 中的 module关键字下进行配置</li>
</ol>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">  <span class="built_in">module</span>: &#123;</span><br><span class="line">    rules: [</span><br><span class="line">      &#123;</span><br><span class="line">        test: <span class="regexp">/\.css$/</span>,</span><br><span class="line">        <span class="comment">// webpack 在读取使用的loader的过程中，是按照从右向左的顺序读取的，所以顺序不能颠倒</span></span><br><span class="line">        use: [ <span class="string">'style-loader'</span>, <span class="string">'css-loader'</span> ]</span><br><span class="line">      &#125;</span><br><span class="line">    ]</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>*<em>css 文件处理 *</em><br>项目开发过程中，我们必然需要添加很多的样式，而样式我们往往写到一个单独的文件中</p>
<ul>
<li>重新组织文件的目录结构，将零散的 js 文件放在一个 js 文件夹中，此时引用 mathUtils.js 的文件路径也需修改：<br></li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> math = <span class="built_in">require</span>(<span class="string">'./js/mathUtils'</span>)</span><br></pre></td></tr></table></figure>

<ul>
<li>在 src 目录中，创建一个 css 文件，其中创建一个 normal.css 文件</li>
</ul>
<p><img src="https://cdn.nlark.com/yuque/0/2020/png/335089/1581833075673-18645519-5f0c-45f7-8d30-215e3aa73fd2.png#align=left&display=inline&height=305&name=%E5%9B%BE%E7%89%87.png&originHeight=445&originWidth=260&size=39433&status=done&style=none&width=178" alt="图片.png"></p>
<ul>
<li>在 normal.css 中，将 body 设置为 red：</li>
</ul>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">body</span> &#123;</span><br><span class="line">    <span class="attribute">background-color</span>: red;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>这时，normal.css 中的样式是不会生效的，因为我们还没有引用它，所以 webpack 不能找到该文件</p>
<p>在入口文件 main.js 中引用 css 文件：</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">// 引用 css 文件</span><br><span class="line">require('./css/normal.css')</span><br></pre></td></tr></table></figure>

<p>配置完成以后，可以使用 <code>npm run build</code> 命令将 css 文件代码也一并打包到 bundle.js 文件中了，此时，css 中的代码会生效：<br></p>
<p><img src="https://cdn.nlark.com/yuque/0/2020/png/335089/1581835550206-c52ff376-cb09-4d33-ab03-8b265f145264.png#align=left&display=inline&height=234&name=%E5%9B%BE%E7%89%87.png&originHeight=468&originWidth=693&size=9159&status=done&style=none&width=346.5" alt="图片.png"></p>
<p><a name="zkXSY"></a></p>
<h4 id="less-loader"><a href="#less-loader" class="headerlink" title="less-loader"></a>less-loader</h4><p><a href="https://www.webpackjs.com/loaders/less-loader" target="_blank" rel="noopener"><code>less-loader</code></a> 加载和转译 LESS 文件</p>
<ol>
<li>安装<br></li>
</ol>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install --save-dev less-loader less</span><br></pre></td></tr></table></figure>

<ol start="2">
<li>在 css 文件夹中新建 less 文件 special.less：</li>
</ol>
<figure class="highlight less"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">@fontSize:</span><span class="number">50px</span>;</span><br><span class="line"><span class="variable">@fontColor:</span>orange;</span><br><span class="line"></span><br><span class="line"><span class="selector-tag">body</span>&#123;</span><br><span class="line">  <span class="attribute">color</span>: <span class="variable">@fontColor</span>;</span><br><span class="line">  <span class="attribute">font-size</span>: <span class="variable">@fontSize</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ol start="3">
<li>配置 less 文件</li>
</ol>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">    ...</span><br><span class="line">    <span class="built_in">module</span>: &#123;</span><br><span class="line">        rules: [&#123;</span><br><span class="line">            test: <span class="regexp">/\.less$/</span>,</span><br><span class="line">            use: [&#123;</span><br><span class="line">                loader: <span class="string">"style-loader"</span> <span class="comment">// creates style nodes from JS strings</span></span><br><span class="line">            &#125;, &#123;</span><br><span class="line">                loader: <span class="string">"css-loader"</span> <span class="comment">// translates CSS into CommonJS</span></span><br><span class="line">            &#125;, &#123;</span><br><span class="line">                loader: <span class="string">"less-loader"</span> <span class="comment">// compiles Less to CSS</span></span><br><span class="line">            &#125;]</span><br><span class="line">        &#125;]</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<p><img src="https://cdn.nlark.com/yuque/0/2020/png/335089/1581835991861-74e7b847-4954-4bbd-8e2d-306336600f1b.png#align=left&display=inline&height=257&name=%E5%9B%BE%E7%89%87.png&originHeight=514&originWidth=1046&size=46035&status=done&style=none&width=523" alt="图片.png"></p>
<ol start="4">
<li>在 main.js 中引入 less 文件</li>
</ol>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 引用 less 文件</span></span><br><span class="line"><span class="built_in">require</span>(<span class="string">'./css/special.less'</span>)</span><br><span class="line"><span class="comment">// 为了查看 less 生效的代码，添加一些文字</span></span><br><span class="line"><span class="built_in">document</span>.writeln(<span class="string">'&lt;h2&gt;你好哇，廖远洋！&lt;/h2&gt;'</span>)</span><br></pre></td></tr></table></figure>

<p>使用 <code>npm run build</code> 重新打包后，查看效果：</p>
<p><img src="https://cdn.nlark.com/yuque/0/2020/png/335089/1581836281997-5ec3d2b6-6d5a-452a-bac2-72acd31c7c37.png#align=left&display=inline&height=234&name=%E5%9B%BE%E7%89%87.png&originHeight=450&originWidth=749&size=20557&status=done&style=none&width=389" alt="图片.png"></p>
<p><a name="ZCXGr"></a></p>
<h4 id="url-loader-和-file-loader"><a href="#url-loader-和-file-loader" class="headerlink" title="url-loader 和 file-loader"></a>url-loader 和 file-loader</h4><ol>
<li>资源准备</li>
</ol>
<p>在 src 文件夹下新建 img 文件夹，加入两张图片：</p>
<ul>
<li>一张较小的图片 test01.jpg (小于8kb)</li>
<li>一张较大的图片 test02.jpg (大于8kb)</li>
</ul>
<p><img src="https://cdn.nlark.com/yuque/0/2020/png/335089/1581839250562-a01c4f95-7026-4115-92a8-f841d9355810.png#align=left&display=inline&height=385&name=%E5%9B%BE%E7%89%87.png&originHeight=584&originWidth=285&size=24501&status=done&style=none&width=188" alt="图片.png"></p>
<ol start="2">
<li>在 css 样式中引用图片，修改 normal.css 中的样式：</li>
</ol>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">body</span> &#123;</span><br><span class="line">    <span class="comment">/* background-color: red; */</span></span><br><span class="line">    <span class="attribute">background-color</span>: <span class="built_in">url</span>(../img/test01.jpg);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ol start="3">
<li>安装配置 url-loader</li>
</ol>
<p><a href="https://www.webpackjs.com/loaders/url-loader" target="_blank" rel="noopener"><code>url-loader</code></a> 像 file loader 一样工作，但如果文件小于限制，可以返回 <a href="https://tools.ietf.org/html/rfc2397" target="_blank" rel="noopener">data URL</a></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install --save-dev url-loader</span><br></pre></td></tr></table></figure>

<ol start="4">
<li>修改 webpack.config.js 配置文件，配置 url-loader<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  test: <span class="regexp">/\.(png|jpg|gif)$/</span>,</span><br><span class="line">  use: [&#123;</span><br><span class="line">    loader: <span class="string">'url-loader'</span>,</span><br><span class="line">    options: &#123;</span><br><span class="line">    limit: <span class="number">8192</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

</li>
</ol>
<p>再次打包，运行 index.html，就会发现背景图片渲染了出来：</p>
<p><img src="https://cdn.nlark.com/yuque/0/2020/png/335089/1581839857458-7dc27a8e-1ff3-4cdf-af8b-bdbd5c501ed4.png#align=left&display=inline&height=289&name=%E5%9B%BE%E7%89%87.png&originHeight=577&originWidth=788&size=67788&status=done&style=none&width=394" alt="图片.png"></p>
<p>而且，此时背景图是通过 base64 显示出来的：</p>
<p><img src="https://cdn.nlark.com/yuque/0/2020/png/335089/1581840007419-edff6aa8-7213-4a0c-b406-5ffd455e7962.png#align=left&display=inline&height=372&name=%E5%9B%BE%E7%89%87.png&originHeight=743&originWidth=1708&size=110969&status=done&style=none&width=854" alt="图片.png"></p>
<p>其实，这是 limit 属性的作用，当图片小于 8kb 时，对图片进行 base64 编码</p>
<p><img src="https://cdn.nlark.com/yuque/0/2020/png/335089/1581840103168-7662d97e-3cfa-440c-bbdb-7580eb1bfb1d.png#align=left&display=inline&height=162&name=%E5%9B%BE%E7%89%87.png&originHeight=261&originWidth=428&size=10284&status=done&style=none&width=266" alt="图片.png"></p>
<p>那么问题来了，如果图片大于 8kb 呢？<br>将 background 的图片改成 test02.jpg：</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">body</span> &#123;</span><br><span class="line">    <span class="comment">/* background-color: red; */</span></span><br><span class="line">    <span class="attribute">background</span>: <span class="built_in">url</span>(../img/test02.jpg);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>再次打包时，会报一下错误：</p>
<p><img src="https://cdn.nlark.com/yuque/0/2020/png/335089/1581840247864-bb4ca3c2-a8e2-419f-a766-c7bfeab067ed.png#align=left&display=inline&height=91&name=%E5%9B%BE%E7%89%87.png&originHeight=181&originWidth=1169&size=22571&status=done&style=none&width=584.5" alt="图片.png"></p>
<p>这是因为大于 8kb 的图片，会通过 file-loader 进行处理，但项目中并没有 file-loader，所以需要安装一下 file-loader</p>
<ol start="5">
<li>安装 file-loader</li>
</ol>
<p><a href="https://www.webpackjs.com/loaders/file-loader" target="_blank" rel="noopener"><code>file-loader</code></a> 将文件发送到输出文件夹，并返回（相对）URL</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install --save-dev file-loader</span><br></pre></td></tr></table></figure>

<p>再次打包运行，会发现 dist 文件夹下多了一个图片文件：</p>
<p><img src="https://cdn.nlark.com/yuque/0/2020/png/335089/1581841244077-3156d675-6a7c-4600-b594-7988c8750ffc.png#align=left&display=inline&height=80&name=%E5%9B%BE%E7%89%87.png&originHeight=137&originWidth=510&size=8896&status=done&style=none&width=296" alt="图片.png"></p>
<p>但是，我们发现图片并没有显示出来，这是因为图片使用的路径不正确</p>
<p>默认情况下，webpack 会将生成的路径直接返回给使用者，但我们整个程序是打包在 dist 文件夹下的，所以这里需要在路径下再添加一个 <code>dist/</code> ：</p>
<p><img src="https://cdn.nlark.com/yuque/0/2020/png/335089/1581841402442-706d83e1-0493-440b-88dd-f31858be1993.png#align=left&display=inline&height=141&name=%E5%9B%BE%E7%89%87.png&originHeight=260&originWidth=820&size=30701&status=done&style=none&width=445" alt="图片.png"></p>
<p>再次打包运行，发现 test02.jpg 的背景能够显示出来了：</p>
<p><img src="https://cdn.nlark.com/yuque/0/2020/png/335089/1581841559327-521db0f3-5752-4b38-baeb-5fe7db74bf13.png#align=left&display=inline&height=274&name=%E5%9B%BE%E7%89%87.png&originHeight=548&originWidth=788&size=398751&status=done&style=none&width=394" alt="图片.png"></p>
<ol start="6">
<li>修改图片文件名称</li>
</ol>
<p>webpack 自动帮助我们为图片生成了一个非常长的名字，这是一个32位 hash 值，目的是防止名字重复</p>
<p>但在真实开发中，我们可能对打包的图片名字有一定的要求，比如：将所有的图片放在一个文件夹中，跟上图片原来的名称，同时也要防止重复</p>
<p>所以，我们可以在 options 中添加如下选项：</p>
<ul>
<li>img：文件要打包到的文件夹</li>
<li>name：获取图片原来的名字，放在该位置</li>
<li>hash:8：为了防止图片名称冲突，依然使用 hash，但是我们只保留8位</li>
<li>ext：使用图片原来的扩展名</li>
</ul>
<p><img src="https://cdn.nlark.com/yuque/0/2020/png/335089/1581841774408-0d58053a-75e8-4228-b089-4099784ec152.png#align=left&display=inline&height=145&name=%E5%9B%BE%E7%89%87.png&originHeight=290&originWidth=557&size=14241&status=done&style=none&width=278.5" alt="图片.png"></p>
<p>再次打包，发现在 dist/img 文件夹中的图片是按照我们预先设定的名字命名：<br></p>
<p><img src="https://cdn.nlark.com/yuque/0/2020/png/335089/1581841823506-412f9197-c6a1-447f-9d00-c8d5fbf585d9.png#align=left&display=inline&height=118&name=%E5%9B%BE%E7%89%87.png&originHeight=198&originWidth=457&size=12403&status=done&style=none&width=273" alt="图片.png"></p>
<p><a name="6eMCd"></a></p>
<h4 id="babel-loader"><a href="#babel-loader" class="headerlink" title="babel-loader"></a>babel-loader</h4><p>webpack 打包的 js 文件中，ES6 语法并没有转成 ES5，那么就意味着可能一些对 ES6 还不支持的浏览器没有办法很好的运行我们的代码：</p>
<p><img src="https://cdn.nlark.com/yuque/0/2020/png/335089/1581843416526-bea6ef2f-e4db-4319-bd52-8d20bb0d1954.png#align=left&display=inline&height=221&name=%E5%9B%BE%E7%89%87.png&originHeight=441&originWidth=754&size=44714&status=done&style=none&width=377" alt="图片.png"></p>
<p>如果希望将 ES6 的语法转成 ES5，那么就需要使用 babel</p>
<p>在webpack中，直接使用 babel 对应的 loader 就可以了</p>
<ol>
<li>安装 babel-loader</li>
</ol>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install --save-dev babel-loader@7 babel-core babel-preset-es2015</span><br></pre></td></tr></table></figure>

<ol start="2">
<li>配置 webpack.config.js 文件</li>
</ol>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  test: <span class="regexp">/\.js$/</span>,</span><br><span class="line">    exclude: <span class="regexp">/(node_modules|bower_components)/</span>,</span><br><span class="line">      use: &#123;</span><br><span class="line">        loader: <span class="string">'babel-loader'</span>,</span><br><span class="line">          options: &#123;</span><br><span class="line">            presets: [<span class="string">'es2015'</span>]</span><br><span class="line">          &#125;</span><br><span class="line">      &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>重新打包，查看 bundle.js 文件，发现其中的内容变成了 ES5 的语法：</p>
<p><img src="https://cdn.nlark.com/yuque/0/2020/png/335089/1581843549764-4ee47402-82b8-476b-8961-7eee25426e5a.png#align=left&display=inline&height=227&name=%E5%9B%BE%E7%89%87.png&originHeight=430&originWidth=765&size=41916&status=done&style=none&width=404" alt="图片.png"></p>
<p><a name="bpmkR"></a></p>
<h3 id="webpack-中配置-vue"><a href="#webpack-中配置-vue" class="headerlink" title="webpack 中配置 vue"></a>webpack 中配置 vue</h3><p><a name="8cqi5"></a></p>
<h4 id="webpack-中基本配置-vue"><a href="#webpack-中基本配置-vue" class="headerlink" title="webpack 中基本配置 vue"></a>webpack 中基本配置 vue</h4><ol>
<li>安装 vue<br></li>
</ol>
<p>如果希望在项目中使用 Vue.js，那么必然需要对其有依赖，所以需要先进行安装：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm i vue -S</span><br></pre></td></tr></table></figure>

<p>注：因为我们后续是在实际项目中也会使用 vue 的，所以并不是开发时依赖</p>
<ol start="2">
<li>在 main.js 中引入 vue，创建 vue 实例</li>
</ol>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 引用 vue</span></span><br><span class="line"><span class="keyword">import</span> Vue <span class="keyword">from</span> <span class="string">'vue'</span></span><br><span class="line"><span class="comment">// 创建 vue 实例</span></span><br><span class="line"><span class="keyword">const</span> vue = <span class="keyword">new</span> Vue(&#123;</span><br><span class="line">  el:<span class="string">'#app'</span>,</span><br><span class="line">  data:&#123;</span><br><span class="line">    message:<span class="string">'远是远洋的洋'</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<ol start="3">
<li>在 index.html 中挂载 vue 实例</li>
</ol>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"app"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">h3</span>&gt;</span>&#123;&#123;message&#125;&#125;<span class="tag">&lt;/<span class="name">h3</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>修改完成后，重新打包，运行程序，<br>发现打包过程没有任何错误，但是运行程序，没有出现想要的效果</p>
<p>这是因为目前我们使用的 Vue 版本为：runtime-only，这里需要修改为：runtime-compiler<br>修改方法就是在 webpack.config.js 中添加如下代码：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">resolve: &#123;</span><br><span class="line">  alias: &#123;</span><br><span class="line">    <span class="string">'vue$'</span>: <span class="string">'vue/dist/vue.esm.js'</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><img src="https://cdn.nlark.com/yuque/0/2020/png/335089/1581847184758-1d1e972b-9b7a-43be-8fc7-aed78dac701b.png#align=left&display=inline&height=228&name=%E5%9B%BE%E7%89%87.png&originHeight=455&originWidth=787&size=31286&status=done&style=none&width=393.5" alt="图片.png"></p>
<p>修改之后，再次打包运行，发现挂载的内容生效：</p>
<p><img src="https://cdn.nlark.com/yuque/0/2020/png/335089/1581847326774-9dbddffc-375c-4fd0-9793-246e42852bc8.png#align=left&display=inline&height=268&name=%E5%9B%BE%E7%89%87.png&originHeight=535&originWidth=790&size=390219&status=done&style=none&width=395" alt="图片.png"></p>
<p><strong>el 和 template 的区别</strong></p>
<p>在之前的 vue 代码中，不管是想让 data 中的数据显示在界面中还是想修改自定义组件，都必须修改 index.html ，但有时候，我们并不希望手动的来频繁修改，这时可以定义 template 属性</p>
<ol>
<li>先将 index.html 中挂载的 vue 代码进行修改（注释掉要显示的数据，只保留一个基本的 id 为 div 的元素）</li>
</ol>
<p><img src="https://cdn.nlark.com/yuque/0/2020/png/335089/1581850437151-6acbc5d6-29a4-4685-8cec-6dbc12dcda58.png#align=left&display=inline&height=112&name=%E5%9B%BE%E7%89%87.png&originHeight=177&originWidth=488&size=12074&status=done&style=none&width=309" alt="图片.png"></p>
<ol start="2">
<li>在 vue 实例中定义一个 template 属性</li>
</ol>
<p><img src="https://cdn.nlark.com/yuque/0/2020/png/335089/1581850534136-567ca38c-3c54-46ef-bc2c-7598864a5c9f.png#align=left&display=inline&height=166&name=%E5%9B%BE%E7%89%87.png&originHeight=303&originWidth=566&size=18732&status=done&style=none&width=310" alt="图片.png"></p>
<ol start="3">
<li>重新打包，运行程序</li>
</ol>
<p><img src="https://cdn.nlark.com/yuque/0/2020/png/335089/1581850596514-bacfb787-6e80-45e9-89a3-656bc9b5884e.png#align=left&display=inline&height=223&name=%E5%9B%BE%E7%89%87.png&originHeight=446&originWidth=743&size=314632&status=done&style=none&width=371.5" alt="图片.png"></p>
<p>发现显示效果与之前一样</p>
<p><strong>那么，el 和 template 模板的关系是什么呢？</strong></p>
<p>在之前的学习中，我们知道 el 用于指定 Vue 要管理的 DOM，可以帮助解析其中的指令、事件监听等，而如果 Vue实例中同时指定了 template，那么 template 模板的内容会替换掉挂载的对应 el 的模板</p>
<p>这样的好处是在以后的开发中，当我们再次操作 index.html 时，只需要在 template 中写入对应的标签即可</p>
<p>还可以将 template 模板中的内容进行抽离，分成 template、script、style 三部分书写，使结构变得更加清晰</p>
<p><a name="JnNUA"></a></p>
<h4 id="Vue-组件化开发"><a href="#Vue-组件化开发" class="headerlink" title="Vue 组件化开发"></a>Vue 组件化开发</h4><p>为了采用组件化的形式进行开发，可以将 vue 实例中的 template 和 data 抽离出来：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> App = &#123;</span><br><span class="line">    template: <span class="string">'&lt;div id="app"&gt;&#123;&#123;message&#125;&#125;&lt;/div&gt;'</span>,</span><br><span class="line">    data() &#123;</span><br><span class="line">        <span class="keyword">return</span> &#123;</span><br><span class="line">            message: <span class="string">'远是远洋的洋'</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 创建 vue 实例</span></span><br><span class="line"><span class="keyword">new</span> Vue(&#123;</span><br><span class="line">    el: <span class="string">'#app'</span>,</span><br><span class="line">    template: <span class="string">'&lt;App/&gt;'</span>,</span><br><span class="line">    components: &#123;</span><br><span class="line">        App</span><br><span class="line">    &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<p>此时，打包运行的结果与之前一样：</p>
<p><img src="https://cdn.nlark.com/yuque/0/2020/png/335089/1581859782000-741fc7ae-0a7a-4cce-b836-35982c761dea.png#align=left&display=inline&height=255&name=%E5%9B%BE%E7%89%87.png&originHeight=509&originWidth=752&size=375922&status=done&style=none&width=376" alt="图片.png"></p>
<p>但着组件的增加，main.js 文件会变得越来越臃肿，于是我们可以将这段代码单独抽取出来，放到一个 js 文件中</p>
<p>在 src 文件夹中新建一个文件夹 vue，再在 vue 文件夹中新建一个 app.js 文件：<br></p>
<p><img src="https://cdn.nlark.com/yuque/0/2020/png/335089/1581860115007-a4671fdb-af5e-487b-ab18-e97e90de9988.png#align=left&display=inline&height=227&name=%E5%9B%BE%E7%89%87.png&originHeight=453&originWidth=509&size=19190&status=done&style=none&width=254.5" alt="图片.png"></p>
<p>将上面抽离出来的代码放入 app.js 中，再将其导出：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">    template: <span class="string">'&lt;div id="app"&gt;&#123;&#123;message&#125;&#125;&lt;/div&gt;'</span>,</span><br><span class="line">    data() &#123;</span><br><span class="line">        <span class="keyword">return</span> &#123;</span><br><span class="line">            message: <span class="string">'远是远洋的洋'</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>然后只需要在 main.js 中引用一下就行了：</p>
<p><img src="https://cdn.nlark.com/yuque/0/2020/png/335089/1581860349050-66f50d4b-3a59-4775-b1ad-4f2da87103ec.png#align=left&display=inline&height=177&name=%E5%9B%BE%E7%89%87.png&originHeight=354&originWidth=451&size=17444&status=done&style=none&width=225.5" alt="图片.png"></p>
<p>此时，再打包运行，也能实现之前的效果</p>
<p>但是一个组件以一个 js 对象的形式进行组织和使用的时候是非常不方便的：</p>
<ul>
<li>编写template模块非常的麻烦</li>
<li>如果有样式的话，不知道写在哪里比较合适</li>
</ul>
<p>于是，我们可以以一种全新的方式来组织一个 vue 的组件：.vue 文件<br></p>
<p><a name="THFlO"></a></p>
<h4 id="vue-文件封装处理"><a href="#vue-文件封装处理" class="headerlink" title=".vue 文件封装处理"></a>.vue 文件封装处理</h4><ol>
<li><p>安装 vue-loader 和 vue-template-compiler</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install vue-loader@14.2.2 vue-template-compiler --save-dev</span><br></pre></td></tr></table></figure>
</li>
<li><p>修改 webpack.config.js 的配置文件</p>
</li>
</ol>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  test: <span class="regexp">/\.vue$/</span>,</span><br><span class="line">    use: [<span class="string">'vue-loader'</span>]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ol start="3">
<li>在 vue 文件夹中新建 App.vue 文件</li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div id=&quot;app&quot;&gt;</span><br><span class="line">    &lt;h3 class=&quot;title&quot;&gt;&#123;&#123;name&#125;&#125;&lt;/h3&gt;</span><br><span class="line">    &lt;p&gt;&#123;&#123;message&#125;&#125;&lt;/p&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">export default &#123;</span><br><span class="line">  name: &apos;App&apos;,</span><br><span class="line">  data()&#123;</span><br><span class="line">    return&#123;</span><br><span class="line">      name:&apos;LiaoYuanyang&apos;,</span><br><span class="line">      message: &apos;远是远洋的洋&apos;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line">&lt;style scoped&gt;</span><br><span class="line">  .title&#123;</span><br><span class="line">    color: pink</span><br><span class="line">  &#125;</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure>

<ol start="4">
<li>在 main.js 中引用 App.vue 文件</li>
</ol>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> App <span class="keyword">from</span> <span class="string">'./vue/App.vue'</span></span><br></pre></td></tr></table></figure>

<p>打包运行：</p>
<p><img src="https://cdn.nlark.com/yuque/0/2020/png/335089/1581862336232-228e6ffe-ec49-4ad1-b2f9-494a06153bf1.png#align=left&display=inline&height=348&name=%E5%9B%BE%E7%89%87.png&originHeight=696&originWidth=784&size=534801&status=done&style=none&width=392" alt="图片.png"></p>
<p><a name="MkGmz"></a></p>
<h3 id="plugin-的使用"><a href="#plugin-的使用" class="headerlink" title="plugin 的使用"></a>plugin 的使用</h3><p><a name="OMYPP"></a></p>
<h4 id="什么是-plugin"><a href="#什么是-plugin" class="headerlink" title="什么是 plugin "></a>什么是 plugin <br></h4><ul>
<li>plugin 是插件的意思，通常是用于对某个现有的架构进行扩展</li>
<li>webpack 中的插件，就是对 webpack 现有功能的各种扩展，比如打包优化，文件压缩等</li>
</ul>
<p><a name="uXMgi"></a></p>
<h4 id="loader-和-plugin-区别"><a href="#loader-和-plugin-区别" class="headerlink" title="loader 和 plugin 区别"></a>loader 和 plugin 区别</h4><ul>
<li>loader 主要用于转换某些类型的模块，它是一个转换器</li>
<li>plugin 是插件，它是对 webpack 本身的扩展，是一个扩展器</li>
</ul>
<p><a name="5xVY2"></a></p>
<h4 id="plugin-的使用过程"><a href="#plugin-的使用过程" class="headerlink" title="plugin 的使用过程"></a>plugin 的使用过程</h4><ol>
<li>通过 npm 安装需要使用的 plugins (某些 webpack 已经内置的插件不需要安装)</li>
<li>在 webpack.config.js 中的 plugins 中配置插件</li>
</ol>
<p><a name="fWT4D"></a></p>
<h4 id="添加版权的-plugin：BannerPlugin"><a href="#添加版权的-plugin：BannerPlugin" class="headerlink" title="添加版权的 plugin：BannerPlugin"></a>添加版权的 plugin：BannerPlugin</h4><p>BannerPlugin 属于 webpack 自带的插件，可以为打包的文件添加版权声明</p>
<ol>
<li>按照下面的方式来修改 webpack.config.js 的文件：</li>
</ol>
<p><img src="https://cdn.nlark.com/yuque/0/2020/png/335089/1581863550815-655e2f48-d54b-430c-a10b-92eac53241c6.png#align=left&display=inline&height=243&name=%E5%9B%BE%E7%89%87.png&originHeight=485&originWidth=813&size=42435&status=done&style=none&width=406.5" alt="图片.png"></p>
<ol start="2">
<li>重新打包程序，查看 bundle.js 文件的头部，可以看到如下信息：</li>
</ol>
<p><img src="https://cdn.nlark.com/yuque/0/2020/png/335089/1581863591032-45a4f695-ec74-4919-955c-8c2476934b53.png#align=left&display=inline&height=114&name=%E5%9B%BE%E7%89%87.png&originHeight=228&originWidth=709&size=28684&status=done&style=none&width=354.5" alt="图片.png"></p>
<p><a name="DUDap"></a></p>
<h4 id="打包-html-的-plugin：HtmlWebpackPlugin"><a href="#打包-html-的-plugin：HtmlWebpackPlugin" class="headerlink" title="打包 html 的 plugin：HtmlWebpackPlugin"></a>打包 html 的 plugin：HtmlWebpackPlugin</h4><p>目前，我们的 index.html 文件是存放在项目的根目录下的，但在真实发布项目时，发布的是 dist 文件夹中的内容，而 dist 文件夹中如果没有 index.html 文件，那么打包的 js 等文件也就没有意义了</p>
<p>所以，我们需要将 index.html 文件打包到 dist 文件夹中，这个时候可以使用 HtmlWebpackPlugin 插件<br>HtmlWebpackPlugin 插件可以为我们做这些事情：</p>
<ul>
<li>自动生成一个 index.html 文件(可以指定模板来生成)</li>
<li>将打包的 js 文件，自动通过 script 标签插入到 body 中</li>
</ul>
<ol>
<li>安装 HtmlWebpackPlugin 插件</li>
</ol>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install html-webpack-plugin --save-dev</span><br></pre></td></tr></table></figure>

<ol start="2">
<li>修改 webpack.config.js 文件中 plugins</li>
</ol>
<p><img src="https://cdn.nlark.com/yuque/0/2020/png/335089/1581864823122-4de88a42-6418-4751-bd69-90fa857394ea.png#align=left&display=inline&height=349&name=%E5%9B%BE%E7%89%87.png&originHeight=602&originWidth=819&size=54243&status=done&style=none&width=475" alt="图片.png"></p>
<ol start="3">
<li>修改模板 index.html<br></li>
</ol>
<p>上面的 template 表示根据什么模板来生成 index.html，这里表示的是 src 目录中的 index.html，由于 HtmlWebpackPlugin 插件会将打包的 js 文件，自动通过 script 标签插入到 body 中，所以我们要去掉模板 index.html 中的多余部分:<br><img src="https://cdn.nlark.com/yuque/0/2020/png/335089/1581865309442-dfc19818-09c7-4cc5-a917-94227c36c249.png#align=left&display=inline&height=271&name=%E5%9B%BE%E7%89%87.png&originHeight=542&originWidth=955&size=38513&status=done&style=none&width=477.5" alt="图片.png"></p>
<ol start="4">
<li>需要删除之前在 output 中添加的 publicPath 属性<br>，否则插入的 script 标签中的 src 可能会有问题</li>
</ol>
<p><img src="https://cdn.nlark.com/yuque/0/2020/png/335089/1581864926759-fc180d4a-3cf1-40c5-a22d-eeb6511d2d0d.png#align=left&display=inline&height=156&name=%E5%9B%BE%E7%89%87.png&originHeight=270&originWidth=820&size=31044&status=done&style=none&width=473" alt="图片.png"></p>
<ol start="5">
<li>重新打包执行，会发现 dist 目录中多了一个 index.html 文件</li>
</ol>
<p><img src="https://cdn.nlark.com/yuque/0/2020/png/335089/1581865471155-585490be-3835-4868-aa75-31b5385a6db6.png#align=left&display=inline&height=65&name=%E5%9B%BE%E7%89%87.png&originHeight=130&originWidth=451&size=4484&status=done&style=none&width=225.5" alt="图片.png"></p>
<p><img src="https://cdn.nlark.com/yuque/0/2020/png/335089/1581865492842-39554bb9-e2bf-436f-91e0-dd029d97a4c3.png#align=left&display=inline&height=284&name=%E5%9B%BE%E7%89%87.png&originHeight=568&originWidth=974&size=45257&status=done&style=none&width=487" alt="图片.png"></p>
<p><a name="tONt3"></a></p>
<h4 id="js-压缩的-Plugin：uglifyjs-webpack-plugin"><a href="#js-压缩的-Plugin：uglifyjs-webpack-plugin" class="headerlink" title="js 压缩的 Plugin：uglifyjs-webpack-plugin"></a>js 压缩的 Plugin：uglifyjs-webpack-plugin</h4><p>在项目发布之前，我们必然需要对 js 等文件进行压缩处理<br>对打包的js文件进行压缩，可以使用一个第三方的插件 uglifyjs-webpack-plugin，并且版本号指定 1.1.1，和 CLI2 保持一致</p>
<ol>
<li>安装 uglifyjs-webpack-plugin</li>
</ol>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install uglifyjs-webpack-plugin@1.1.1 --save-dev</span><br></pre></td></tr></table></figure>

<ol start="2">
<li>修改 webpack.config.js 文件，使用插件</li>
</ol>
<p><img src="https://cdn.nlark.com/yuque/0/2020/png/335089/1581914151937-05308b75-18dd-49ab-9c7c-e45ff5389292.png#align=left&display=inline&height=417&name=%E5%9B%BE%E7%89%87.png&originHeight=833&originWidth=952&size=101229&status=done&style=none&width=476" alt="图片.png"></p>
<ol start="3">
<li>查看打包后的 bunlde.js 文件，发现已经被压缩过了</li>
</ol>
<p><img src="https://cdn.nlark.com/yuque/0/2020/png/335089/1581914201761-b72159c0-4f88-4977-856b-239eb22ed1c0.png#align=left&display=inline&height=296&name=%E5%9B%BE%E7%89%87.png&originHeight=621&originWidth=1212&size=137597&status=done&style=none&width=578" alt="图片.png"></p>
<p><a name="wf7pK"></a></p>
<h3 id="搭建本地服务器"><a href="#搭建本地服务器" class="headerlink" title="搭建本地服务器"></a>搭建本地服务器</h3><p>webpack 提供了一个可选的本地开发服务器，这个本地服务器基于 node.js 搭建，内部使用 express 框架，可以实现让浏览器自动刷新显示我们修改后的结果，不过它是一个单独的模块，在webpack中使用之前需要先安装它</p>
<ol>
<li>安装 webpack-dev-server</li>
</ol>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install --save-dev webpack-dev-server@2.9.1</span><br></pre></td></tr></table></figure>

<ol start="2">
<li>webpack.config.js 文件配置修改</li>
</ol>
<p><img src="https://cdn.nlark.com/yuque/0/2020/png/335089/1581915474468-6a2a9bf7-9441-4f8b-be12-f3dfb2cec051.png#align=left&display=inline&height=368&name=%E5%9B%BE%E7%89%87.png&originHeight=736&originWidth=875&size=80176&status=done&style=none&width=437.5" alt="图片.png"></p>
<p>devserver 也是作为 webpack 中的一个选项，选项本身可以设置如下属性：</p>
<ul>
<li>contentBase：为哪一个文件夹提供本地服务，默认是根文件夹，我们这里要填写./dist</li>
<li>port：端口号</li>
<li>inline：页面实时刷新</li>
<li>historyApiFallback：在SPA页面中，依赖HTML5的history模式</li>
</ul>
<p>此时，可以通过命令：<code>webpack-dev-server</code> 启动服务器了<br></p>
<ol start="3">
<li>配置 package.json 中的 scripts，简化启动服务器的命令</li>
</ol>
<p><img src="https://cdn.nlark.com/yuque/0/2020/png/335089/1581916774122-470625d6-77c7-46b9-8d87-4e24325c2680.png#align=left&display=inline&height=185&name=%E5%9B%BE%E7%89%87.png&originHeight=370&originWidth=841&size=39644&status=done&style=none&width=420.5" alt="图片.png"></p>
<p>– open 参数表示直接用默认浏览器打开</p>
<ol start="4">
<li>执行命令 <code>nmp run dev</code> 启动服务器，打开网页</li>
</ol>
<p><img src="https://cdn.nlark.com/yuque/0/2020/png/335089/1581915705665-41389f07-00bb-4da3-a38b-82b2c03ffa04.png#align=left&display=inline&height=323&name=%E5%9B%BE%E7%89%87.png&originHeight=646&originWidth=794&size=489922&status=done&style=none&width=397" alt="图片.png"></p>
<p><a name="L7rv5"></a></p>
<h3 id="webpack-配置分离"><a href="#webpack-配置分离" class="headerlink" title="webpack 配置分离"></a>webpack 配置分离</h3><p>由于我们目前所有的生产环境代码和发布环境代码都写在 webpack.config.json 中，这样当我们在编译的时候，会将生产环境代码和发布环境代码一起编译，但有时候我们希望将二者分开编译，比如：</p>
<p><img src="https://cdn.nlark.com/yuque/0/2020/png/335089/1581917247829-254665e1-c55f-417b-9e13-d2992135f7dc.png#align=left&display=inline&height=179&name=%E5%9B%BE%E7%89%87.png&originHeight=358&originWidth=906&size=52638&status=done&style=none&width=453" alt="图片.png"></p>
<p>这时候，将生产环境代码和发布环境代码抽离出来显得很有必要</p>
<ol>
<li>新建一个文件夹 build，将所有编译环境代码放到里面，在 build 中新建三个文件：</li>
</ol>
<p><img src="https://cdn.nlark.com/yuque/0/2020/png/335089/1581918202799-d72c50f2-a997-40da-bc20-140a5a8bf23f.png#align=left&display=inline&height=86&name=%E5%9B%BE%E7%89%87.png&originHeight=172&originWidth=508&size=9488&status=done&style=none&width=254" alt="图片.png"></p>
<ul>
<li>base.config.js：公共部分</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> path = <span class="built_in">require</span>(<span class="string">'path'</span>)</span><br><span class="line"><span class="keyword">const</span> webpack = <span class="built_in">require</span>(<span class="string">'webpack'</span>)</span><br><span class="line"><span class="keyword">const</span> HtmlWebpackPlugin = <span class="built_in">require</span>(<span class="string">'html-webpack-plugin'</span>)</span><br><span class="line"></span><br><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">    entry: <span class="string">'./src/main.js'</span>,</span><br><span class="line">    output: &#123;</span><br><span class="line">        path: path.join(__dirname, <span class="string">'dist'</span>),</span><br><span class="line">        filename: <span class="string">'bundle.js'</span>,</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="built_in">module</span>: &#123;</span><br><span class="line">        rules: [&#123;</span><br><span class="line">                test: <span class="regexp">/\.css$/</span>,</span><br><span class="line">                <span class="comment">// webpack 在读取使用的loader的过程中，是按照从右向左的顺序读取的，所以顺序不能颠倒</span></span><br><span class="line">                use: [<span class="string">'style-loader'</span>, <span class="string">'css-loader'</span>]</span><br><span class="line">            &#125;,</span><br><span class="line">            &#123;</span><br><span class="line">                test: <span class="regexp">/\.less$/</span>,</span><br><span class="line">                use: [&#123;</span><br><span class="line">                    loader: <span class="string">"style-loader"</span> <span class="comment">// creates style nodes from JS strings</span></span><br><span class="line">                &#125;, &#123;</span><br><span class="line">                    loader: <span class="string">"css-loader"</span> <span class="comment">// translates CSS into CommonJS</span></span><br><span class="line">                &#125;, &#123;</span><br><span class="line">                    loader: <span class="string">"less-loader"</span> <span class="comment">// compiles Less to CSS</span></span><br><span class="line">                &#125;]</span><br><span class="line">            &#125;,</span><br><span class="line">            &#123;</span><br><span class="line">                test: <span class="regexp">/\.(png|jpg|gif)$/</span>,</span><br><span class="line">                use: [&#123;</span><br><span class="line">                    loader: <span class="string">'url-loader'</span>,</span><br><span class="line">                    options: &#123;</span><br><span class="line">                        limit: <span class="number">8192</span>,</span><br><span class="line">                        name: <span class="string">'img/[name].[hash:8].[ext]'</span></span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;]</span><br><span class="line">            &#125;,</span><br><span class="line">            &#123;</span><br><span class="line">                test: <span class="regexp">/\.js$/</span>,</span><br><span class="line">                exclude: <span class="regexp">/(node_modules|bower_components)/</span>,</span><br><span class="line">                use: &#123;</span><br><span class="line">                    loader: <span class="string">'babel-loader'</span>,</span><br><span class="line">                    options: &#123;</span><br><span class="line">                        presets: [<span class="string">'es2015'</span>]</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;,</span><br><span class="line">            &#123;</span><br><span class="line">                test: <span class="regexp">/\.vue$/</span>,</span><br><span class="line">                use: [<span class="string">'vue-loader'</span>]</span><br><span class="line">            &#125;</span><br><span class="line">        ]</span><br><span class="line">    &#125;,</span><br><span class="line">    resolve: &#123;</span><br><span class="line">        alias: &#123;</span><br><span class="line">            <span class="string">'vue$'</span>: <span class="string">'vue/dist/vue.esm.js'</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    plugins: [</span><br><span class="line">        <span class="keyword">new</span> webpack.BannerPlugin(<span class="string">'最终版权归 Yuanyang Liao 所有'</span>),</span><br><span class="line">        <span class="keyword">new</span> HtmlWebpackPlugin(&#123;</span><br><span class="line">            template: <span class="string">'index.html'</span></span><br><span class="line">        &#125;),</span><br><span class="line">    ],</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>dev.config.js：开发部分</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">    devServer: &#123;</span><br><span class="line">        contentBase: <span class="string">'./dist'</span>,</span><br><span class="line">        inline: <span class="literal">true</span>,</span><br><span class="line">        port: <span class="number">8888</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>prod.config.js：生产部分</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> UglifyjsWebpackPlugin = <span class="built_in">require</span>(<span class="string">'uglifyjs-webpack-plugin'</span>)</span><br><span class="line"></span><br><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">    plugins: [</span><br><span class="line">        <span class="keyword">new</span> UglifyjsWebpackPlugin(),</span><br><span class="line">    ],</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ol start="2">
<li>安装对配置文件合并的插件：webpack-merge</li>
</ol>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm i webpack-merge --save-dev</span><br></pre></td></tr></table></figure>

<ol start="3">
<li>修改配置文件</li>
</ol>
<ul>
<li>dev.config.js</li>
</ul>
<p><img src="https://cdn.nlark.com/yuque/0/2020/png/335089/1581918748396-da3368f3-839f-447a-a075-1e4e1e9b7217.png#align=left&display=inline&height=187&name=%E5%9B%BE%E7%89%87.png&originHeight=374&originWidth=749&size=42874&status=done&style=none&width=374.5" alt="图片.png"></p>
<ul>
<li>prod.config.js</li>
</ul>
<p><img src="https://cdn.nlark.com/yuque/0/2020/png/335089/1581918789249-9b533468-3f9e-4047-985e-4706f62a26f6.png#align=left&display=inline&height=179&name=%E5%9B%BE%E7%89%87.png&originHeight=357&originWidth=866&size=47628&status=done&style=none&width=433" alt="图片.png"></p>
<ol start="4">
<li>删除原来的 webpack.config.js 文件</li>
</ol>
<p>此时执行 <code>npm run build</code> 命令会报如下错误：</p>
<p><img src="https://cdn.nlark.com/yuque/0/2020/png/335089/1581919084654-089d88cb-74f2-4c6a-b6c5-378036373be5.png#align=left&display=inline&height=102&name=%E5%9B%BE%E7%89%87.png&originHeight=203&originWidth=914&size=19455&status=done&style=none&width=457" alt="图片.png"></p>
<p>需要修改 package.json 文件中的 scripts 选项<br></p>
<ol start="5">
<li>修改 package.json 文件</li>
</ol>
<p><img src="https://cdn.nlark.com/yuque/0/2020/png/335089/1581919210318-f17d4bfd-da53-4cc1-bce7-4a948d9a9da7.png#align=left&display=inline&height=185&name=%E5%9B%BE%E7%89%87.png&originHeight=369&originWidth=956&size=45439&status=done&style=none&width=478" alt="图片.png"></p>
<p>此时可以打包成功了，但是发现打包的 bundle.js 的位置是在 built/dist 文件夹中，而不是在原来的 dist 中</p>
<p><img src="https://cdn.nlark.com/yuque/0/2020/png/335089/1581920324334-90f3e522-1430-4348-b9d7-4e5cb855920a.png#align=left&display=inline&height=148&name=%E5%9B%BE%E7%89%87.png&originHeight=295&originWidth=467&size=13531&status=done&style=none&width=233.5" alt="图片.png"></p>
<p>这时因为在 base.config.js 中的 output 中的文件拼接路径是 <code>&#39;dist&#39;</code>，表示的是从当前路径下拼接<br></p>
<p><img src="https://cdn.nlark.com/yuque/0/2020/png/335089/1581920442553-90d0e594-7cc4-40e4-adf4-15dbeaed4b16.png#align=left&display=inline&height=200&name=%E5%9B%BE%E7%89%87.png&originHeight=399&originWidth=861&size=50690&status=done&style=none&width=430.5" alt="图片.png"></p>
<p>需要将其修改为从上一级目录开始拼接：</p>
<p><img src="https://cdn.nlark.com/yuque/0/2020/png/335089/1581920585090-21d2760c-e88c-4e56-837e-f72bb826ebcc.png#align=left&display=inline&height=201&name=%E5%9B%BE%E7%89%87.png&originHeight=401&originWidth=957&size=53472&status=done&style=none&width=478.5" alt="图片.png"></p>
<p><a name="ejDON"></a></p>
<h1 id="Vue-CLI"><a href="#Vue-CLI" class="headerlink" title="Vue CLI"></a>Vue CLI</h1><p><a name="X6Xtx"></a></p>
<h2 id="什么是-Vue-CLI"><a href="#什么是-Vue-CLI" class="headerlink" title="什么是 Vue CLI"></a>什么是 Vue CLI</h2><p>如果你只是简单写几个 Vue 的 Demo 程序, 那么你不需要 Vue CLI<br>如果你在开发大型项目, 那么你需要, 并且必然需要使用 Vue CLI</p>
<p>使用 Vue.js 开发大型应用时，我们需要考虑代码目录结构、项目结构和部署、热加载、代码单元测试等事情，如果每个项目都要手动完成这些工作，效率比较低，所以通常我们会使用一些脚手架工具来帮助完成这些事情</p>
<p><strong>CLI 是什么意思</strong><br>CLI 是 Command-Line Interface , 翻译为命令行界面, 俗称脚手架<br>Vue CLI 是一个官方发布的 vue.js 项目脚手架<br>使用 vue-cli 可以快速搭建 Vue 开发环境以及对应的 webpack 配置</p>
<p>Vue CLI 使用前提：</p>
<ul>
<li>Node</li>
<li>webpack</li>
</ul>
<p><a name="CVdp2"></a></p>
<h2 id="Vue-CLI-的使用"><a href="#Vue-CLI-的使用" class="headerlink" title="Vue CLI 的使用"></a>Vue CLI 的使用</h2><p><a name="IzIpM"></a></p>
<h3 id="安装-Vue-脚手架"><a href="#安装-Vue-脚手架" class="headerlink" title="安装 Vue 脚手架"></a>安装 Vue 脚手架</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install -g @vue/cli</span><br></pre></td></tr></table></figure>

<p>注意：上面安装的是 Vue CLI3 的版本，如果需要想按照 Vue CLI2 的方式初始化项目，还需要拉取 2.x 的模板</p>
<p><a name="RaQ9p"></a></p>
<h3 id="拉取-2-x-模板（旧版本）"><a href="#拉取-2-x-模板（旧版本）" class="headerlink" title="拉取 2.x 模板（旧版本）"></a>拉取 2.x 模板（旧版本）</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm i @vue/cli-init -g</span><br></pre></td></tr></table></figure>

<p><a name="LQHBq"></a></p>
<h3 id="初始化项目"><a href="#初始化项目" class="headerlink" title="初始化项目"></a>初始化项目</h3><p><a name="pUxgU"></a></p>
<h4 id="Vue-CLI2-初始化项目"><a href="#Vue-CLI2-初始化项目" class="headerlink" title="Vue CLI2 初始化项目"></a>Vue CLI2 初始化项目</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vue init webpack vuecli2test</span><br></pre></td></tr></table></figure>

<p><strong>vue cli 2 项目详解</strong></p>
<p><img src="https://cdn.nlark.com/yuque/0/2020/png/335089/1581926962910-fc27b205-e612-4e2d-84f3-462563a613aa.png#align=left&display=inline&height=271&name=%E5%9B%BE%E7%89%87.png&originHeight=541&originWidth=1607&size=276805&status=done&style=none&width=803.5" alt="图片.png"></p>
<p><strong>vue cli 2 目录详解</strong><br></p>
<p><img src="https://cdn.nlark.com/yuque/0/2020/png/335089/1581935903367-f26af9af-4554-4120-af0d-c3cefe6ebd5c.png#align=left&display=inline&height=397&name=%E5%9B%BE%E7%89%87.png&originHeight=794&originWidth=914&size=144322&status=done&style=none&width=457" alt="图片.png"></p>
<p><a name="44uOF"></a></p>
<h4 id="Vue-CLI3-初始化项目"><a href="#Vue-CLI3-初始化项目" class="headerlink" title="Vue CLI3 初始化项目"></a>Vue CLI3 初始化项目</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vue create vuecli3test</span><br></pre></td></tr></table></figure>

<p>vue-cli 3 与 2 版本有很大区别：</p>
<ul>
<li>vue-cli 3 是基于 webpack 4 打造，vue-cli 2 还是 webapck 3</li>
<li>vue-cli 3 的设计原则是“0配置”，移除了根目录下的 build 和 config 等的配置文件目录</li>
<li>vue-cli 3 提供了 vue ui 命令，提供了可视化配置，更加人性化</li>
<li>移除了 static 文件夹，新增了 public 文件夹，并且 index.html 移动到 public 中</li>
</ul>
<p><strong>vue cli 3 项目详解</strong></p>
<p><img src="https://cdn.nlark.com/yuque/0/2020/png/335089/1581944048596-1a072dbb-a4bf-4e73-9c17-48a92227ba68.png#align=left&display=inline&height=138&name=%E5%9B%BE%E7%89%87.png&originHeight=268&originWidth=1152&size=57054&status=done&style=none&width=593" alt="图片.png"></p>
<p><strong>vue cli 3 目录详解</strong></p>
<p><img src="https://cdn.nlark.com/yuque/0/2020/png/335089/1581944271556-a10b8758-3945-452f-8938-c79bd88e5f82.png#align=left&display=inline&height=266&name=%E5%9B%BE%E7%89%87.png&originHeight=532&originWidth=753&size=74311&status=done&style=none&width=376.5" alt="图片.png"></p>
<p><a name="ScnJ9"></a></p>
<h3 id="CLI-相关配置"><a href="#CLI-相关配置" class="headerlink" title="CLI 相关配置"></a>CLI 相关配置</h3><p><a name="xrGsZ"></a></p>
<h4 id="Runtime-Compiler-和-Runtime-only-的区别"><a href="#Runtime-Compiler-和-Runtime-only-的区别" class="headerlink" title="Runtime-Compiler 和 Runtime-only 的区别"></a>Runtime-Compiler 和 Runtime-only 的区别</h4><p>构建项目时：</p>
<p><strong><img src="https://cdn.nlark.com/yuque/0/2020/png/335089/1581939651445-21d93f1f-a52b-4cbf-8363-5a6a137d61c1.png#align=left&display=inline&height=41&name=%E5%9B%BE%E7%89%87.png&originHeight=82&originWidth=933&size=74633&status=done&style=none&width=466.5" alt="图片.png"></strong><br>官方解释：</p>
<p><strong><img src="https://cdn.nlark.com/yuque/0/2020/png/335089/1581939705183-6a421066-3e2e-4a4b-961d-fe8c5d705525.png#align=left&display=inline&height=451&name=%E5%9B%BE%E7%89%87.png&originHeight=716&originWidth=727&size=291133&status=done&style=none&width=458" alt="图片.png"></strong><br>简单总结：</p>
<ul>
<li>如果在之后的开发中，你依然使用 template，就需要选择 Runtime-Compiler</li>
<li>如果你之后的开发中，使用的是 .vue 文件开发，那么可以选择 Runtime-only</li>
</ul>
<p><strong>render 和 template</strong></p>
<p><img src="https://cdn.nlark.com/yuque/0/2020/png/335089/1581940035626-c828a7a9-0260-4ab3-aa45-6f304a91804f.png#align=left&display=inline&height=119&name=%E5%9B%BE%E7%89%87.png&originHeight=237&originWidth=1120&size=85275&status=done&style=none&width=560" alt="图片.png"></p>
<p><strong>Vue 程序运行过程</strong></p>
<p><img src="https://cdn.nlark.com/yuque/0/2020/png/335089/1581940280165-e1b47b6c-3cee-4415-8334-8b53e1cf70b2.png#align=left&display=inline&height=322&name=%E5%9B%BE%E7%89%87.png&originHeight=467&originWidth=882&size=69222&status=done&style=none&width=609" alt="图片.png"><br><strong>render 函数的使用</strong><br><strong><img src="https://cdn.nlark.com/yuque/0/2020/png/335089/1581940598835-4ec575ef-bd1a-485b-92c8-ee351c3c10ff.png#align=left&display=inline&height=273&name=%E5%9B%BE%E7%89%87.png&originHeight=546&originWidth=1203&size=264277&status=done&style=none&width=601.5" alt="图片.png"></strong></p>
<p><a name="uLAdF"></a></p>
<h4 id="npm-run-build"><a href="#npm-run-build" class="headerlink" title="npm run build"></a>npm run build</h4><p><img src="https://cdn.nlark.com/yuque/0/2020/png/335089/1581943320923-01bd82b2-8d77-4ba3-a434-3587f701478e.png#align=left&display=inline&height=297&name=%E5%9B%BE%E7%89%87.png&originHeight=594&originWidth=1203&size=189296&status=done&style=none&width=601.5" alt="图片.png"></p>
<p><a name="OszVW"></a></p>
<h4 id="npm-run-dev"><a href="#npm-run-dev" class="headerlink" title="npm run dev"></a>npm run dev</h4><p><img src="https://cdn.nlark.com/yuque/0/2020/png/335089/1581943375889-79a90aee-6408-4dba-a525-7b37cf9a3be1.png#align=left&display=inline&height=289&name=%E5%9B%BE%E7%89%87.png&originHeight=578&originWidth=1196&size=191460&status=done&style=none&width=598" alt="图片.png"></p>
<p><a name="xtLnL"></a></p>
<h4 id="配置文件去向"><a href="#配置文件去向" class="headerlink" title="配置文件去向"></a>配置文件去向</h4><p>在 Vue CLI 3 中，webpack 等相关配置文件被隐藏起来了，如果想查看或修改相关配置，可以通过以下3种方式：</p>
<ol>
<li>从 UI 界面上修改</li>
</ol>
<ul>
<li>启动配置服务器：<code>vue ui</code></li>
<li>进入 Vue 项目管理器，导入我们的项目：<br></li>
</ul>
<p><img src="https://cdn.nlark.com/yuque/0/2020/png/335089/1581946472716-b1c6bbb7-021e-4293-9faa-0fb5facc2cea.png#align=left&display=inline&height=497&name=%E5%9B%BE%E7%89%87.png&originHeight=993&originWidth=1739&size=37799&status=done&style=none&width=869.5" alt="图片.png"></p>
<ul>
<li>然后可以在配置中查看或修改我们的 webpack 等配置：<br></li>
</ul>
<p><img src="https://cdn.nlark.com/yuque/0/2020/png/335089/1581946617657-e9963bc3-d7de-495a-96cc-646cc58b44f0.png#align=left&display=inline&height=391&name=%E5%9B%BE%E7%89%87.png&originHeight=488&originWidth=932&size=126285&status=done&style=none&width=746" alt="图片.png"></p>
<ol start="2">
<li>在 node_modules 中寻找<br></li>
</ol>
<p><img src="https://cdn.nlark.com/yuque/0/2020/png/335089/1581946874252-5f870b5a-692d-44f0-a7ae-99a40cd8e511.png#align=left&display=inline&height=427&name=%E5%9B%BE%E7%89%87.png&originHeight=854&originWidth=345&size=25816&status=done&style=none&width=172.5" alt="图片.png"></p>
<ol start="3">
<li>在项目中新建一个 vue.config.js 文件，将需要修改的配置代码写入其中</li>
</ol>
<p><img src="https://cdn.nlark.com/yuque/0/2020/png/335089/1581947083923-c75b2675-60c7-4757-8774-94cfd0c795f2.png#align=left&display=inline&height=98&name=%E5%9B%BE%E7%89%87.png&originHeight=196&originWidth=549&size=15289&status=done&style=none&width=274.5" alt="图片.png"></p>
<p>最终编译时会自动将我们添加的代码与隐藏的代码进行合并<br></p>
<p><a name="AqjIF"></a></p>
<h1 id="Vue-router"><a href="#Vue-router" class="headerlink" title="Vue-router"></a>Vue-router</h1><p><a name="lwXgS"></a></p>
<h2 id="认识路由"><a href="#认识路由" class="headerlink" title="认识路由"></a>认识路由</h2><p><a name="VpPJO"></a></p>
<h3 id="什么是路由"><a href="#什么是路由" class="headerlink" title="什么是路由"></a>什么是路由</h3><blockquote>
<p>路由（routing）就是通过互联的网络把信息从源地址传输到目的地址的活动   — 维基百科</p>
</blockquote>
<p>路由器提供了两种机制， 路由和转发</p>
<ul>
<li>路由是决定数据包从来源到目的地的路径</li>
<li>转发将输入端的数据转移到合适的输出端</li>
</ul>
<p><a name="yGLva"></a></p>
<h3 id="网站发展的几个阶段"><a href="#网站发展的几个阶段" class="headerlink" title="网站发展的几个阶段"></a>网站发展的几个阶段</h3><p><a name="DsBLQ"></a></p>
<h4 id="后端路由阶段"><a href="#后端路由阶段" class="headerlink" title="后端路由阶段"></a>后端路由阶段</h4><p><strong>什么是后端路由</strong><br></p>
<p>早期的网站开发，整个 HTML 页面都是是由服务器来渲染的，服务器直接生产渲染好对应的 HTML 页面, 返回给客户端进行展示</p>
<p>但是, 服务器如何处理一个网站的诸多页面呢?</p>
<p>首先，一个页面会有自己对应的网址, 也就是 URL，客户端发生请求时，URL 会发送到服务器，服务器通过正则对该URL 进行匹配且最后交给 Controller 进行处理，Controller 进行各种处理后，最终生成 HTML 或者数据，返回给前端，这就完成了一个IO操作，这种操作, 就是后端路由</p>
<p><strong>后端路由的优点</strong></p>
<p>当页面中需要请求不同的路径内容时，交给服务器来进行处理, 服务器渲染好整个页面，并且将页面返回给客户端，<br>这种情况下渲染好的页面，不需要单独加载任何的 js 和 css，可以直接交给浏览器展示，这样也有利于 SEO 的优化</p>
<p><strong>后端路由的缺点</strong><br>**</p>
<ul>
<li>整个页面的模块都要由后端人员来编写和维护，工作量太大</li>
<li>前端开发人员如果要开发页面，需要通过 PHP 和 Java 等语言来编写页面代码，增加了额外的学习成本</li>
<li>HTML 代码和数据以及对应的逻辑混在一起,，不利于编写和维护</li>
</ul>
<p><a name="bV4zc"></a></p>
<h4 id="前端路由阶段"><a href="#前端路由阶段" class="headerlink" title="前端路由阶段"></a>前端路由阶段</h4><p>前端路由的核心：改变URL，但是页面不进行整体的刷新</p>
<p><a name="XI7BL"></a></p>
<h5 id="前后端分离阶段"><a href="#前后端分离阶段" class="headerlink" title="前后端分离阶段"></a>前后端分离阶段</h5><p>随着 Ajax 的出现，有了前后端分离的开发模式：后端只提供 API 来返回数据，前端通过 Ajax 获取数据，并且可以通过 JavaScript 将数据渲染到页面中</p>
<p>优点：</p>
<ul>
<li>前后端责任变得很清晰，后端专注于数据上, 前端专注于交互和可视化上</li>
<li>当移动端(iOS/Android)出现后，后端不需要进行任何处理， 依然使用之前的一套API即可</li>
</ul>
<p><a name="ekFqI"></a></p>
<h5 id="单页面富应用阶段"><a href="#单页面富应用阶段" class="headerlink" title="单页面富应用阶段"></a>单页面富应用阶段</h5><p>单页面富应用，即单页Web应用（single page web application，SPA），就是只有一张 Web 页面的应用，是加载单个 HTML 页面并在用户与应用程序交互时动态更新该页面的 Web 应用程序</p>
<p>简单理解：就是在前后端分离的基础上加了一层前端路由</p>
<p><strong>SPA的特点</strong><br>**</p>
<ul>
<li>速度：更好的用户体验，让用户在 web app 感受 native app 的速度和流畅</li>
<li>·MVVM：经典 MVVM 开发模式，前后端各负其责</li>
<li>·ajax：重前端，业务逻辑全部在本地操作，数据都需要通过AJAX同步、提交</li>
<li>·路由：在 URL 中采用 # 号来作为当前视图的地址，改变 # 号后的参数，页面并不会重载</li>
</ul>
<p><strong>SPA 缺点</strong><br>**</p>
<ul>
<li>首屏渲染等待时长： 必须得加载完毕，才能渲染出首屏</li>
<li>seo不友好：爬虫只能拿到一个 div，认为页面是空的，不利于 seo</li>
<li>初次加载耗时多：为实现单页Web应用功能及显示效果，需要在加载页面的时候将 JavaScript、CSS 统一加载，部分页面可以在需要的时候加载，所以必须对 JavaScript 及 CSS 代码进行合并压缩处理，如果使用第三方库，建议使用一些大公司的 CDN，因此带宽的消耗是必然的</li>
</ul>
<p><strong><br></strong>SPA 优点<strong><br></strong></p>
<ul>
<li>良好的交互体验<br>：用户不需要重新刷新页面，获取数据也是通过 Ajax 异步获取，页面显示流畅</li>
<li>良好的前后端工作分离模式：单页 Web 应用可以和 RESTful 规约一起使用，通过 REST API 提供接口数据，并使用 Ajax 异步获取，这样有助于分离客户端和服务器端工作，更进一步，可以在客户端也可以分解为静态页面和页面交互两个部分</li>
<li>减轻服务器压力：服务器只用出数据就可以，不用管展示逻辑和页面合成，吞吐能力会提高几倍</li>
<li>共用一套后端程序代码<br>：不用修改后端程序代码就可以同时用于 Web 界面、手机、平板等多种客户端</li>
</ul>
<p><a name="8cNTQ"></a></p>
<h3 id="改变-URL，页面不刷新"><a href="#改变-URL，页面不刷新" class="headerlink" title="改变 URL，页面不刷新"></a>改变 URL，页面不刷新</h3><p><a name="4GeX0"></a></p>
<h4 id="URL-的-hash"><a href="#URL-的-hash" class="headerlink" title="URL 的 hash"></a>URL 的 hash</h4><p>URL 的 hash 也就是锚点(#)，本质上是改变 window.location 的 href 属性，可以通过直接赋值 location.hash 来改变 href，但是页面不发生刷新</p>
<p><img src="https://cdn.nlark.com/yuque/0/2020/png/335089/1582004833873-2c3ac18e-0ab0-4349-ab77-86719e1a14aa.png#align=left&display=inline&height=209&name=%E5%9B%BE%E7%89%87.png&originHeight=418&originWidth=924&size=36876&status=done&style=none&width=462" alt="图片.png"></p>
<p><a name="0vbtO"></a></p>
<h4 id="HTML5-的-history-模式"><a href="#HTML5-的-history-模式" class="headerlink" title="HTML5 的 history 模式"></a>HTML5 的 history 模式</h4><p>history 接口是 HTML5 新增的，它有五种模式改变 URL 而不刷新页面</p>
<ul>
<li>history.pushState()</li>
</ul>
<p><img src="https://cdn.nlark.com/yuque/0/2020/png/335089/1582005288315-2f1a201f-9e89-4b1d-9245-d5828f7b3428.png#align=left&display=inline&height=216&name=%E5%9B%BE%E7%89%87.png&originHeight=431&originWidth=451&size=18435&status=done&style=none&width=225.5" alt="图片.png"></p>
<ul>
<li>history.replaceState()</li>
<li>history.forward()</li>
<li>history.back()</li>
<li>history.go()</li>
</ul>
<p><img src="https://cdn.nlark.com/yuque/0/2020/png/335089/1582005440598-cefdad41-1fb4-4178-b405-7d5ea668a08a.png#align=left&display=inline&height=400&name=%E5%9B%BE%E7%89%87.png&originHeight=799&originWidth=612&size=46083&status=done&style=none&width=306" alt="图片.png"></p>
<p><a name="41tYK"></a></p>
<h2 id="Vue-router-基本使用"><a href="#Vue-router-基本使用" class="headerlink" title="Vue-router 基本使用"></a>Vue-router 基本使用</h2><p>目前前端流行的三大框架，都有自己的路由实现：</p>
<ul>
<li>Angular：ngRouter</li>
<li>React：ReactRouter</li>
<li>Vue：vue-router</li>
</ul>
<p>vue-router 是 Vue.js 官方的路由插件，它和 vue.js 是深度集成的，适合用于构建单页面应用</p>
<p>vue-router 是基于路由和组件的，路由用于设定访问路径, 将路径和组件映射起来，在 vue-router 的单页面应用中, 页面路径的改变就是组件的切换</p>
<p><a name="1xJAd"></a></p>
<h3 id="安装-vue-router"><a href="#安装-vue-router" class="headerlink" title="安装 vue-router"></a>安装 vue-router</h3><p>直接使用 npm 来安装路由即可</p>
<ol>
<li>安装 vue-router</li>
</ol>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install vue-router --save</span><br></pre></td></tr></table></figure>

<ol start="2">
<li>在模块化工程中使用</li>
</ol>
<p>因为 vue-router 是一个插件，所以可以通过 <code>Vue.use()</code> 来安装路由功能</p>
<ol>
<li>导入路由对象，并且调用 Vue.use(VueRouter)</li>
<li>创建路由实例，并且传入路由映射配置</li>
<li>在 Vue 实例中挂载创建的路由实例</li>
</ol>
<p><a name="ogZzN"></a></p>
<h3 id="使用-vue-router"><a href="#使用-vue-router" class="headerlink" title="使用 vue-router"></a>使用 vue-router</h3><ol>
<li>创建路由组件</li>
</ol>
<ul>
<li>创建 router 实例</li>
</ul>
<p><img src="https://cdn.nlark.com/yuque/0/2020/png/335089/1582008050037-356ad576-cbe0-46d2-9145-5195e75bc290.png#align=left&display=inline&height=451&name=%E5%9B%BE%E7%89%87.png&originHeight=902&originWidth=1112&size=91415&status=done&style=none&width=556" alt="图片.png"></p>
<ul>
<li>挂载到 Vue 实例中</li>
</ul>
<p><img src="https://cdn.nlark.com/yuque/0/2020/png/335089/1582008322840-e53d3ea3-a0fb-4d76-823f-ac278486328b.png#align=left&display=inline&height=448&name=%E5%9B%BE%E7%89%87.png&originHeight=895&originWidth=1032&size=87225&status=done&style=none&width=516" alt="图片.png"></p>
<ol start="2">
<li>配置路由映射: 组件和路径映射关系</li>
</ol>
<ul>
<li>新建两个组件</li>
</ul>
<p><img src="https://cdn.nlark.com/yuque/0/2020/png/335089/1582009386324-b865d78a-c13e-49b4-9ef7-f704c8b3c4d5.png#align=left&display=inline&height=443&name=%E5%9B%BE%E7%89%87.png&originHeight=885&originWidth=1800&size=140567&status=done&style=none&width=900" alt="图片.png"></p>
<ul>
<li>为组件配置路由映射关系</li>
</ul>
<p><img src="https://cdn.nlark.com/yuque/0/2020/png/335089/1582009609319-06ab2850-d796-455f-8ee2-cca267cf78d2.png#align=left&display=inline&height=462&name=%E5%9B%BE%E7%89%87.png&originHeight=923&originWidth=1085&size=112366&status=done&style=none&width=542.5" alt="图片.png"></p>
<ol start="3">
<li>使用路由: 通过<code>&lt;router-link&gt;</code>和<code>&lt;router-view&gt;</code></li>
</ol>
<ul>
<li><code>&lt;router-link&gt;</code>: 该标签是一个 vue-router 中已经内置的组件, 它默认会被渲染成一个 <code>&lt;a&gt;</code> 标签</li>
<li><code>&lt;router-view&gt;</code>: 该标签会根据当前的路径，动态渲染出不同的组件</li>
</ul>
<p><img src="https://cdn.nlark.com/yuque/0/2020/png/335089/1582009832304-fefdc237-7445-4d92-a83b-bbb2780fdbd8.png#align=left&display=inline&height=449&name=%E5%9B%BE%E7%89%87.png&originHeight=897&originWidth=1259&size=111648&status=done&style=none&width=629.5" alt="图片.png"></p>
<p>最终效果如下：</p>
<p><img src="https://cdn.nlark.com/yuque/0/2020/png/335089/1582010079056-7909b2c7-9807-4ef4-91aa-5a1a051e9dc9.png#align=left&display=inline&height=191&name=%E5%9B%BE%E7%89%87.png&originHeight=383&originWidth=1260&size=27331&status=done&style=none&width=630" alt="图片.png"></p>
<p><a name="mMbTF"></a></p>
<h3 id="细节处理"><a href="#细节处理" class="headerlink" title="细节处理"></a>细节处理</h3><p><a name="LTz7n"></a></p>
<h4 id="路由的默认路径"><a href="#路由的默认路径" class="headerlink" title="路由的默认路径"></a>路由的默认路径</h4><p>默认情况下, 进入网站的首页，我们希望 <code>&lt;router-view&gt;</code> 渲染首页的内容，但是在上面的实现中，默认没有显示首页组件，必须让用户点击才可以</p>
<p>如何可以让路径默认跳到到首页，并且<code>&lt;router-view&gt;</code>渲染首页组件呢?</p>
<p>只需要多配置一个映射就可以了：</p>
<p><img src="https://cdn.nlark.com/yuque/0/2020/png/335089/1582010900763-9d1ab04a-b10e-48b5-bd00-1311edad14a2.png#align=left&display=inline&height=187&name=%E5%9B%BE%E7%89%87.png&originHeight=374&originWidth=358&size=15189&status=done&style=none&width=179" alt="图片.png"></p>
<p>我们在 routes 中又配置了一个映射：</p>
<ul>
<li>path：根路径 <code>/</code></li>
<li>redirect：重定向，也就是将根路径重定向到 <code>/home</code> 的路径下</li>
</ul>
<p>这样，打开页面时，就会默认显示首页的内容了<br></p>
<p><a name="0tkSc"></a></p>
<h4 id="HTML5-的-History-模式"><a href="#HTML5-的-History-模式" class="headerlink" title="HTML5 的 History 模式"></a>HTML5 的 History 模式</h4><p>前面说过改变路径的方式有两种：</p>
<ul>
<li>URL 的 hash</li>
<li>HTML5 的 history</li>
</ul>
<p>默认情况下，Vue 路径的改变使用的是 URL 的 hash，这样显示出的页面的地址中有一个 <code>#</code> 号，不太美观：</p>
<p><img src="https://cdn.nlark.com/yuque/0/2020/png/335089/1582011120733-597e742c-a7cc-4faa-8605-b4837388c522.png#align=left&display=inline&height=136&name=%E5%9B%BE%E7%89%87.png&originHeight=271&originWidth=513&size=12460&status=done&style=none&width=256.5" alt="图片.png"></p>
<p>可以使用 HTML5 的 history 模式来进行改变，进行如下配置即可：</p>
<p><img src="https://cdn.nlark.com/yuque/0/2020/png/335089/1582011255018-3d7b1ce9-76bb-48be-b9c9-eaf9b10469bd.png#align=left&display=inline&height=80&name=%E5%9B%BE%E7%89%87.png&originHeight=159&originWidth=382&size=9880&status=done&style=none&width=191" alt="图片.png"></p>
<p><img src="https://cdn.nlark.com/yuque/0/2020/png/335089/1582011237837-aac8bce6-ea55-41c6-a846-12dc0b6e9526.png#align=left&display=inline&height=135&name=%E5%9B%BE%E7%89%87.png&originHeight=270&originWidth=488&size=10892&status=done&style=none&width=244" alt="图片.png"></p>
<p><a name="bK5ZL"></a></p>
<h3 id="router-link-补充"><a href="#router-link-补充" class="headerlink" title="router-link 补充"></a>router-link 补充</h3><p>在前面的 <code>&lt;router-link&gt;</code> 中，我们只是使用了一个属性<code>:to</code>，用于指定跳转的路径</p>
<p><code>&lt;router-link&gt;</code> 还有一些其他属性：</p>
<ul>
<li>tag：tag 可以指定 <code>&lt;router-link&gt;</code> 之后渲染成什么组件，默认是渲染为 <code>&lt;a&gt;&lt;/a&gt;</code> 标签<br></li>
</ul>
<p><img src="https://cdn.nlark.com/yuque/0/2020/png/335089/1582012121688-87862537-1d78-4f67-8b25-8afb49085442.png#align=left&display=inline&height=151&name=%E5%9B%BE%E7%89%87.png&originHeight=302&originWidth=813&size=33285&status=done&style=none&width=406.5" alt="图片.png"></p>
<p><img src="https://cdn.nlark.com/yuque/0/2020/png/335089/1582012138835-87564fd3-fa6c-41c2-a9f4-c1a8109c3681.png#align=left&display=inline&height=133&name=%E5%9B%BE%E7%89%87.png&originHeight=265&originWidth=425&size=11400&status=done&style=none&width=212.5" alt="图片.png"></p>
<ul>
<li>replace: replace 不会留下 history 记录，所以指定 replace 的情况下, 后退键返回不能返回到上一个页面中</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;router-link to=&quot;/home&quot; tag=&quot;button&quot; replace&gt;首页&lt;/router-link&gt;</span><br></pre></td></tr></table></figure>

<ul>
<li>active-class: 当<code>&lt;router-link&gt;</code>对应的路由匹配成功时，会自动给当前元素设置一个 <code>router-link-active</code> 的class</li>
</ul>
<p><img src="https://cdn.nlark.com/yuque/0/2020/png/335089/1582012337882-52d82010-2c2c-4524-b8ac-d274c4291eff.png#align=left&display=inline&height=64&name=%E5%9B%BE%E7%89%87.png&originHeight=127&originWidth=811&size=9172&status=done&style=none&width=405.5" alt="图片.png"></p>
<p>设置 <code>active-class</code> 可以修改默认的名称：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;router-link to=&quot;/home&quot; tag=&quot;button&quot; replace active-class=&quot;active&quot;&gt;首页&lt;/router-link&gt;</span><br></pre></td></tr></table></figure>

<p><img src="https://cdn.nlark.com/yuque/0/2020/png/335089/1582012526889-419e15a9-c555-45db-b778-7e4d954abf47.png#align=left&display=inline&height=62&name=%E5%9B%BE%E7%89%87.png&originHeight=124&originWidth=694&size=8997&status=done&style=none&width=347" alt="图片.png"></p>
<p>在进行高亮显示的导航菜单或者底部 tabbar 时，会使用到该类，比如想设置按钮点击时变为红色：</p>
<p><img src="https://cdn.nlark.com/yuque/0/2020/png/335089/1582012677201-e13633e2-2ca4-40a5-8803-1a98618167e4.png#align=left&display=inline&height=260&name=%E5%9B%BE%E7%89%87.png&originHeight=519&originWidth=814&size=42371&status=done&style=none&width=407" alt="图片.png"></p>
<p><img src="https://cdn.nlark.com/yuque/0/2020/png/335089/1582012688408-2a5a20f7-55c2-4cda-8f62-be194de6dee9.png#align=left&display=inline&height=135&name=%E5%9B%BE%E7%89%87.png&originHeight=270&originWidth=441&size=11894&status=done&style=none&width=220.5" alt="图片.png"></p>
<p>该 class 具体的名称也可以通过 router 实例的属性进行修改：</p>
<p><img src="https://cdn.nlark.com/yuque/0/2020/png/335089/1582012782822-8e96daaa-5cf4-45b5-af89-6946fcd4fda0.png#align=left&display=inline&height=96&name=%E5%9B%BE%E7%89%87.png&originHeight=192&originWidth=443&size=12788&status=done&style=none&width=221.5" alt="图片.png"></p>
<p>但是通常不会修改类的属性, 会直接使用默认的 router-link-active 即可</p>
<p><a name="qOy4M"></a></p>
<h3 id="路由代码跳转"><a href="#路由代码跳转" class="headerlink" title="路由代码跳转"></a><strong>路由代码跳转</strong></h3><p>**<br>有时候，页面的跳转可能需要执行对应的 JavaScript 代码，这个时候，就可以使用第二种跳转方式了<br>比如，我们将代码修改如下:</p>
<p><img src="https://cdn.nlark.com/yuque/0/2020/png/335089/1582013546076-c7a32bd2-64fd-48c1-ad63-b6f8c1896ac5.png#align=left&display=inline&height=399&name=%E5%9B%BE%E7%89%87.png&originHeight=797&originWidth=1379&size=126984&status=done&style=none&width=689.5" alt="图片.png"></p>
<p><a name="2vKfc"></a></p>
<h3 id="动态路由"><a href="#动态路由" class="headerlink" title="动态路由"></a>动态路由</h3><p>在某些情况下，一个页面的 path 路径可能是不确定的，比如我们进入用户界面时，希望是如下的路径：<br><code>/user/aaaa</code> 或 <code>/user/bbbb</code>，除了有前面的 <code>/user</code>之外，后面还跟上了用户的 ID</p>
<p>这种 path 和 Component 的匹配关系，称之为动态路由（也是路由传递数据的一种方式）</p>
<ol>
<li>在 <code>vue-router</code> 的路由路径中使用“动态路径参数”(dynamic segment) ：</li>
</ol>
<p><img src="https://cdn.nlark.com/yuque/0/2020/png/335089/1582017769318-3808513e-7fd0-4fb4-b57f-c4f42ab7eeed.png#align=left&display=inline&height=320&name=%E5%9B%BE%E7%89%87.png&originHeight=640&originWidth=715&size=44216&status=done&style=none&width=357.5" alt="图片.png"></p>
<ol start="2">
<li>在组件中手动绑定一个用户 ID：</li>
</ol>
<p><img src="https://cdn.nlark.com/yuque/0/2020/png/335089/1582018151757-b73ed16b-1c3b-4a94-ad73-f351793df7d2.png#align=left&display=inline&height=316&name=%E5%9B%BE%E7%89%87.png&originHeight=632&originWidth=887&size=69314&status=done&style=none&width=443.5" alt="图片.png"></p>
<ol start="3">
<li>更新 <code>User</code> 的模板，输出当前用户的 ID：</li>
</ol>
<p><img src="https://cdn.nlark.com/yuque/0/2020/png/335089/1582017894093-3ca81076-b6c3-4e02-8ab0-493c6f997591.png#align=left&display=inline&height=149&name=%E5%9B%BE%E7%89%87.png&originHeight=297&originWidth=665&size=31640&status=done&style=none&width=332.5" alt="图片.png"></p>
<ol start="4">
<li>查看显示效果：</li>
</ol>
<p><img src="https://cdn.nlark.com/yuque/0/2020/png/335089/1582017931254-34890aef-b389-4179-a5ad-493f7e1d1f51.png#align=left&display=inline&height=160&name=%E5%9B%BE%E7%89%87.png&originHeight=320&originWidth=456&size=13258&status=done&style=none&width=228" alt="图片.png"></p>
<p><a name="x1fQW"></a></p>
<h3 id="路由的懒加载"><a href="#路由的懒加载" class="headerlink" title="路由的懒加载"></a>路由的懒加载</h3><p><a name="dznHk"></a></p>
<h4 id="认识路由的懒加载"><a href="#认识路由的懒加载" class="headerlink" title="认识路由的懒加载"></a>认识路由的懒加载</h4><p>当打包构建应用时，Javascript 包会变得非常大，影响页面加载，如果我们能把不同路由对应的组件分割成不同的代码块，然后当路由被访问的时候才加载对应组件，这样就更加高效了</p>
<p>为了实现这种效果，我们可以使用路由的懒加载</p>
<p>路由懒加载的主要作用就是将路由对应的组件打包成一个个的 js 代码块，只有在这个路由被访问到的时候，才加载对应的组件</p>
<p><a name="cRiiI"></a></p>
<h4 id="懒加载的三种方式"><a href="#懒加载的三种方式" class="headerlink" title="懒加载的三种方式"></a>懒加载的三种方式</h4><ol>
<li>结合 Vue 的异步组件和 Webpack 的代码分析</li>
</ol>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> Home = <span class="function"><span class="params">resolve</span> =&gt;</span> &#123; <span class="built_in">require</span>.ensure([<span class="string">'../components/Home.vue'</span>], () =&gt; &#123; resolve(<span class="built_in">require</span>(<span class="string">'../components/Home.vue'</span>)) &#125;)&#125;;</span><br></pre></td></tr></table></figure>

<ol start="2">
<li>AMD 写法</li>
</ol>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> About = <span class="function"><span class="params">resolve</span> =&gt;</span> <span class="built_in">require</span>([<span class="string">'../components/About.vue'</span>], resolve);</span><br></pre></td></tr></table></figure>

<ol start="3">
<li>在ES6中，可以用更加简单的写法来组织 Vue 异步组件和 Webpack 的代码分割</li>
</ol>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> Home = <span class="function"><span class="params">()</span> =&gt;</span> <span class="keyword">import</span>(<span class="string">'../components/Home.vue'</span>)</span><br></pre></td></tr></table></figure>

<p><strong>路由懒加载的效果</strong><br><strong><br></strong><img src="https://cdn.nlark.com/yuque/0/2020/png/335089/1582089079669-bc7d3fe7-be9c-4b82-8ed0-aeae36df29b8.png#align=left&display=inline&height=464&name=%E5%9B%BE%E7%89%87.png&originHeight=927&originWidth=1839&size=371984&status=done&style=none&width=919.5" alt="图片.png">**</p>
<p><a name="d7HnR"></a></p>
<h2 id="Vue-router-嵌套路由"><a href="#Vue-router-嵌套路由" class="headerlink" title="Vue-router 嵌套路由"></a>Vue-router 嵌套路由</h2><p>嵌套路由是一个很常见的功能<br>，比如在 home 页面中，我们希望通过 <code>/home/news</code> 和 <code>/home/message</code> 访问一些内容，一个路径映射一个组件，访问这两个路径也会分别渲染两个组件</p>
<p>路径和组件的关系如下:</p>
<p><img src="https://cdn.nlark.com/yuque/0/2020/png/335089/1582089942199-7fa71333-4367-41aa-be85-43b759288799.png#align=left&display=inline&height=222&name=%E5%9B%BE%E7%89%87.png&originHeight=360&originWidth=370&size=48149&status=done&style=none&width=228" alt="图片.png"></p>
<p>实现嵌套路由有两个步骤：</p>
<ol>
<li>创建对应的子组件，并且在路由映射中配置对应的子路由</li>
</ol>
<ul>
<li>定义两个子组件</li>
</ul>
<p><img src="https://cdn.nlark.com/yuque/0/2020/png/335089/1582090298638-2e12641f-e596-499e-891e-655a09638fc5.png#align=left&display=inline&height=453&name=%E5%9B%BE%E7%89%87.png&originHeight=906&originWidth=1824&size=153380&status=done&style=none&width=912" alt="图片.png"></p>
<ul>
<li>配置子组件的路由</li>
</ul>
<p><img src="https://cdn.nlark.com/yuque/0/2020/png/335089/1582090907257-0f46231c-62c0-4a9d-8aba-d2a7084ff8c5.png#align=left&display=inline&height=484&name=%E5%9B%BE%E7%89%87.png&originHeight=967&originWidth=781&size=89155&status=done&style=none&width=390.5" alt="图片.png"></p>
<ul>
<li>配置嵌套路由的默认路径<br></li>
</ul>
<p><img src="https://cdn.nlark.com/yuque/0/2020/png/335089/1582091066609-26b83948-1d11-498d-a281-2206861b743e.png#align=left&display=inline&height=275&name=%E5%9B%BE%E7%89%87.png&originHeight=550&originWidth=512&size=26160&status=done&style=none&width=256" alt="图片.png"></p>
<ol start="2">
<li>在父组件内部显示子组件<br></li>
</ol>
<p><img src="https://cdn.nlark.com/yuque/0/2020/png/335089/1582091148250-6ff19d1f-1969-49a3-8a12-c7841005cb7b.png#align=left&display=inline&height=179&name=%E5%9B%BE%E7%89%87.png&originHeight=357&originWidth=756&size=42268&status=done&style=none&width=378" alt="图片.png"></p>
<ol start="3">
<li>查看显示效果</li>
</ol>
<p><img src="https://cdn.nlark.com/yuque/0/2020/png/335089/1582091301195-082bdccc-efaf-4f96-abb9-6ce0452bee20.png#align=left&display=inline&height=241&name=%E5%9B%BE%E7%89%87.png&originHeight=481&originWidth=977&size=40396&status=done&style=none&width=488.5" alt="图片.png"><br><br><a name="AiSOD"></a></p>
<h2 id="Vue-router-参数传递"><a href="#Vue-router-参数传递" class="headerlink" title="Vue-router 参数传递"></a>Vue-router 参数传递</h2><p><a name="E7YLf"></a></p>
<h3 id="准备工作"><a href="#准备工作" class="headerlink" title="准备工作"></a>准备工作</h3><p>为了演示传递参数，再创建一个组件，并且将其配置好</p>
<ol>
<li>创建新的组件 Profile.vue</li>
</ol>
<p><img src="https://cdn.nlark.com/yuque/0/2020/png/335089/1582093327545-c83c7bac-cfc4-40a5-a7dd-e28bbfe2a9cc.png#align=left&display=inline&height=339&name=%E5%9B%BE%E7%89%87.png&originHeight=678&originWidth=1064&size=86251&status=done&style=none&width=532" alt="图片.png"></p>
<ol start="2">
<li>配置路由映射</li>
</ol>
<p><img src="https://cdn.nlark.com/yuque/0/2020/png/335089/1582093378275-24f6b3c4-6f2a-41d8-b949-6571b9a7c6da.png#align=left&display=inline&height=469&name=%E5%9B%BE%E7%89%87.png&originHeight=937&originWidth=1181&size=140880&status=done&style=none&width=590.5" alt="图片.png"></p>
<ol start="3">
<li>添加跳转的<code>&lt;router-link&gt;</code></li>
</ol>
<p><img src="https://cdn.nlark.com/yuque/0/2020/png/335089/1582093437718-f681ed59-2b7b-4fea-910f-25da22396c17.png#align=left&display=inline&height=177&name=%E5%9B%BE%E7%89%87.png&originHeight=353&originWidth=1000&size=50030&status=done&style=none&width=500" alt="图片.png"></p>
<p><a name="uMrvv"></a></p>
<h3 id="传递参数的方式"><a href="#传递参数的方式" class="headerlink" title="传递参数的方式"></a>传递参数的方式</h3><p>传递参数主要有两种类型: params 和 query</p>
<ul>
<li><p>params</p>
<ul>
<li>配置路由格式：<code>/router/:id</code></li>
<li>传递的方式：在 path 后面跟上对应的值</li>
<li>传递后形成的路径：<code>/router/123</code>，<code>/router/abc</code></li>
</ul>
</li>
<li><p>query</p>
<ul>
<li>配置路由格式：<code>/router</code></li>
<li>传递的方式：对象中使用 query 的 key 作为传递方式</li>
<li>传递后形成的路径：<code>/router?id=123</code>，<code>/router?id=abc</code></li>
</ul>
</li>
</ul>
<p><img src="https://cdn.nlark.com/yuque/0/2020/png/335089/1582093699105-4705164a-3d9a-4fae-8775-445e69ea5e5b.png#align=left&display=inline&height=415&name=%E5%9B%BE%E7%89%87.png&originHeight=829&originWidth=1081&size=88419&status=done&style=none&width=540.5" alt="图片.png"></p>
<p><img src="https://cdn.nlark.com/yuque/0/2020/png/335089/1582093722754-2ea7219e-49b7-4d77-8011-1f609c9f8ad3.png#align=left&display=inline&height=166&name=%E5%9B%BE%E7%89%87.png&originHeight=331&originWidth=738&size=38090&status=done&style=none&width=369" alt="图片.png"></p>
<p><img src="https://cdn.nlark.com/yuque/0/2020/png/335089/1582093755280-86131e1b-a81b-45f9-aa70-d687c0e8efee.png#align=left&display=inline&height=189&name=%E5%9B%BE%E7%89%87.png&originHeight=377&originWidth=801&size=17171&status=done&style=none&width=400.5" alt="图片.png"><br><strong>获取参数</strong><br>**<br>获取参数是通过 <em>route</em> 对象获取的，在使用了 <em>vue_−_router</em> 的应用中，路由对象会被注入每个组件中，赋值为_ <em>`</em>this_.route` ，并且当路由切换时，路由对象会被更新</p>
<p><strong>route 和 router 的区别</strong><br>_</p>
<ul>
<li><em>router</em> 为_ VueRouter <em>实例，想要导航到不同</em> URL_，则使用 <code>router.push</code> 方法</li>
<li>$route 为当前 router 跳转对象，里面可以获取 name、path、query、params 等</li>
</ul>
<p><a name="Lw8Dx"></a></p>
<h2 id="Vue-router-导航守卫"><a href="#Vue-router-导航守卫" class="headerlink" title="Vue-router 导航守卫"></a>Vue-router 导航守卫</h2><p>在一个 SPA 应用中，如何改变网页的标题呢？</p>
<p>普通的修改方式：在每一个路由对应的组件 <code>.vue</code> 文件中，通过 mounted 声明周期函数，执行对应的代码进行修改</p>
<p>但是当页面比较多时，需要在多个页面执行类似的代码，所以这种方式不容易维护</p>
<p>更好的办法是使用导航守卫</p>
<p><a name="Vbv8i"></a></p>
<h3 id="什么是导航守卫"><a href="#什么是导航守卫" class="headerlink" title="什么是导航守卫"></a>什么是导航守卫</h3><p>导航守卫主要用来监听路由的进入和离开，vue-router 提供了 beforeEach 和 afterEach 的钩子函数，它们会在路由即将改变前和改变后触发</p>
<p><a name="lSyqP"></a></p>
<h3 id="导航守卫使用"><a href="#导航守卫使用" class="headerlink" title="导航守卫使用"></a>导航守卫使用</h3><p>我们可以利用 beforeEach 来完成标题的修改：</p>
<ol>
<li>在钩子当中利用 meta 来定义标题</li>
</ol>
<p><img src="https://cdn.nlark.com/yuque/0/2020/png/335089/1582110111670-bcd8a09a-0fc1-472f-ba3b-b4c3ba9562be.png#align=left&display=inline&height=421&name=%E5%9B%BE%E7%89%87.png&originHeight=841&originWidth=601&size=51628&status=done&style=none&width=300.5" alt="图片.png"></p>
<ol start="2">
<li>利用导航守卫，修改标题</li>
</ol>
<p><img src="https://cdn.nlark.com/yuque/0/2020/png/335089/1582110480182-658246e7-9404-4aa9-b161-8eeeee565ee0.png#align=left&display=inline&height=265&name=%E5%9B%BE%E7%89%87.png&originHeight=530&originWidth=779&size=43919&status=done&style=none&width=389.5" alt="图片.png"></p>
<ol start="3">
<li>查看修改效果</li>
</ol>
<p><img src="https://cdn.nlark.com/yuque/0/2020/png/335089/1582110669600-4abc9e8b-5036-4af9-bba1-59bfdff69203.png#align=left&display=inline&height=227&name=%E5%9B%BE%E7%89%87.png&originHeight=454&originWidth=1660&size=49365&status=done&style=none&width=830" alt="图片.png"></p>
<p><a name="dxRPO"></a></p>
<h3 id="导航钩子的三个参数解析"><a href="#导航钩子的三个参数解析" class="headerlink" title="导航钩子的三个参数解析"></a>导航钩子的三个参数解析</h3><ul>
<li>to: 即将要进入的目标的路由对象</li>
<li>from: 当前导航即将要离开的路由对象</li>
<li>next: 调用该方法后，才能进入下一个钩子</li>
</ul>
<p><a name="GGmAa"></a></p>
<h3 id="导航守卫补充"><a href="#导航守卫补充" class="headerlink" title="导航守卫补充"></a>导航守卫补充</h3><ul>
<li>如果是后置钩子，也就是afterEach，不需要主动调用 next() 函数</li>
<li>上面使用的导航守卫，被称之为全局守卫，除此之外，还有路由独享的守卫、组件内的守卫</li>
</ul>
<p><a name="4PPiQ"></a></p>
<h2 id="keep-alive"><a href="#keep-alive" class="headerlink" title="keep-alive"></a>keep-alive<br></h2><p>keep-alive 是 Vue 内置的一个组件，可以使被包含的组件保留状态，或避免重新渲染</p>
<p>router-view 也是一个组件，如果直接被包在 keep-alive 里面，所有路径匹配到的视图组件都会被缓存：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;keep-alive&gt;</span><br><span class="line">  &lt;router-view&gt;</span><br><span class="line">    &lt;!-- 所有路径匹配到的试图组件都会被缓存！ --&gt;</span><br><span class="line">  &lt;/router-view&gt;</span><br><span class="line">&lt;/keep-alive&gt;</span><br></pre></td></tr></table></figure>

<p>现在有这样一个需求：首页正正在显示的是被嵌套的消息路由，当我们点击其他页面，又重新点击首页时，让首页仍然显示被嵌套的消息路由</p>
<p><img src="https://cdn.nlark.com/yuque/0/2020/png/335089/1582118488171-5efdf936-7362-4d46-885a-75c55dd804df.png#align=left&display=inline&height=253&name=%E5%9B%BE%E7%89%87.png&originHeight=506&originWidth=1569&size=65787&status=done&style=none&width=784.5" alt="图片.png"></p>
<ol>
<li>先取消嵌套路由的默认路径<br></li>
</ol>
<p><img src="https://cdn.nlark.com/yuque/0/2020/png/335089/1582118538781-95301643-5538-46f6-8d53-7a3d37acc412.png#align=left&display=inline&height=347&name=%E5%9B%BE%E7%89%87.png&originHeight=693&originWidth=672&size=46073&status=done&style=none&width=336" alt="图片.png"></p>
<ol start="2">
<li>在 App.vue 中使用 <code>&lt;keep-alive&gt;&lt;/keep-alive&gt;</code> 包裹 <code>&lt;router-view/&gt;</code></li>
</ol>
<p><img src="https://cdn.nlark.com/yuque/0/2020/png/335089/1582118555670-5b389542-a9c3-4ace-a9b3-d9e3dccc9c62.png#align=left&display=inline&height=191&name=%E5%9B%BE%E7%89%87.png&originHeight=382&originWidth=1071&size=58213&status=done&style=none&width=535.5" alt="图片.png"></p>
<ol start="3">
<li>在 Home.vue 中记录离开之前的路径<br></li>
</ol>
<p><img src="https://cdn.nlark.com/yuque/0/2020/png/335089/1582118584898-331a2182-3a2b-41a8-b3e9-e7b216f3145e.png#align=left&display=inline&height=288&name=%E5%9B%BE%E7%89%87.png&originHeight=575&originWidth=732&size=46428&status=done&style=none&width=366" alt="图片.png"></p>
<p>keep-alive 还有两个非常重要的属性:</p>
<ul>
<li>include - 字符串或正则表达，只有匹配的组件会被缓存</li>
<li>exclude - 字符串或正则表达式，任何匹配的组件都不会被缓存</li>
</ul>
<p>让部分组件不缓存：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;keep-alive exclude=&quot;Profile,User&quot;&gt;&lt;router-view/&gt;&lt;/keep-alive&gt;</span><br></pre></td></tr></table></figure>

<p><a name="h47WF"></a></p>
<h1 id="Vuex"><a href="#Vuex" class="headerlink" title="Vuex"></a>Vuex</h1><p><a name="yYUN3"></a></p>
<h2 id="认识-Vuex"><a href="#认识-Vuex" class="headerlink" title="认识 Vuex"></a>认识 Vuex</h2><p><a name="hV24g"></a></p>
<h3 id="什么是-Vuex"><a href="#什么是-Vuex" class="headerlink" title="什么是 Vuex"></a>什么是 Vuex</h3><blockquote>
<p>Vuex 是一个专为 Vue.js 应用程序开发的状态管理模式</p>
</blockquote>
<ul>
<li>Vuex 采用集中式存储管理应用的所有组件的状态，并以相应的规则保证状态以一种可预测的方式发生变化</li>
<li>Vuex 也集成到 Vue 的官方调试工具 devtools extension，提供了诸如零配置的 time-travel 调试、状态快照导入导出等高级调试功能</li>
</ul>
<p><a name="pTd3k"></a></p>
<h3 id="状态管理"><a href="#状态管理" class="headerlink" title="状态管理"></a>状态管理</h3><p><a name="L8YXx"></a></p>
<h4 id="什么是状态管理"><a href="#什么是状态管理" class="headerlink" title="什么是状态管理"></a>什么是状态管理</h4><p>简单理解：把需要多个组件共享的变量全部存储在一个对象里面，然后将这个对象放在顶层的 Vue 实例中，让其他组件可以使用，共享这个对象中的所有变量属性，并且是响应式的</p>
<p><a name="z9feg"></a></p>
<h4 id="管理什么状态"><a href="#管理什么状态" class="headerlink" title="管理什么状态"></a>管理什么状态</h4><ul>
<li>用户的登录状态、用户名称、头像、地理位置信息等</li>
<li>商品的收藏、购物车中的物品等</li>
</ul>
<p><a name="Jzi9P"></a></p>
<h4 id="单界面的状态管理"><a href="#单界面的状态管理" class="headerlink" title="单界面的状态管理"></a>单界面的状态管理</h4><p>在单个组件中进行状态管理是一件非常简单的事情，如图：</p>
<p><img src="https://cdn.nlark.com/yuque/0/2020/png/335089/1582268075935-f55da969-5ca7-4166-ae57-b1dd95054979.png#align=left&display=inline&height=219&name=%E5%9B%BE%E7%89%87.png&originHeight=438&originWidth=501&size=31952&status=done&style=none&width=250.5" alt="图片.png"></p>
<ul>
<li>State：状态（姑且可以当做是 data 中的属性）</li>
<li>View：视图层，可以针对 State 的变化，显示不同的信息</li>
<li>Actions：用户的各种操作：点击、输入等，会导致状态的改变</li>
</ul>
<p><strong>单界面状态管理的实现</strong></p>
<p><img src="https://cdn.nlark.com/yuque/0/2020/png/335089/1582271299552-6dd812be-aa80-4057-b615-f13a7eba2c10.png#align=left&display=inline&height=352&name=%E5%9B%BE%E7%89%87.png&originHeight=703&originWidth=1264&size=124145&status=done&style=none&width=632" alt="图片.png"></p>
<p>在这个案例中：</p>
<ul>
<li>counter 需要某种方式被记录下来，也就是 State</li>
<li>counter 目前的值需要被显示在界面中，也就是我们的 View</li>
<li>界面发生某些操作时（这里是用户的点击，也可以是用户的 input），需要去更新状态，也就是 Actions</li>
</ul>
<p><a name="8abaN"></a></p>
<h4 id="多界面状态管理"><a href="#多界面状态管理" class="headerlink" title="多界面状态管理"></a>多界面状态管理</h4><p>Vue 已经帮我们做好了单个界面的状态管理，但是如果是多个界面呢？</p>
<p>多个视图都依赖同一个状态（一个状态改了，多个界面需要进行更新）</p>
<p>全局单例模式（大管家）</p>
<p>现在要做的就是将共享的状态抽取出来，交给大管家统一进行管理，之后每个试图按照规定进行访问和修改等操作，这就是 Vuex 的基本思想</p>
<p>Vuex 状态管理图例</p>
<p><img src="https://cdn.nlark.com/yuque/0/2020/png/335089/1582271824071-2b4b9f3f-afd3-46a6-b982-20347c4cd66d.png#align=left&display=inline&height=306&name=%E5%9B%BE%E7%89%87.png&originHeight=562&originWidth=745&size=66699&status=done&style=none&width=406" alt="图片.png"></p>
<p><a name="wlE0n"></a></p>
<h3 id="Vuex-的基本使用"><a href="#Vuex-的基本使用" class="headerlink" title="Vuex 的基本使用"></a>Vuex 的基本使用</h3><p><strong>简单的案例</strong><br>**<br>还是实现一下之前简单的案例：</p>
<p><img src="https://cdn.nlark.com/yuque/0/2020/png/335089/1582271915595-6cd5c146-e5a2-4098-8e98-bb19c37c166f.png#align=left&display=inline&height=68&name=%E5%9B%BE%E7%89%87.png&originHeight=135&originWidth=285&size=3596&status=done&style=none&width=142.5" alt="图片.png"></p>
<p>首先，我们需要在某个地方存放我们的 Vuex 代码：</p>
<ul>
<li>安装 Vuex：<code>npm i vuex --save</code></li>
<li>创建一个文件夹 store，并且在其中创建一个 index.js 文件</li>
</ul>
<p><img src="https://cdn.nlark.com/yuque/0/2020/png/335089/1582272179678-30d39d12-958b-48f8-91f5-ef3caacbd4f7.png#align=left&display=inline&height=200&name=%E5%9B%BE%E7%89%87.png&originHeight=399&originWidth=483&size=15010&status=done&style=none&width=241.5" alt="图片.png"></p>
<ul>
<li>在 index.js 文件中写入如下代码</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> Vue <span class="keyword">from</span> <span class="string">'vue'</span></span><br><span class="line"><span class="keyword">import</span> Vuex <span class="keyword">from</span> <span class="string">'vuex'</span></span><br><span class="line"></span><br><span class="line">vue.use(Vuex)</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> store = <span class="keyword">new</span> Vuex.Store(&#123;</span><br><span class="line">    state: &#123;</span><br><span class="line">        count: <span class="number">0</span></span><br><span class="line">    &#125;,</span><br><span class="line">    mutations: &#123;</span><br><span class="line">        increment(state) &#123;</span><br><span class="line">            state.count++</span><br><span class="line">        &#125;,</span><br><span class="line">        decrement(state) &#123;</span><br><span class="line">            state.count--</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> store</span><br></pre></td></tr></table></figure>

<p><strong>挂载到 Vue 实例中</strong><br>**<br>其次，我们让所有的 Vue 组件都可以使用这个 store 对象</p>
<p>来到 main.js 文件，导入 store 对象，并且放在 <code>new Vue</code> 中：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> Vue <span class="keyword">from</span> <span class="string">'vue'</span></span><br><span class="line"><span class="keyword">import</span> App <span class="keyword">from</span> <span class="string">'./App'</span></span><br><span class="line"><span class="keyword">import</span> router <span class="keyword">from</span> <span class="string">'./router'</span></span><br><span class="line"><span class="keyword">import</span> store <span class="keyword">from</span> <span class="string">'./store'</span></span><br><span class="line"></span><br><span class="line">Vue.config.productionTip = <span class="literal">false</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">new</span> Vue(&#123;</span><br><span class="line">    el: <span class="string">'#app'</span>,</span><br><span class="line">    router,</span><br><span class="line">    store,</span><br><span class="line">    render: <span class="function"><span class="params">h</span> =&gt;</span> h(App)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<p>此后，在其他 Vue 组件中，可以通过 <code>this.$store</code> 的方式，获取到 store 对象</p>
<p><strong>使用 Vuex 的 count</strong><br>**</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div class=&quot;test&quot;&gt;</span><br><span class="line">    &lt;h2&gt;当前计数：&#123;&#123;count&#125;&#125;&lt;/h2&gt;</span><br><span class="line">    &lt;button @click=&quot;increment&quot;&gt;+&lt;/button&gt;</span><br><span class="line">    &lt;button @click=&quot;decrement&quot;&gt;-&lt;/button&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">export default &#123;</span><br><span class="line">  name: &apos;Test&apos;,</span><br><span class="line">  computed:&#123;</span><br><span class="line">    count()&#123;</span><br><span class="line">      return this.$store.state.count</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  methods:&#123;</span><br><span class="line">    increment()&#123;</span><br><span class="line">      this.$store.commit(&apos;increment&apos;)</span><br><span class="line">    &#125;,</span><br><span class="line">    decrement()&#123;</span><br><span class="line">      this.$store.commit(&apos;decrement&apos;)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line">&lt;style scoped&gt;</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure>

<p>**<br>这就是使用 Vuex 最简单的方式了：</p>
<ol>
<li>提取出一个公共的 store 对象，用于保存在多个组件中共享的状态</li>
<li>将 store 对象放置在 new Vue 对象中，这样可以保证在所有的组件中都可以使用到</li>
<li>在其他组件中使用 store 对象中保存的状态即可<ol>
<li>通过 <code>this.$store.state.属性</code> 的方式来访问状态</li>
<li>通过 <code>this.$store.commit(‘Mutations中方法’)</code> 来修改状态</li>
</ol>
</li>
</ol>
<p>注意事项：<br>我们通过提交 Mutations 的方式，而非直接改变 <code>store.state.count</code> ，这是因为 Vuex 可以更明确的追踪状态的变化，所以不要直接改变 <code>store.state.count</code> 的值。<br>**<br><a name="xRkbQ"></a></p>
<h2 id="Vuex-核心概念"><a href="#Vuex-核心概念" class="headerlink" title="Vuex 核心概念"></a>Vuex 核心概念</h2><p><a name="KF8EJ"></a></p>
<h3 id="State-单一状态树"><a href="#State-单一状态树" class="headerlink" title="State 单一状态树"></a>State 单一状态树</h3><p>Vuex 提出使用单一状态树（Single Source of Truth），也可以翻译成单一数据源</p>
<p>如果状态信息是保存到多个 Store 对象中的，那么之后的管理和维护等等都会变得特别困难，所以 Vuex 使用了单一状态树来管理应用层级的全部状态</p>
<p>单一状态树能够让我们以最直接的方式找到某个状态的片段，而且在之后的维护和调试过程中，也可以非常方便的管理和维护</p>
<p><a name="kgf7M"></a></p>
<h3 id="Getters"><a href="#Getters" class="headerlink" title="Getters"></a>Getters</h3><p>有时候，我们需要从 store 中获取一些 state 变异后的状态，则可以使用 getters</p>
<p><a name="U3rek"></a></p>
<h4 id="Getters-基本使用"><a href="#Getters-基本使用" class="headerlink" title="Getters 基本使用"></a>Getters 基本使用</h4><p>比如，现在 Store 中有这样的学生信息：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> store = <span class="keyword">new</span> Vuex.Store(&#123;</span><br><span class="line">    state: &#123;</span><br><span class="line">        count: <span class="number">0</span>,</span><br><span class="line">        students: [</span><br><span class="line">            &#123; <span class="attr">id</span>: <span class="number">1001</span>, <span class="attr">name</span>: <span class="string">'lyy'</span>, <span class="attr">age</span>: <span class="number">18</span> &#125;,</span><br><span class="line">            &#123; <span class="attr">id</span>: <span class="number">1002</span>, <span class="attr">name</span>: <span class="string">'sss'</span>, <span class="attr">age</span>: <span class="number">17</span> &#125;,</span><br><span class="line">            &#123; <span class="attr">id</span>: <span class="number">1003</span>, <span class="attr">name</span>: <span class="string">'lin'</span>, <span class="attr">age</span>: <span class="number">28</span> &#125;,</span><br><span class="line">          	&#123; <span class="attr">id</span>: <span class="number">1004</span>, <span class="attr">name</span>: <span class="string">'jack'</span>, <span class="attr">age</span>: <span class="number">24</span> &#125;</span><br><span class="line">        ]</span><br><span class="line">    &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<p>现要求获取年龄小于20的学生个数，可以在 Store 中定义 getters：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">getters: &#123;</span><br><span class="line">  <span class="comment">// 获取年龄小于20的学生人数</span></span><br><span class="line">  getAgeLess20Count(state) &#123; </span><br><span class="line">    <span class="keyword">return</span> state.students.filter(<span class="function"><span class="params">s</span> =&gt;</span> s.age &lt; <span class="number">20</span>).length</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>**<br>之后，在各个组件中想要使用这个 getters，只需要：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div id=&quot;app&quot;&gt;</span><br><span class="line">    &lt;h3&gt;&#123;&#123;this.$store.getters.getAgeLess20Count&#125;&#125;&lt;/h3&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br></pre></td></tr></table></figure>

<p><a name="nBPwT"></a></p>
<h4 id="Getters-作为参数"><a href="#Getters-作为参数" class="headerlink" title="Getters 作为参数"></a>Getters 作为参数</h4><p>**如果我们已经有了一个获取所有年龄小于20岁学生列表的 getters，那么可以这样来写：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">getters: &#123;</span><br><span class="line">  <span class="comment">// 获取年龄小于20的学生</span></span><br><span class="line">  getAgeLess20(state) &#123;</span><br><span class="line">    <span class="keyword">return</span> state.students.filter(<span class="function"><span class="params">s</span> =&gt;</span> s.age &lt; <span class="number">20</span>)</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="comment">// 获取年龄小于20的学生人数</span></span><br><span class="line">  getAgeLess20Count(state, getters) &#123;</span><br><span class="line">    <span class="keyword">return</span> getters.getAgeLess20.length</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><a name="VN4IK"></a></p>
<h4 id="Getters-传递参数"><a href="#Getters-传递参数" class="headerlink" title="Getters 传递参数"></a>Getters 传递参数</h4><p>**<br>getters 默认是不能传递参数的，如果希望传递参数，那么只能让 getters 本身返回另一个函数</p>
<p>比如上面的案例中，我们希望根据 ID 获取用户的信息：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">getters: &#123;</span><br><span class="line">  <span class="comment">// 根据id查找学生</span></span><br><span class="line">  getStuByID(state) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="function"><span class="params">id</span> =&gt;</span> state.students.find(<span class="function"><span class="params">s</span> =&gt;</span> s.id === id)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>**<br>在组件中使用：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div id=&quot;app&quot;&gt;</span><br><span class="line">    &lt;h3&gt;&#123;&#123;this.$store.getters.getStuByID(1002)&#125;&#125;&lt;/h3&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br></pre></td></tr></table></figure>

<p><strong><br></strong><img src="https://cdn.nlark.com/yuque/0/2020/png/335089/1582347932353-cbac965a-8238-4eea-994d-c47638ef5cfe.png#align=left&display=inline&height=41&name=%E5%9B%BE%E7%89%87.png&originHeight=82&originWidth=524&size=5136&status=done&style=none&width=262" alt="图片.png"><strong><br></strong><br><a name="hWGjg"></a></p>
<h3 id="Mutations-状态更新"><a href="#Mutations-状态更新" class="headerlink" title="Mutations 状态更新"></a>Mutations 状态更新</h3><p>Vuex 的 store 状态的更新唯一方式：提交 Mutations</p>
<p><a name="Jh0Px"></a></p>
<h4 id="Mutations-组成"><a href="#Mutations-组成" class="headerlink" title="Mutations 组成"></a>Mutations 组成</h4><p>**</p>
<ul>
<li>字符串的事件类型（type）</li>
<li>一个回调函数（handler），该回调函数的第一个参数就是 state</li>
</ul>
<p><a name="VzAV8"></a></p>
<h4 id="Mutations-的定义方式"><a href="#Mutations-的定义方式" class="headerlink" title="Mutations 的定义方式"></a>Mutations 的定义方式</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">mutations: &#123;</span><br><span class="line">  increment(state) &#123;</span><br><span class="line">    state.count++</span><br><span class="line">  &#125;,</span><br><span class="line">    decrement(state) &#123;</span><br><span class="line">      state.count--</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>通过 Mutations 更新</strong></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">methods:&#123;</span><br><span class="line">  increment()&#123;</span><br><span class="line">    <span class="keyword">this</span>.$store.commit(<span class="string">'increment'</span>)</span><br><span class="line">  &#125;,</span><br><span class="line">  decrement()&#123;</span><br><span class="line">    <span class="keyword">this</span>.$store.commit(<span class="string">'decrement'</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><a name="s50vw"></a></p>
<h4 id="Mutations-传递参数"><a href="#Mutations-传递参数" class="headerlink" title="Mutations 传递参数"></a>Mutations 传递参数</h4><p>在通过 Mutations 更新数据的时候，有时候希望携带一些额外的参数，这种参数被称为 Mutations 的载荷(Payload)</p>
<p>比如之前的计数器案例，每次都是加减 1 ，现在想让加减的数字作为一个参数，传到 Mutations 的方法中：<br></p>
<p><img src="https://cdn.nlark.com/yuque/0/2020/png/335089/1582349982391-5c172deb-116e-4092-b1c5-7402194bdb6b.png#align=left&display=inline&height=63&name=%E5%9B%BE%E7%89%87.png&originHeight=125&originWidth=274&size=4132&status=done&style=none&width=137" alt="图片.png"></p>
<p><img src="https://cdn.nlark.com/yuque/0/2020/png/335089/1582349947884-a915c9d8-0135-4c7a-91aa-e9ea4cc3d665.png#align=left&display=inline&height=423&name=%E5%9B%BE%E7%89%87.png&originHeight=847&originWidth=1451&size=140903&status=done&style=none&width=725.5" alt="图片.png"></p>
<p>如果有很多参数需要传递，通常会以对象的形式传递，也就是 payload 是一个对象，再从对象中取出相关的信息</p>
<p><img src="https://cdn.nlark.com/yuque/0/2020/png/335089/1582349027675-8191a3cf-22a4-4349-ab5d-95f0920b1c77.png#align=left&display=inline&height=95&name=%E5%9B%BE%E7%89%87.png&originHeight=138&originWidth=1025&size=45385&status=done&style=none&width=706" alt="图片.png"></p>
<p><a name="Ejchv"></a></p>
<h4 id="Mutations-提交风格"><a href="#Mutations-提交风格" class="headerlink" title="Mutations 提交风格"></a>Mutations 提交风格</h4><p>上面的通过 commit 进行提交是一种普通的方式<br>Vue 还提供了另外一种风格, 它是一个包含 type 属性的对象</p>
<p><img src="https://cdn.nlark.com/yuque/0/2020/png/335089/1582351555657-24c5e67d-93b3-4651-9644-4cc24695feb6.png#align=left&display=inline&height=91&name=%E5%9B%BE%E7%89%87.png&originHeight=181&originWidth=601&size=23503&status=done&style=none&width=300.5" alt="图片.png"></p>
<p>Mutations 中的处理方式是将整个 commit 的对象作为 payload 使用, 所以代码没有改变, 依然如下:</p>
<p><img src="https://cdn.nlark.com/yuque/0/2020/png/335089/1582351586259-bb44aa21-1e7a-4257-9b91-a0b847a63cb2.png#align=left&display=inline&height=69&name=%E5%9B%BE%E7%89%87.png&originHeight=137&originWidth=596&size=25713&status=done&style=none&width=298" alt="图片.png"></p>
<p><a name="ZeRQx"></a></p>
<h4 id="Mutations-响应规则"><a href="#Mutations-响应规则" class="headerlink" title="Mutations 响应规则"></a>Mutations 响应规则</h4><p>**<br>Vuex 的 store 中的 state 是响应式的， 当 state 中的数据发生改变时，Vue 组件会自动更新</p>
<p>这就要求我们必须遵守一些Vuex对应的规则：</p>
<ul>
<li>提前在store中初始化好所需的属性</li>
<li>当给 state 中的对象添加新属性时，使用下面的方式：<ol>
<li>使用 <code>Vue.set(obj, &#39;newProp&#39;, 123)</code></li>
<li>用新对象给旧对象重新赋值</li>
</ol>
</li>
</ul>
<p>我们来看一个例子:</p>
<p>当我们点击更新信息时，界面并没有发生对应改变：</p>
<p><img src="https://cdn.nlark.com/yuque/0/2020/png/335089/1582361668512-a56fad4f-0e02-469d-853e-7b89a07d51ce.png#align=left&display=inline&height=444&name=%E5%9B%BE%E7%89%87.png&originHeight=888&originWidth=1507&size=173371&status=done&style=none&width=753.5" alt="图片.png"></p>
<p>以上代码给 state 中的对象添加新属性时，由于不是响应式添加，所以界面不会更新，要想让界面更新，可以使用一下方式：<br>**</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">updateInfo(state, payload) &#123;</span><br><span class="line">  <span class="comment">// state.info['height'] = payload.height</span></span><br><span class="line">  <span class="comment">// 方式一：Vue.set()</span></span><br><span class="line">  <span class="comment">// Vue.set(state.info, 'height', payload.height)</span></span><br><span class="line">  <span class="comment">// 方式二：给 info 赋值一个新的对象</span></span><br><span class="line">  state.info = &#123;...state.info, <span class="string">'height'</span>: payload.height &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>**<br>此时，点击修改信息按钮后，界面和 info 里面的信息都会更新：</p>
<p><strong><br></strong><img src="https://cdn.nlark.com/yuque/0/2020/png/335089/1582361905342-8cfa2308-161d-416b-a2b0-7f48c23ebe9f.png#align=left&display=inline&height=469&name=%E5%9B%BE%E7%89%87.png&originHeight=938&originWidth=1782&size=77046&status=done&style=none&width=891" alt="图片.png"><strong><br></strong><br><a name="9rOql"></a></p>
<h4 id="Mutations-常量类型"><a href="#Mutations-常量类型" class="headerlink" title="Mutations 常量类型"></a>Mutations 常量类型</h4><p>在 Mutations 中， 我们定义了很多事件类型（也就是其中的方法名称），当我们的项目不断增大时，会出现：</p>
<ul>
<li>Vuex 管理的状态越来越多，需要更新状态的情况越来越多</li>
<li>Mutations 中的方法越来越多，使用者需要花费大量的经历去记住这些方法，甚至是多个文件间来回切换，查看方法名称，甚至出现写错的情况</li>
</ul>
<p>如何避免上述的问题呢?</p>
<p>在各种 Flux 实现中，一种很常见的方案是：</p>
<ul>
<li>使用常量替代 Mutations 事件的类型</li>
<li>将这些常量放在一个单独的文件中，方便管理以及让整个 app 所有的事件类型一目了然</li>
</ul>
<p>具体操作：</p>
<ol>
<li>创建一个文件: mutations-types.js，并且在其中定义我们的常量</li>
</ol>
<p><img src="https://cdn.nlark.com/yuque/0/2020/png/335089/1582363101213-dbcc634b-5459-4828-9345-06b98028eb6d.png#align=left&display=inline&height=287&name=%E5%9B%BE%E7%89%87.png&originHeight=573&originWidth=1070&size=52411&status=done&style=none&width=535" alt="图片.png"></p>
<p>定义常量时，我们可以使用 ES2015 中的风格，使用一个常量来作为函数的名称</p>
<ol start="2">
<li>使用定义的常量<br></li>
</ol>
<p><strong><br></strong><img src="https://cdn.nlark.com/yuque/0/2020/png/335089/1582363229840-c4b1a773-a0b1-4f34-b4d9-f0d26332e5b4.png#align=left&display=inline&height=425&name=%E5%9B%BE%E7%89%87.png&originHeight=850&originWidth=1508&size=160927&status=done&style=none&width=754" alt="图片.png"><strong><br></strong><br><a name="H0WwT"></a></p>
<h3 id="Actions"><a href="#Actions" class="headerlink" title="Actions"></a>Actions</h3><p>通常情况下，Vuex 要求 Mutations 中的方法必须是同步方法，因为当我们使用 devtools 时，devtools 可以帮助我们捕捉 Mutations 的快照，但如果是异步操作, 那么 devtools 将不能很好的追踪这个操作什么时候会被完成</p>
<p>比如之前的代码，当执行修改信息操作时，devtools 中会有如下信息：</p>
<p><img src="https://cdn.nlark.com/yuque/0/2020/png/335089/1582366495229-651290b9-a0d1-4c2b-8e0d-0f3189c61114.png#align=left&display=inline&height=433&name=%E5%9B%BE%E7%89%87.png&originHeight=866&originWidth=1322&size=75866&status=done&style=none&width=661" alt="图片.png"></p>
<p>但是，如果 Vuex 中的代码使用了异步函数：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">mutations: &#123;</span><br><span class="line">  [types.UPDATE_INFO](state, payload) &#123;</span><br><span class="line">    setTimeout(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">      state.info = &#123;...state.info, <span class="string">'height'</span>: payload.height &#125;</span><br><span class="line">    &#125;, <span class="number">1000</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>这时会发现 state 中的 info 数据一直没有被改变：</p>
<p><img src="https://cdn.nlark.com/yuque/0/2020/png/335089/1582367932792-4712a4fb-e38f-4385-92fa-2543ccd620ff.png#align=left&display=inline&height=419&name=%E5%9B%BE%E7%89%87.png&originHeight=837&originWidth=1541&size=81049&status=done&style=none&width=770.5" alt="图片.png"></p>
<p>这是因为 devtools 无法追踪到异步操作</p>
<p>虽然强调不要再 Mutations 中进行异步操作，但某些情况,，又确实希望在 Vuex 中进行一些异步操作，比如网络请求，这时可以使用 Action</p>
<p>Action 类似于 Mutations，是用来代替 Mutations 进行异步操作的</p>
<p>在 Action 中，可以将异步操作放在一个 Promise 中，并且在成功或者失败后，调用对应的 resolve 或 reject：</p>
<p><img src="https://cdn.nlark.com/yuque/0/2020/png/335089/1582370522597-ac244103-a3a2-4fc7-aae1-c0a63d06f660.png#align=left&display=inline&height=431&name=%E5%9B%BE%E7%89%87.png&originHeight=861&originWidth=1513&size=103937&status=done&style=none&width=756.5" alt="图片.png"><br><strong><br></strong><img src="https://cdn.nlark.com/yuque/0/2020/png/335089/1582370603653-5a3f155d-4a89-4f56-a028-5b6824d798ba.png#align=left&display=inline&height=108&name=%E5%9B%BE%E7%89%87.png&originHeight=216&originWidth=537&size=12834&status=done&style=none&width=268.5" alt="图片.png"><strong><br></strong><br><a name="RlOOW"></a></p>
<h3 id="Modules"><a href="#Modules" class="headerlink" title="Modules"></a>Modules</h3><p><a name="yYaDZ"></a></p>
<h4 id="Modules-基本使用"><a href="#Modules-基本使用" class="headerlink" title="Modules 基本使用"></a>Modules 基本使用</h4><p>Modules 是模块的意思，为什么在Vuex中我们要使用模块呢?</p>
<p>Vue 使用单一状态树，意味着很多状态都会交给 Vuex 来管理，当应用变得非常复杂时，store 对象就有可能变得相当臃肿，为了解决这个问题，Vuex 允许我们将 store 分割成模块（Module）， 每个模块拥有自己的 state、mutations、actions、getters 等</p>
<p>我们按照什么样的方式来组织模块呢?<br>**</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> ModuleA = &#123;</span><br><span class="line">  state:&#123;&#125;,</span><br><span class="line">  mutations:&#123;&#125;,</span><br><span class="line">  actions:&#123;&#125;,</span><br><span class="line">  getters:&#123;&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> ModuleB = &#123;</span><br><span class="line">  state:&#123;&#125;,</span><br><span class="line">  mutations:&#123;&#125;,</span><br><span class="line">  actions:&#123;&#125;,</span><br><span class="line">  getters:&#123;&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> store = <span class="keyword">new</span> Vuex.Store(&#123;</span><br><span class="line">  modules:&#123;</span><br><span class="line">    a:ModuleA,</span><br><span class="line">    b:ModuleB</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">store.state.a <span class="comment">// ModuleA 的状态</span></span><br><span class="line">store.state.b <span class="comment">// ModuleB 的状态</span></span><br></pre></td></tr></table></figure>

<p>**<br><a name="Otvt6"></a></p>
<h4 id="Modules-中的-state"><a href="#Modules-中的-state" class="headerlink" title="Modules 中的 state"></a>Modules 中的 state<br></h4><p>要想知道如何调用 Modules 中的 state，需要先了解一下 Modules 中的 module 真实位置<br></p>
<p>其实，在 store 实例的 modules  中定义的 a 和 b 会被放到 store 的 state 中：<br><strong><br></strong><img src="https://cdn.nlark.com/yuque/0/2020/png/335089/1582378432016-2bb52a06-1c64-4350-9988-4944874427f5.png#align=left&display=inline&height=206&name=%E5%9B%BE%E7%89%87.png&originHeight=411&originWidth=440&size=27714&status=done&style=none&width=220" alt="图片.png"><strong><br></strong><br>在 devtools 中也能看到：</p>
<p><strong><br></strong><img src="https://cdn.nlark.com/yuque/0/2020/png/335089/1582378148240-9fc84a8f-a9d6-4690-9cb3-929e02945c81.png#align=left&display=inline&height=312&name=%E5%9B%BE%E7%89%87.png&originHeight=623&originWidth=1554&size=65240&status=done&style=none&width=777" alt="图片.png">**</p>
<p>既然 Module 被放到了 store 的 state 中，那么在其他组件中就可以使用 <code>this.$store.state</code> 来调用了：</p>
<p><img src="https://cdn.nlark.com/yuque/0/2020/png/335089/1582378755885-761628fd-b7bc-4fe7-9ee0-87da1610b50d.png#align=left&display=inline&height=472&name=%E5%9B%BE%E7%89%87.png&originHeight=944&originWidth=1503&size=114053&status=done&style=none&width=751.5" alt="图片.png"></p>
<p><strong><img src="https://cdn.nlark.com/yuque/0/2020/png/335089/1582378789885-0ecb8778-2af0-4084-a810-def45a06ccf0.png#align=left&display=inline&height=85&name=%E5%9B%BE%E7%89%87.png&originHeight=169&originWidth=404&size=6958&status=done&style=none&width=202" alt="图片.png"></strong><br>**<br><a name="dqLpP"></a></p>
<h4 id="Modules-中的-mutations"><a href="#Modules-中的-mutations" class="headerlink" title="Modules 中的 mutations"></a>Modules 中的 mutations</h4><p>虽然 mutations 是定义在模块中的，但是在组件中提交时还是使用：<code>this.$store.commit</code><br><strong><br></strong><img src="https://cdn.nlark.com/yuque/0/2020/png/335089/1582379764558-651f8939-2758-4b31-a47c-ec914bc906df.png#align=left&display=inline&height=358&name=%E5%9B%BE%E7%89%87.png&originHeight=715&originWidth=1503&size=113457&status=done&style=none&width=751.5" alt="图片.png"><strong><br></strong><br><strong><img src="https://cdn.nlark.com/yuque/0/2020/png/335089/1582379792441-672623e5-af3a-4f11-90c4-5ab4bc9b20ce.png#align=left&display=inline&height=358&name=%E5%9B%BE%E7%89%87.png&originHeight=716&originWidth=1191&size=58399&status=done&style=none&width=595.5" alt="图片.png"></strong><br>**<br><a name="E4yv3"></a></p>
<h4 id="Modules-中的-getters"><a href="#Modules-中的-getters" class="headerlink" title="Modules 中的 getters"></a>Modules 中的 getters</h4><p><img src="https://cdn.nlark.com/yuque/0/2020/png/335089/1582380686127-63e985e7-d3e4-4db4-b349-0e05f6a58ec4.png#align=left&display=inline&height=383&name=%E5%9B%BE%E7%89%87.png&originHeight=765&originWidth=1587&size=285452&status=done&style=none&width=793.5" alt="图片.png"></p>
<p><a name="R3kBA"></a></p>
<h4 id="Modules-中的-actions"><a href="#Modules-中的-actions" class="headerlink" title="Modules 中的 actions"></a>Modules 中的 actions</h4><p><img src="https://cdn.nlark.com/yuque/0/2020/png/335089/1582381159877-d28ce9e4-8e7a-4227-ae7d-ea726a8b493f.png#align=left&display=inline&height=380&name=%E5%9B%BE%E7%89%87.png&originHeight=759&originWidth=1645&size=105193&status=done&style=none&width=822.5" alt="图片.png"></p>
<p><a name="wFAza"></a></p>
<h2 id="项目结构"><a href="#项目结构" class="headerlink" title="项目结构"></a>项目结构</h2><p>当 Vuex 帮助我们管理过多的内容时，好的项目结构可以让我们的代码更加清晰：</p>
<p><img src="https://cdn.nlark.com/yuque/0/2020/png/335089/1582382365435-02e31dd4-49cf-4120-8dfd-e1860a960456.png#align=left&display=inline&height=244&name=%E5%9B%BE%E7%89%87.png&originHeight=328&originWidth=333&size=14815&status=done&style=none&width=248" alt="图片.png"></p>
<p><a name="jbEKP"></a></p>
<h1 id="网络模块封装"><a href="#网络模块封装" class="headerlink" title="网络模块封装"></a>网络模块封装</h1><p><a name="FuPPw"></a></p>
<h2 id="网络模块的选择"><a href="#网络模块的选择" class="headerlink" title="网络模块的选择"></a>网络模块的选择</h2><p><a name="qcK02"></a></p>
<h3 id="传统的-Ajax"><a href="#传统的-Ajax" class="headerlink" title="传统的 Ajax"></a>传统的 Ajax</h3><ul>
<li>传统的 Ajax 基于 XMLHttpRequest(XHR)</li>
<li>之所以不用它，是因为它配置和调用方式等非常混乱，编码起来看起来令人十分头疼</li>
<li>真实开发中很少直接使用传统的 Ajax ， 而是使用 jQuery-Ajax</li>
</ul>
<p><a name="44iM8"></a></p>
<h3 id="jQuery-Ajax"><a href="#jQuery-Ajax" class="headerlink" title="jQuery-Ajax"></a>jQuery-Ajax</h3><ul>
<li>jQuery-Ajax 相对于传统的 Ajax 非常好用</li>
<li>之所以不用它，是因为 jQuery 是一个重量级的框架，代码有 1w+ 行，而 Vue 的代码才 1w+ 行，所以没必要为了网络请求，特意引用一个 jQuery</li>
</ul>
<p><a name="C02w1"></a></p>
<h3 id="Vue-resource"><a href="#Vue-resource" class="headerlink" title="Vue-resource"></a>Vue-resource</h3><ul>
<li>官方在 Vue1.x 的时候, 推出了 Vue-resource</li>
<li>Vue-resource 的体积相对于 jQuery 小很多</li>
<li>之所以不用它，是因为在 Vue2.0 推出后，Vue 的作者就在 GitHub 的 Issues 中说明了去掉 vue-resource，并且以后也不会再更新，意味着以后 vue-reource 不再支持新的 Vue 版本，也不会再继续更新和维护，对以后的项目开发和维护都存在很大的隐患</li>
</ul>
<p><a name="yhxKw"></a></p>
<h3 id="axios"><a href="#axios" class="headerlink" title="axios"></a>axios</h3><ul>
<li>在说明不再继续更新和维护 vue-resource 的同时，作者还推荐了一个框架：axios</li>
<li>axios有非常多的优点, 并且用起来也非常方便</li>
</ul>
<p><a name="laQ8J"></a></p>
<h2 id="axios-1"><a href="#axios-1" class="headerlink" title="axios"></a>axios</h2><p><a name="WypK3"></a></p>
<h3 id="axios-功能特点"><a href="#axios-功能特点" class="headerlink" title="axios 功能特点"></a>axios 功能特点</h3><ul>
<li>在浏览器中发送 XMLHttpRequests 请求</li>
<li>在 node.js 中发送 http请求</li>
<li>支持 Promise API</li>
<li>拦截请求和响应</li>
<li>转换请求和响应数据</li>
</ul>
<p><a name="Bj7ee"></a></p>
<h3 id="axios-请求方式"><a href="#axios-请求方式" class="headerlink" title="axios 请求方式"></a>axios 请求方式</h3><ul>
<li><code>axios(config)</code></li>
<li><code>axios.request(config)</code></li>
<li><code>axios.get(url[, config])</code></li>
<li><code>axios.delete(url[, config])</code></li>
<li><code>axios.head(url[, config])</code></li>
<li><code>axios.post(url[, data[, config]])</code></li>
<li><code>axios.put(url[, data[, config]])</code></li>
<li><code>axios.patch(url[, data[, config]])</code></li>
</ul>
<p><strong>发送 get 请求</strong></p>
<p><img src="https://cdn.nlark.com/yuque/0/2020/png/335089/1582433664374-0556e0b3-c255-405f-913f-98f0824288bf.png#align=left&display=inline&height=433&name=%E5%9B%BE%E7%89%87.png&originHeight=866&originWidth=1110&size=74244&status=done&style=none&width=555" alt="图片.png"></p>
<p><strong>发送并发请求</strong><br>**<br>使用 <code>axios.all</code>，可以放入多个请求的数组</p>
<p><code>axios.all([])</code> 返回的结果是一个数组，使用 <code>axios.spread</code> 可将数组 [res1,res2] 展开为 res1, res2</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">axios.all([axios.get(<span class="string">'http://123.207.32.32:8000/home/multidata'</span>),</span><br><span class="line">        axios.get(<span class="string">'http://123.207.32.32:8000/home/data'</span>, &#123; <span class="attr">params</span>: &#123; <span class="attr">type</span>: <span class="string">'sell'</span>, <span class="attr">page</span>: <span class="number">1</span> &#125; &#125;)</span><br><span class="line">    ])</span><br><span class="line">    .then(axios.spread(<span class="function">(<span class="params">res1, res2</span>) =&gt;</span> &#123;</span><br><span class="line">        <span class="built_in">console</span>.log(res1);</span><br><span class="line">        <span class="built_in">console</span>.log(res2);</span><br><span class="line">    &#125;))</span><br></pre></td></tr></table></figure>

<p><a name="RjNCc"></a></p>
<h3 id="全局配置"><a href="#全局配置" class="headerlink" title="全局配置"></a>全局配置</h3><p>在开发中，可能很多参数都是固定的，这个时候，我们可以进行一些抽取，也可以利用 axios 的全局配置</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">axios.defaults.baseURL = <span class="string">'123.207.32.32:8000'</span></span><br><span class="line">axios.defaults.headers.post[<span class="string">'Content-Type'</span>] = <span class="string">'application/x-www-form-urlencoded'</span>;</span><br></pre></td></tr></table></figure>

<p><strong><br></strong><img src="https://cdn.nlark.com/yuque/0/2020/png/335089/1582437880616-1a9e48c6-8804-4a5e-a743-1d26f0f507f9.png#align=left&display=inline&height=242&name=%E5%9B%BE%E7%89%87.png&originHeight=483&originWidth=971&size=166310&status=done&style=none&width=485.5" alt="图片.png"><strong><br></strong><br><a name="N5Onb"></a></p>
<h3 id="axios-实例"><a href="#axios-实例" class="headerlink" title="axios 实例"></a>axios 实例</h3><p>为什么要创建 axios 的实例呢?</p>
<p>当我们从 axios 模块中导入对象时，使用的实例是默认的实例，当给该实例设置一些默认配置时，这些配置就被固定下来了，但是后续开发中，某些配置可能会不太一样，比如某些请求需要使用特定的 baseURL 或者 timeout 或者content-Type 等，这时我们就可以创建新的实例，并且传入属于该实例的配置信息</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 创建新的实例</span></span><br><span class="line"><span class="keyword">const</span> axiosInstance = axios.create(&#123;</span><br><span class="line">    baseURL: <span class="string">'http://123.207.32.32:8000'</span>,</span><br><span class="line">    timeout: <span class="number">5000</span>,</span><br><span class="line">    headers: &#123;</span><br><span class="line">        <span class="string">'Content-Type'</span>: <span class="string">'application/x-www-form-urlencoded'</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 发送网络请求</span></span><br><span class="line">axiosInstance(&#123;</span><br><span class="line">    url: <span class="string">'/category'</span>,</span><br><span class="line">    method: <span class="string">'get'</span></span><br><span class="line">&#125;).then(<span class="function"><span class="params">res</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(res);</span><br><span class="line">&#125;).catch(<span class="function"><span class="params">err</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(err);</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<p>**<br><a name="IDVKH"></a></p>
<h3 id="axios-封装"><a href="#axios-封装" class="headerlink" title="axios 封装"></a>axios 封装</h3><p>**</p>
<ul>
<li>封装 axios<br></li>
</ul>
<p><strong><br></strong><img src="https://cdn.nlark.com/yuque/0/2020/png/335089/1582445119331-4c71c374-c6e5-4af2-a38b-a30314f9bb5e.png#align=left&display=inline&height=302&name=%E5%9B%BE%E7%89%87.png&originHeight=603&originWidth=1144&size=67553&status=done&style=none&width=572" alt="图片.png"><strong><br></strong></p>
<ul>
<li>请求 axios<br></li>
</ul>
<p><strong><br></strong><img src="https://cdn.nlark.com/yuque/0/2020/png/335089/1582445134119-a368b6eb-3b7a-4b49-9cc3-9ff347a17f6b.png#align=left&display=inline&height=198&name=%E5%9B%BE%E7%89%87.png&originHeight=396&originWidth=638&size=31099&status=done&style=none&width=319" alt="图片.png"><strong><br></strong><br><a name="2oYwU"></a></p>
<h4 id="拦截器"><a href="#拦截器" class="headerlink" title="拦截器"></a>拦截器</h4><p>axios 提供了拦截器，用于我们在发送每次请求或者得到相应后，进行对应的处理<br>如何使用拦截器呢？<br><strong><br></strong><img src="https://cdn.nlark.com/yuque/0/2020/png/335089/1582446646801-f8e2ba43-dfa2-40e5-86ab-465c1b044520.png#align=left&display=inline&height=218&name=%E5%9B%BE%E7%89%87.png&originHeight=436&originWidth=1312&size=301873&status=done&style=none&width=656" alt="图片.png"><strong><br></strong><br><strong>拦截器中都做什么呢？</strong><br><strong><br>请求拦截可以做到的事情：<br></strong><br><strong><img src="https://cdn.nlark.com/yuque/0/2020/png/335089/1582446691988-b7c2412e-c42a-4035-8ae6-3284370afaaa.png#align=left&display=inline&height=232&name=%E5%9B%BE%E7%89%87.png&originHeight=464&originWidth=1312&size=266404&status=done&style=none&width=656" alt="图片.png"></strong><br>**请求拦截中错误拦截较少，通常都是配置相关的拦截<br>比如请求超时，可以将页面跳转到一个错误页面中</p>
<p>响应拦截中完成的事情：<br>响应的成功拦截中，主要是对数据进行过滤</p>
<p><img src="https://cdn.nlark.com/yuque/0/2020/png/335089/1582446751331-9094e25b-7eea-47f1-8ba1-fe31307ebd7b.png#align=left&display=inline&height=75&name=%E5%9B%BE%E7%89%87.png&originHeight=149&originWidth=1312&size=133804&status=done&style=none&width=656" alt="图片.png"></p>
<p>响应的失败拦截中，可以根据 status 判断报错的错误码，跳转到不同的错误提示页面：</p>
<p><img src="https://cdn.nlark.com/yuque/0/2020/png/335089/1582446787640-8c727e6d-4ba3-44cf-8250-83fbd9c937de.png#align=left&display=inline&height=201&name=%E5%9B%BE%E7%89%87.png&originHeight=402&originWidth=636&size=105620&status=done&style=none&width=318" alt="图片.png"><br>**<br><a name="f6H7O"></a></p>
<h1 id="ES6-补充"><a href="#ES6-补充" class="headerlink" title="ES6 补充"></a>ES6 补充</h1><p><a name="07bvS"></a></p>
<h2 id="JS-高阶函数：filter、map、reduce"><a href="#JS-高阶函数：filter、map、reduce" class="headerlink" title="JS 高阶函数：filter、map、reduce"></a>JS 高阶函数：filter、map、reduce</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line">&lt;script&gt;</span><br><span class="line">  <span class="keyword">const</span> nums = [<span class="number">56</span>, <span class="number">87</span>, <span class="number">165</span>, <span class="number">574</span>, <span class="number">6</span>, <span class="number">94</span>, <span class="number">654</span>, <span class="number">124</span>, <span class="number">75</span>, <span class="number">452</span>]</span><br><span class="line">  <span class="comment">// 现有一个数组nums，要求：</span></span><br><span class="line">  <span class="comment">// 1.选出数组中大于100的数字，保存到新数组newNums中</span></span><br><span class="line">  <span class="comment">// 2.新数组newNums中的元素乘以2，再保存到新数组newNums2中</span></span><br><span class="line">  <span class="comment">// 3.将数组newNums2中的所有元素加起来，保存到total变量中</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">// 1. 使用filter过滤元素</span></span><br><span class="line">  <span class="comment">// 遍历数组nums，将n依次传入，将布尔值为true的值保存到一个新的数组中，最后返回这个数组</span></span><br><span class="line">  <span class="keyword">let</span> newNums = nums.filter(<span class="function"><span class="keyword">function</span>(<span class="params">n</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> n &gt; <span class="number">100</span></span><br><span class="line">  &#125;)</span><br><span class="line">  <span class="built_in">console</span>.log(newNums)</span><br><span class="line">  <span class="comment">// 2.使用map处理数组内的所有元素</span></span><br><span class="line">  <span class="keyword">let</span> newNums2 = newNums.map(<span class="function"><span class="keyword">function</span>(<span class="params">n</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> n * <span class="number">2</span></span><br><span class="line">  &#125;)</span><br><span class="line">  <span class="built_in">console</span>.log(newNums2)</span><br><span class="line">  <span class="comment">// 3.使用reduce对数组中所有内容汇总</span></span><br><span class="line">  <span class="keyword">let</span> total = newNums2.reduce(<span class="function"><span class="keyword">function</span>(<span class="params">preValue, n</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> preValue + n</span><br><span class="line">  &#125;, <span class="number">0</span>)</span><br><span class="line">  <span class="built_in">console</span>.log(total)</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 简便写法</span></span><br><span class="line">  <span class="comment">// 1.链式调用</span></span><br><span class="line">  <span class="keyword">let</span> total2 = nums.filter(<span class="function"><span class="keyword">function</span>(<span class="params">n</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> n &gt; <span class="number">100</span></span><br><span class="line">  &#125;).map(<span class="function"><span class="keyword">function</span>(<span class="params">n</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> n * <span class="number">2</span></span><br><span class="line">  &#125;).reduce(<span class="function"><span class="keyword">function</span>(<span class="params">preValue, n</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> preValue + n</span><br><span class="line">  &#125;, <span class="number">0</span>)</span><br><span class="line">  <span class="built_in">console</span>.log(total2)</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 2.链式调用的箭头函数方式</span></span><br><span class="line">  <span class="keyword">let</span> total3 = nums.filter(<span class="function"><span class="params">n</span> =&gt;</span> n &gt; <span class="number">100</span>).map(<span class="function"><span class="params">n</span> =&gt;</span> n * <span class="number">2</span>).reduce(<span class="function">(<span class="params">preValue, n</span>) =&gt;</span> preValue + n)</span><br><span class="line">  <span class="built_in">console</span>.log(total3)</span><br><span class="line">&lt;<span class="regexp">/script&gt;</span></span><br></pre></td></tr></table></figure>

<p><a name="rGnFm"></a></p>
<h2 id="Promise"><a href="#Promise" class="headerlink" title="Promise"></a>Promise</h2><p>Promise 是 ES6 中一个非常重要和好用的特性，是异步编程的一种解决方案</p>
<p>通常在网络请求时，我们会处理异步事件，因为不能立即拿到结果，所以往往会传入另外一个函数，在数据请求成功时，将数据通过传入的函数回调出去</p>
<p>如果只是一个简单的网络请求，那么这种方案不会给我们带来很大的麻烦，但当网络请求非常复杂时，就会出现回调地狱</p>
<p><a name="eQyQC"></a></p>
<h3 id="网络请求的回调地狱"><a href="#网络请求的回调地狱" class="headerlink" title="网络请求的回调地狱"></a>网络请求的回调地狱</h3><p>我们来考虑下面的场景：</p>
<ul>
<li>通过一个 url1 从服务器加载一个数据 data1，data1 中包含了下一个请求的 url2</li>
<li>再通过 data1 取出 url2，从服务器加载数据 data2，data2 中包含了下一个请求的 url3</li>
<li>再通过 data2 取出 url3，从服务器加载数据 data3，data3 中包含了下一个请求的 url4</li>
<li>最后发送网络请求 url4，获取最终的数据 data4</li>
</ul>
<p><img src="https://cdn.nlark.com/yuque/0/2020/png/335089/1582191458688-81f4abf3-2f27-4151-84a0-6ade6c60bee0.png#align=left&display=inline&height=109&name=%E5%9B%BE%E7%89%87.png&originHeight=218&originWidth=529&size=61359&status=done&style=none&width=264.5" alt="图片.png"></p>
<p>正常情况下，上面的代码不会有什么问题，可以正常运行，并且获取我们想要的结果</p>
<p>但是，这样的代码难看而且不容易维护</p>
<p>我们期望的是以一种更加优雅的方式来进行这种异步操作：使用 Promise</p>
<p><a name="bTzMt"></a></p>
<h3 id="定时器的异步事件"><a href="#定时器的异步事件" class="headerlink" title="定时器的异步事件"></a>定时器的异步事件</h3><p>用一个定时器来模拟异步事件：</p>
<p><img src="https://cdn.nlark.com/yuque/0/2020/png/335089/1582191628474-ed558999-2f5e-4a2b-96a2-ffcf1f5419ef.png#align=left&display=inline&height=81&name=%E5%9B%BE%E7%89%87.png&originHeight=161&originWidth=503&size=54148&status=done&style=none&width=251.5" alt="图片.png"></p>
<p>假设下面的 data 是从网络上 1 秒后请求的数据，<code>console.log</code> 就是我们的处理方式</p>
<p>这是过去的处理方式，我们将它换成 Promise 代码：</p>
<p><img src="https://cdn.nlark.com/yuque/0/2020/png/335089/1582191719384-82a329cd-a683-4a00-836f-ef6eb6b61472.png#align=left&display=inline&height=201&name=%E5%9B%BE%E7%89%87.png&originHeight=402&originWidth=662&size=132018&status=done&style=none&width=331" alt="图片.png"></p>
<p>这个例子会让我们感觉使用 Promise 有些多此一举，因为下面的 Promise 代码明显比上面的代码看起来还要复杂</p>
<p><strong>定时器异步事件解析</strong></p>
<p>我们先来认认真真的读一读这个程序到底做了什么？</p>
<ul>
<li><code>new Promise</code> 创建了一个 Promise 对象</li>
<li>小括号中 <code>((resolve, reject) =&gt; {})</code> 是一个箭头函数<ul>
<li>在创建 Promise 时，传入的这个箭头函数是固定的（一般我们都会这样写）</li>
<li>resolve 和 reject 也是函数，通常情况下，会根据请求数据的成功和失败来决定调用哪一个<ul>
<li>如果是成功的，通常会调用 <code>resolve(messsage)</code>，这时，后续的 then 会被回调</li>
<li>如果是失败的，通常会调用 <code>reject(error)</code>，这时，后续的 catch 会被回调</li>
</ul>
</li>
</ul>
</li>
</ul>
<p><a name="EZ8Lj"></a></p>
<h3 id="Promise-三种状态"><a href="#Promise-三种状态" class="headerlink" title="Promise 三种状态"></a>Promise 三种状态</h3><p>当开发中有异步操作时，可以给异步操作包装一个 Promise，异步操作之后会有三种状态：</p>
<ul>
<li>pending：等待状态，比如正在进行网络请求，或者定时器没有到时间</li>
<li>fulfill：满足状态，当我们主动回调了 resolve 时，就处于该状态，并且会回调 <code>.then()</code></li>
<li>reject：拒绝状态，当我们主动回调了 reject 时，就处于该状态，并且会回调 <code>.catch()</code></li>
</ul>
<p><img src="https://cdn.nlark.com/yuque/0/2020/png/335089/1582201313661-c09fd3be-9d67-4117-9d99-358b738cdde0.png#align=left&display=inline&height=303&name=%E5%9B%BE%E7%89%87.png&originHeight=605&originWidth=1151&size=231092&status=done&style=none&width=575.5" alt="图片.png"></p>
<p>以上代码的另一种写法：</p>
<p><img src="https://cdn.nlark.com/yuque/0/2020/png/335089/1582201135894-3e755fea-c26f-4460-95c9-8e811db56e43.png#align=left&display=inline&height=183&name=%E5%9B%BE%E7%89%87.png&originHeight=294&originWidth=604&size=74484&status=done&style=none&width=375" alt="图片.png"></p>
<p><a name="df6i7"></a></p>
<h3 id="Primose-的链式调用"><a href="#Primose-的链式调用" class="headerlink" title="Primose 的链式调用"></a>Primose 的链式调用</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">&lt;script&gt;</span><br><span class="line">  <span class="comment">// promise 链式调用</span></span><br><span class="line">  <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">    setTimeout(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">      resolve(<span class="string">'Hello World'</span>)</span><br><span class="line">    &#125;, <span class="number">1000</span>)</span><br><span class="line">  &#125;).then(<span class="function"><span class="params">data</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(data) <span class="comment">// Hello World</span></span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">Promise</span>.resolve(data + <span class="string">'111'</span>)</span><br><span class="line">  &#125;).then(<span class="function"><span class="params">data</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(data) <span class="comment">// Hello World111</span></span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">Promise</span>.resolve(data + <span class="string">'222'</span>)</span><br><span class="line">  &#125;).then(<span class="function"><span class="params">data</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(data) <span class="comment">// Hello World111222</span></span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">Promise</span>.reject(data + <span class="string">'error'</span>)</span><br><span class="line">  &#125;).then(<span class="function"><span class="params">data</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(data) <span class="comment">// 这里代码不会执行，没有输出</span></span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">Promise</span>.resolve(data + <span class="string">'333'</span>)</span><br><span class="line">  &#125;).catch(<span class="function"><span class="params">data</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(data) <span class="comment">// Hello World111222error</span></span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">Promise</span>.resolve(data + <span class="string">'444'</span>)</span><br><span class="line">  &#125;).then(<span class="function"><span class="params">data</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(data) <span class="comment">// Hello World111222error444</span></span><br><span class="line">  &#125;)</span><br><span class="line">&lt;<span class="regexp">/script&gt;</span></span><br></pre></td></tr></table></figure>

<p><strong>链式调用简写</strong></p>
<p>将数据直接包装成 Promise.resolve，在 then 中直接返回：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">&lt;script&gt;</span><br><span class="line">  <span class="comment">// promise 链式调用简写</span></span><br><span class="line"> <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">  setTimeout(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">    	resolve(<span class="string">'Hello World'</span>)</span><br><span class="line">  	&#125;, <span class="number">1000</span>)</span><br><span class="line">  &#125;).then(<span class="function"><span class="params">data</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(data) <span class="comment">// Hello World</span></span><br><span class="line">    <span class="keyword">return</span> data + <span class="string">'111'</span></span><br><span class="line">  &#125;).then(<span class="function"><span class="params">data</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(data) <span class="comment">// Hello World111</span></span><br><span class="line">    <span class="keyword">return</span> data + <span class="string">'222'</span></span><br><span class="line">  &#125;).then(<span class="function"><span class="params">data</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(data) <span class="comment">// Hello World111222</span></span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">Promise</span>.reject(data + <span class="string">'error'</span>)</span><br><span class="line">  &#125;).then(<span class="function"><span class="params">data</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(data) <span class="comment">// 这里代码不会执行，没有输出</span></span><br><span class="line">    <span class="keyword">return</span> data + <span class="string">'333'</span></span><br><span class="line">  &#125;).catch(<span class="function"><span class="params">data</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(data) <span class="comment">// Hello World111222error</span></span><br><span class="line">    <span class="keyword">return</span> data + <span class="string">'444'</span></span><br><span class="line">  &#125;).then(<span class="function"><span class="params">data</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(data) <span class="comment">// Hello World111222error444</span></span><br><span class="line">  &#125;)</span><br><span class="line">&lt;<span class="regexp">/script&gt;</span></span><br></pre></td></tr></table></figure>

<p><a name="DsuSY"></a></p>
<h3 id="promise-的-all-方法的使用"><a href="#promise-的-all-方法的使用" class="headerlink" title="promise 的 all 方法的使用"></a>promise 的 all 方法的使用</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">&lt;script&gt;</span><br><span class="line">  <span class="comment">// Promise 的 all 方法使用</span></span><br><span class="line">  <span class="built_in">Promise</span>.all([</span><br><span class="line">    <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">      setTimeout(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">        resolve(&#123;</span><br><span class="line">          name: <span class="string">'lyy'</span>,</span><br><span class="line">          age: <span class="number">18</span></span><br><span class="line">        &#125;)</span><br><span class="line">      &#125;, <span class="number">1000</span>)</span><br><span class="line">    &#125;),</span><br><span class="line">    <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">      setTimeout(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">        resolve(&#123;</span><br><span class="line">          name: <span class="string">'sss'</span>,</span><br><span class="line">          age: <span class="number">17</span></span><br><span class="line">        &#125;)</span><br><span class="line">      &#125;, <span class="number">2000</span>)</span><br><span class="line">    &#125;)</span><br><span class="line">  ]).then(<span class="function"><span class="params">results</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(results);</span><br><span class="line">  &#125;)</span><br><span class="line">&lt;<span class="regexp">/script&gt;</span></span><br></pre></td></tr></table></figure>

<p><img src="https://cdn.nlark.com/yuque/0/2020/png/335089/1582206639895-8a439a5a-d660-46fa-9176-f54f9f0e9066.png#align=left&display=inline&height=170&name=%E5%9B%BE%E7%89%87.png&originHeight=281&originWidth=349&size=8267&status=done&style=none&width=211" alt="图片.png"></p>

        </div>

        
            <section class="post-copyright">
                
                    <p class="copyright-item">
                        <span>Author:</span>
                        <span>DoffChen</span>
                    </p>
                
                
                
                

            </section>
        
        <section class="post-tags">
            <div>
                <span>Tag(s):</span>
                <span class="tag">
                    
                    
                        <a href="/tags/Vue/"># Vue</a>
                    
                        
                </span>
            </div>
            <div>
                <a href="javascript:window.history.back();">back</a>
                <span>· </span>
                <a href="/">home</a>
            </div>
        </section>
        <section class="post-nav">
            
            
            <a class="next" rel="next" href="/2020/02/26/原码反码补码计算器/">原码反码补码计算器</a>
            
        </section>


    </article>
</div>

        </div>
        <footer id="footer" class="footer">
    <div class="copyright">
        <span>© DoffChen | Powered by <a href="https://hexo.io" target="_blank">Hexo</a> & <a href="https://github.com/Siricee/hexo-theme-Chic" target="_blank">Chic</a></span>
    </div>
</footer>

    </div>
</body>
</html>
